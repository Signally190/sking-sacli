; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.24215.1 

	TITLE	C:\Users\Administrator\Desktop\????? ??\????? ??\Client Source Code\system\SkyIsland.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?sky_island_no@@3KA				; sky_island_no
PUBLIC	?sky_island_no_bak@@3KA				; sky_island_no_bak
PUBLIC	?lpsurLand@@3PAUIDirectDrawSurface@@A		; lpsurLand
PUBLIC	?lpsurCloud1@@3PAUIDirectDrawSurface@@A		; lpsurCloud1
PUBLIC	?lpsurCloud2@@3PAUIDirectDrawSurface@@A		; lpsurCloud2
PUBLIC	?moonFlag@@3HA					; moonFlag
PUBLIC	?NCLOUD_Flag@@3HA				; NCLOUD_Flag
PUBLIC	?LandWidth@@3FA					; LandWidth
PUBLIC	?LandHeight@@3FA				; LandHeight
PUBLIC	?CloudWidth1@@3FA				; CloudWidth1
PUBLIC	?CloudHeight1@@3FA				; CloudHeight1
PUBLIC	?CloudWidth2@@3FA				; CloudWidth2
PUBLIC	?CloudHeight2@@3FA				; CloudHeight2
PUBLIC	?fMapWidth@@3HA					; fMapWidth
PUBLIC	?fMapHeight@@3HA				; fMapHeight
PUBLIC	?iCloudX1@@3HA					; iCloudX1
PUBLIC	?iCloudY1@@3HA					; iCloudY1
PUBLIC	?iCloudX2@@3HA					; iCloudX2
PUBLIC	?iCloudY2@@3HA					; iCloudY2
PUBLIC	?iCloudDX@@3HA					; iCloudDX
PUBLIC	?iCloudDY@@3HA					; iCloudDY
PUBLIC	?bDrawUpCloud@@3HA				; bDrawUpCloud
PUBLIC	?g_rc@@3UtagRECT@@A				; g_rc
_BSS	SEGMENT
?sky_island_no@@3KA DD 01H DUP (?)			; sky_island_no
?sky_island_no_bak@@3KA DD 01H DUP (?)			; sky_island_no_bak
?lpsurLand@@3PAUIDirectDrawSurface@@A DD 01H DUP (?)	; lpsurLand
?lpsurCloud1@@3PAUIDirectDrawSurface@@A DD 01H DUP (?)	; lpsurCloud1
?lpsurCloud2@@3PAUIDirectDrawSurface@@A DD 01H DUP (?)	; lpsurCloud2
?moonFlag@@3HA DD 01H DUP (?)				; moonFlag
?NCLOUD_Flag@@3HA DD 01H DUP (?)			; NCLOUD_Flag
?LandWidth@@3FA DW 01H DUP (?)				; LandWidth
	ALIGN	4

?LandHeight@@3FA DW 01H DUP (?)				; LandHeight
	ALIGN	4

?CloudWidth1@@3FA DW 01H DUP (?)			; CloudWidth1
	ALIGN	4

?CloudHeight1@@3FA DW 01H DUP (?)			; CloudHeight1
	ALIGN	4

?CloudWidth2@@3FA DW 01H DUP (?)			; CloudWidth2
	ALIGN	4

?CloudHeight2@@3FA DW 01H DUP (?)			; CloudHeight2
	ALIGN	4

?fMapWidth@@3HA DD 01H DUP (?)				; fMapWidth
?fMapHeight@@3HA DD 01H DUP (?)				; fMapHeight
?iCloudX1@@3HA DD 01H DUP (?)				; iCloudX1
?iCloudY1@@3HA DD 01H DUP (?)				; iCloudY1
?iCloudX2@@3HA DD 01H DUP (?)				; iCloudX2
?iCloudY2@@3HA DD 01H DUP (?)				; iCloudY2
?iCloudDX@@3HA DD 01H DUP (?)				; iCloudDX
?iCloudDY@@3HA DD 01H DUP (?)				; iCloudDY
?bDrawUpCloud@@3HA DD 01H DUP (?)			; bDrawUpCloud
?g_rc@@3UtagRECT@@A DB 010H DUP (?)			; g_rc
?speed@?1??SkyIslandProc@@YAXXZ@4KA DD 01H DUP (?)	; `SkyIslandProc'::`2'::speed
_BSS	ENDS
_DATA	SEGMENT
?FontPal@@3PAKA DD 0ffffffH				; FontPal
	DD	0ffff00H
	DD	0ff00ffH
	DD	0ff0000H
	DD	0ffffH
	DD	0ff00H
	DD	0ffH
	DD	0a4a0a0H
	DD	0f0caa6H
	DD	0c0dcc0H
	DD	08cffH
	DD	0247fffH
_DATA	ENDS
PUBLIC	?SkyIslandDraw@@YAXH@Z				; SkyIslandDraw
PUBLIC	?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
PUBLIC	?SkyIslandInit@@YAXXZ				; SkyIslandInit
PUBLIC	?SkyIslandRelease@@YAXXZ			; SkyIslandRelease
PUBLIC	?SkyIslandLoadBmp@@YAXXZ			; SkyIslandLoadBmp
PUBLIC	?SkyIslandSetNo@@YAXH@Z				; SkyIslandSetNo
PUBLIC	?SkyIslandDraw2@@YAXH@Z				; SkyIslandDraw2
PUBLIC	?SkyIslandCheckSurface@@YAHXZ			; SkyIslandCheckSurface
PUBLIC	?SkyIslandProc@@YAXXZ				; SkyIslandProc
EXTRN	__Init_thread_header:PROC
EXTRN	__Init_thread_abort:PROC
EXTRN	__Init_thread_footer:PROC
EXTRN	?TimeGetTime@@YAIXZ:PROC			; TimeGetTime
EXTRN	_memcpy:PROC
EXTRN	_memset:PROC
EXTRN	__imp__SetRect@20:PROC
EXTRN	__imp__rand:PROC
EXTRN	?CreateSurface@@YAPAUIDirectDrawSurface@@FFKI@Z:PROC ; CreateSurface
EXTRN	?realGetImage@@YAHHPAPAEPAH1@Z:PROC		; realGetImage
EXTRN	?realGetWH@@YAHKPAF0@Z:PROC			; realGetWH
EXTRN	?realGetNo@@YAHKPAK@Z:PROC			; realGetNo
EXTRN	@_RTC_CheckStackVars@8:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_InitBase:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	__Init_thread_epoch:DWORD
EXTRN	?lpDraw@@3PAUDIRECT_DRAW@@A:DWORD		; lpDraw
EXTRN	?DEF_APPSIZEX@@3HA:DWORD			; DEF_APPSIZEX
EXTRN	?DEF_APPSIZEY@@3HA:DWORD			; DEF_APPSIZEY
EXTRN	?pRealBinBits@@3PADA:DWORD			; pRealBinBits
EXTRN	?RealBinWidth@@3HA:DWORD			; RealBinWidth
EXTRN	?RealBinHeight@@3HA:DWORD			; RealBinHeight
EXTRN	?nowFloorGxSize@@3HA:DWORD			; nowFloorGxSize
EXTRN	?nowFloorGySize@@3HA:DWORD			; nowFloorGySize
EXTRN	?nowGx@@3HA:DWORD				; nowGx
EXTRN	?nowGy@@3HA:DWORD				; nowGy
EXTRN	?pc@@3UPC@@A:BYTE				; pc
EXTRN	?displayBpp@@3HA:DWORD				; displayBpp
EXTRN	?highColorPalette@@3PAGA:BYTE			; highColorPalette
EXTRN	?highColor32Palette@@3PAIA:BYTE			; highColor32Palette
EXTRN	___security_cookie:DWORD
EXTRN	__tls_array:DWORD
EXTRN	__tls_index:DWORD
_BSS	SEGMENT
?dwSlow1@?1??SkyIslandDraw@@YAXH@Z@4KA DD 01H DUP (?)	; `SkyIslandDraw'::`2'::dwSlow1
?compx@?1??SkyIslandDraw@@YAXH@Z@4HA DD 01H DUP (?)	; `SkyIslandDraw'::`2'::compx
?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA DD 01H DUP (?)	; TSS0<`template-parameter-2',IslandDraw,int, ?? &>
?compy@?1??SkyIslandDraw@@YAXH@Z@4HA DD 01H DUP (?)	; `SkyIslandDraw'::`2'::compy
?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA DD 01H DUP (?)	; TSS1<`template-parameter-2',IslandDraw,int, ?? &>
?dwSlow2@?1??SkyIslandDraw2@@YAXH@Z@4KA DD 01H DUP (?)	; `SkyIslandDraw2'::`2'::dwSlow2
_BSS	ENDS
;	COMDAT rtc$TMZ
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
rtc$IMZ	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?SkyIslandDraw@@YAXH@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?SkyIslandDraw@@YAXH@Z$0
	DD	0ffffffffH
	DD	FLAT:__unwindfunclet$?SkyIslandDraw@@YAXH@Z$1
__ehfuncinfo$?SkyIslandDraw@@YAXH@Z DD 019930522H
	DD	02H
	DD	FLAT:__unwindtable$?SkyIslandDraw@@YAXH@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	00H
xdata$x	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandProc@@YAXXZ
_TEXT	SEGMENT
tv70 = -232						; size = 4
_dy$1 = -32						; size = 4
_dx$2 = -20						; size = 4
_now$3 = -8						; size = 4
?SkyIslandProc@@YAXXZ PROC				; SkyIslandProc, COMDAT

; 529  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec e8 00 00
	00		 sub	 esp, 232		; 000000e8H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 18 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-232]
  00012	b9 3a 00 00 00	 mov	 ecx, 58			; 0000003aH
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 530  : 	static DWORD speed = 0;
; 531  : 	if( sky_island_no){

  0001e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no
  00025	0f 84 9d 00 00
	00		 je	 $LN1@SkyIslandP

; 532  : 		DWORD now = TimeGetTime();

  0002b	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  00030	89 45 f8	 mov	 DWORD PTR _now$3[ebp], eax

; 533  : 		if( now > speed){

  00033	8b 45 f8	 mov	 eax, DWORD PTR _now$3[ebp]
  00036	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?speed@?1??SkyIslandProc@@YAXXZ@4KA
  0003c	0f 86 86 00 00
	00		 jbe	 $LN1@SkyIslandP

; 534  : 			speed = now + 1000;

  00042	8b 45 f8	 mov	 eax, DWORD PTR _now$3[ebp]
  00045	05 e8 03 00 00	 add	 eax, 1000		; 000003e8H
  0004a	a3 00 00 00 00	 mov	 DWORD PTR ?speed@?1??SkyIslandProc@@YAXXZ@4KA, eax

; 535  : 			int dx = 0, dy = 0;

  0004f	c7 45 ec 00 00
	00 00		 mov	 DWORD PTR _dx$2[ebp], 0
  00056	c7 45 e0 00 00
	00 00		 mov	 DWORD PTR _dy$1[ebp], 0

; 536  : 			switch( rand() & 0x3){

  0005d	8b f4		 mov	 esi, esp
  0005f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00065	3b f4		 cmp	 esi, esp
  00067	e8 00 00 00 00	 call	 __RTC_CheckEsp
  0006c	83 e0 03	 and	 eax, 3
  0006f	89 85 18 ff ff
	ff		 mov	 DWORD PTR tv70[ebp], eax
  00075	74 0b		 je	 SHORT $LN6@SkyIslandP
  00077	83 bd 18 ff ff
	ff 01		 cmp	 DWORD PTR tv70[ebp], 1
  0007e	74 19		 je	 SHORT $LN7@SkyIslandP
  00080	eb 19		 jmp	 SHORT $LN8@SkyIslandP
$LN6@SkyIslandP:

; 537  : 			case 0:
; 538  : 				dx = rand() & 0x2;

  00082	8b f4		 mov	 esi, esp
  00084	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  0008a	3b f4		 cmp	 esi, esp
  0008c	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00091	83 e0 02	 and	 eax, 2
  00094	89 45 ec	 mov	 DWORD PTR _dx$2[ebp], eax

; 539  : 				break;

  00097	eb 17		 jmp	 SHORT $LN2@SkyIslandP
$LN7@SkyIslandP:

; 540  : 			case 1:
; 541  : 				break;

  00099	eb 15		 jmp	 SHORT $LN2@SkyIslandP
$LN8@SkyIslandP:

; 542  : 			default:
; 543  : 				dy = rand() & 0x2;

  0009b	8b f4		 mov	 esi, esp
  0009d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  000a3	3b f4		 cmp	 esi, esp
  000a5	e8 00 00 00 00	 call	 __RTC_CheckEsp
  000aa	83 e0 02	 and	 eax, 2
  000ad	89 45 e0	 mov	 DWORD PTR _dy$1[ebp], eax
$LN2@SkyIslandP:

; 544  : 				break;
; 545  : 			}
; 546  : 			iCloudDX = 4 - dx;

  000b0	b8 04 00 00 00	 mov	 eax, 4
  000b5	2b 45 ec	 sub	 eax, DWORD PTR _dx$2[ebp]
  000b8	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudDX@@3HA, eax ; iCloudDX

; 547  : 			iCloudDY = 2 + dy;

  000bd	8b 45 e0	 mov	 eax, DWORD PTR _dy$1[ebp]
  000c0	83 c0 02	 add	 eax, 2
  000c3	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudDY@@3HA, eax ; iCloudDY
$LN1@SkyIslandP:

; 548  : 		}
; 549  : 	}
; 550  : }

  000c8	5f		 pop	 edi
  000c9	5e		 pop	 esi
  000ca	5b		 pop	 ebx
  000cb	81 c4 e8 00 00
	00		 add	 esp, 232		; 000000e8H
  000d1	3b ec		 cmp	 ebp, esp
  000d3	e8 00 00 00 00	 call	 __RTC_CheckEsp
  000d8	8b e5		 mov	 esp, ebp
  000da	5d		 pop	 ebp
  000db	c3		 ret	 0
?SkyIslandProc@@YAXXZ ENDP				; SkyIslandProc
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandCheckSurface@@YAHXZ
_TEXT	SEGMENT
?SkyIslandCheckSurface@@YAHXZ PROC			; SkyIslandCheckSurface, COMDAT

; 518  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec c0 00 00
	00		 sub	 esp, 192		; 000000c0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 40 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-192]
  00012	b9 30 00 00 00	 mov	 ecx, 48			; 00000030H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 519  : 	if( lpsurLand)

  0001e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
  00025	74 27		 je	 SHORT $LN2@SkyIslandC

; 520  : 		if( lpsurLand->IsLost() )

  00027	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  0002c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0002e	8b f4		 mov	 esi, esp
  00030	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  00036	52		 push	 edx
  00037	8b 41 60	 mov	 eax, DWORD PTR [ecx+96]
  0003a	ff d0		 call	 eax
  0003c	3b f4		 cmp	 esi, esp
  0003e	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00043	85 c0		 test	 eax, eax
  00045	74 07		 je	 SHORT $LN2@SkyIslandC

; 521  : 			return TRUE;

  00047	b8 01 00 00 00	 mov	 eax, 1
  0004c	eb 32		 jmp	 SHORT $LN1@SkyIslandC
$LN2@SkyIslandC:

; 522  : 	if( lpsurCloud1)

  0004e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
  00055	74 27		 je	 SHORT $LN4@SkyIslandC

; 523  : 		if( lpsurCloud1->IsLost() )

  00057	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  0005c	8b 08		 mov	 ecx, DWORD PTR [eax]
  0005e	8b f4		 mov	 esi, esp
  00060	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  00066	52		 push	 edx
  00067	8b 41 60	 mov	 eax, DWORD PTR [ecx+96]
  0006a	ff d0		 call	 eax
  0006c	3b f4		 cmp	 esi, esp
  0006e	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00073	85 c0		 test	 eax, eax
  00075	74 07		 je	 SHORT $LN4@SkyIslandC

; 524  : 			return TRUE;

  00077	b8 01 00 00 00	 mov	 eax, 1
  0007c	eb 02		 jmp	 SHORT $LN1@SkyIslandC
$LN4@SkyIslandC:

; 525  : 	return FALSE;

  0007e	33 c0		 xor	 eax, eax
$LN1@SkyIslandC:

; 526  : }

  00080	5f		 pop	 edi
  00081	5e		 pop	 esi
  00082	5b		 pop	 ebx
  00083	81 c4 c0 00 00
	00		 add	 esp, 192		; 000000c0H
  00089	3b ec		 cmp	 ebp, esp
  0008b	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00090	8b e5		 mov	 esp, ebp
  00092	5d		 pop	 ebp
  00093	c3		 ret	 0
?SkyIslandCheckSurface@@YAHXZ ENDP			; SkyIslandCheckSurface
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandDraw2@@YAXH@Z
_TEXT	SEGMENT
tv138 = -320						; size = 4
_y$1 = -120						; size = 4
_x$2 = -108						; size = 4
_dy$3 = -96						; size = 4
_dx$4 = -84						; size = 4
_h$5 = -72						; size = 2
_w$6 = -60						; size = 2
_no$7 = -48						; size = 4
_rc$ = -36						; size = 16
_now$ = -12						; size = 4
__$ArrayPad$ = -4					; size = 4
_fl$ = 8						; size = 4
?SkyIslandDraw2@@YAXH@Z PROC				; SkyIslandDraw2, COMDAT

; 434  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 40 01 00
	00		 sub	 esp, 320		; 00000140H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd c0 fe ff
	ff		 lea	 edi, DWORD PTR [ebp-320]
  00012	b9 50 00 00 00	 mov	 ecx, 80			; 00000050H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd
  0001e	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00023	33 c5		 xor	 eax, ebp
  00025	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 435  : #ifdef _MOON_FAIRYLAND				// (不可开) ROG ADD 月之仙境
; 436  : 	if(moonFlag == TRUE)

  00028	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?moonFlag@@3HA, 1 ; moonFlag
  0002f	75 05		 jne	 SHORT $LN4@SkyIslandD

; 437  : 	return;

  00031	e9 e4 02 00 00	 jmp	 $LN1@SkyIslandD
$LN4@SkyIslandD:

; 438  : #endif
; 439  : 
; 440  : 	static DWORD dwSlow2;
; 441  : 	DWORD now;
; 442  : 	RECT rc;
; 443  : 	if( bDrawUpCloud){

  00036	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bDrawUpCloud@@3HA, 0 ; bDrawUpCloud
  0003d	0f 84 d7 02 00
	00		 je	 $LN1@SkyIslandD

; 444  : 		bDrawUpCloud = FALSE;

  00043	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?bDrawUpCloud@@3HA, 0 ; bDrawUpCloud

; 445  : 		if( sky_island_no && lpsurCloud2 
; 446  : #ifdef _NEW_CLOUD
; 447  : 			|| ( fl == 61000 || fl == 61100 )

  0004d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no
  00054	74 09		 je	 SHORT $LN8@SkyIslandD
  00056	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud2
  0005d	75 16		 jne	 SHORT $LN7@SkyIslandD
$LN8@SkyIslandD:
  0005f	81 7d 08 48 ee
	00 00		 cmp	 DWORD PTR _fl$[ebp], 61000 ; 0000ee48H
  00066	74 0d		 je	 SHORT $LN7@SkyIslandD
  00068	81 7d 08 ac ee
	00 00		 cmp	 DWORD PTR _fl$[ebp], 61100 ; 0000eeacH
  0006f	0f 85 a5 02 00
	00		 jne	 $LN1@SkyIslandD
$LN7@SkyIslandD:

; 448  : #endif
; 449  : 			){
; 450  : 			if( (now = TimeGetTime()) > dwSlow2){

  00075	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  0007a	89 45 f4	 mov	 DWORD PTR _now$[ebp], eax
  0007d	8b 45 f4	 mov	 eax, DWORD PTR _now$[ebp]
  00080	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?dwSlow2@?1??SkyIslandDraw2@@YAXH@Z@4KA
  00086	0f 86 a8 01 00
	00		 jbe	 $LN10@SkyIslandD

; 451  : 				dwSlow2 = now + 73;

  0008c	8b 45 f4	 mov	 eax, DWORD PTR _now$[ebp]
  0008f	83 c0 49	 add	 eax, 73			; 00000049H
  00092	a3 00 00 00 00	 mov	 DWORD PTR ?dwSlow2@?1??SkyIslandDraw2@@YAXH@Z@4KA, eax

; 452  : 				iCloudX2 += iCloudDX;

  00097	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX2@@3HA ; iCloudX2
  0009c	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?iCloudDX@@3HA ; iCloudDX
  000a2	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudX2@@3HA, eax ; iCloudX2

; 453  : 				iCloudY2 += iCloudDY;

  000a7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY2@@3HA ; iCloudY2
  000ac	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?iCloudDY@@3HA ; iCloudDY
  000b2	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudY2@@3HA, eax ; iCloudY2

; 454  : 				if( (iCloudX2>=DEF_APPSIZEX) || //((iCloudX2+CloudWidth2)<0) ||

  000b7	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX2@@3HA ; iCloudX2
  000bc	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  000c2	7d 11		 jge	 SHORT $LN12@SkyIslandD
  000c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY2@@3HA ; iCloudY2
  000c9	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  000cf	0f 8c 5f 01 00
	00		 jl	 $LN10@SkyIslandD
$LN12@SkyIslandD:

; 455  : 					(iCloudY2>=DEF_APPSIZEY) /*|| ((iCloudY2+CloudHeight2)<0)*/){
; 456  : 					//产生一朵新的云
; 457  : 					DWORD no;
; 458  : #ifdef _NEW_CLOUD
; 459  : 					if( fl == 61000 || fl == 61100 ){

  000d5	81 7d 08 48 ee
	00 00		 cmp	 DWORD PTR _fl$[ebp], 61000 ; 0000ee48H
  000dc	74 09		 je	 SHORT $LN15@SkyIslandD
  000de	81 7d 08 ac ee
	00 00		 cmp	 DWORD PTR _fl$[ebp], 61100 ; 0000eeacH
  000e5	75 2f		 jne	 SHORT $LN13@SkyIslandD
$LN15@SkyIslandD:

; 460  : 						realGetNo( 29077+(rand()%2), &no);

  000e7	8d 45 d0	 lea	 eax, DWORD PTR _no$7[ebp]
  000ea	50		 push	 eax
  000eb	8b f4		 mov	 esi, esp
  000ed	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  000f3	3b f4		 cmp	 esi, esp
  000f5	e8 00 00 00 00	 call	 __RTC_CheckEsp
  000fa	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  000ff	79 05		 jns	 SHORT $LN33@SkyIslandD
  00101	48		 dec	 eax
  00102	83 c8 fe	 or	 eax, -2			; fffffffeH
  00105	40		 inc	 eax
$LN33@SkyIslandD:
  00106	05 95 71 00 00	 add	 eax, 29077		; 00007195H
  0010b	50		 push	 eax
  0010c	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00111	83 c4 08	 add	 esp, 8

; 461  : 					}
; 462  : 					else

  00114	eb 24		 jmp	 SHORT $LN14@SkyIslandD
$LN13@SkyIslandD:

; 463  : 						realGetNo( 40500+(rand()&0x3), &no);

  00116	8d 45 d0	 lea	 eax, DWORD PTR _no$7[ebp]
  00119	50		 push	 eax
  0011a	8b f4		 mov	 esi, esp
  0011c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00122	3b f4		 cmp	 esi, esp
  00124	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00129	83 e0 03	 and	 eax, 3
  0012c	05 34 9e 00 00	 add	 eax, 40500		; 00009e34H
  00131	50		 push	 eax
  00132	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00137	83 c4 08	 add	 esp, 8
$LN14@SkyIslandD:

; 464  : #else
; 465  : 					realGetNo( 40500+(rand()&0x3), &no);
; 466  : #endif
; 467  : 					short w, h;
; 468  : 					realGetWH( no, &w, &h);

  0013a	8d 45 b8	 lea	 eax, DWORD PTR _h$5[ebp]
  0013d	50		 push	 eax
  0013e	8d 4d c4	 lea	 ecx, DWORD PTR _w$6[ebp]
  00141	51		 push	 ecx
  00142	8b 55 d0	 mov	 edx, DWORD PTR _no$7[ebp]
  00145	52		 push	 edx
  00146	e8 00 00 00 00	 call	 ?realGetWH@@YAHKPAF0@Z	; realGetWH
  0014b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 469  : 					if( w!=CloudWidth2 || h!=CloudHeight2){

  0014e	0f bf 45 c4	 movsx	 eax, WORD PTR _w$6[ebp]
  00152	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudWidth2@@3FA ; CloudWidth2
  00159	3b c1		 cmp	 eax, ecx
  0015b	75 0f		 jne	 SHORT $LN17@SkyIslandD
  0015d	0f bf 45 b8	 movsx	 eax, WORD PTR _h$5[ebp]
  00161	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudHeight2@@3FA ; CloudHeight2
  00168	3b c1		 cmp	 eax, ecx
  0016a	74 31		 je	 SHORT $LN16@SkyIslandD
$LN17@SkyIslandD:

; 470  : 						CloudWidth2 = w;

  0016c	66 8b 45 c4	 mov	 ax, WORD PTR _w$6[ebp]
  00170	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth2@@3FA, ax ; CloudWidth2

; 471  : 						CloudHeight2 = h;

  00176	66 8b 45 b8	 mov	 ax, WORD PTR _h$5[ebp]
  0017a	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight2@@3FA, ax ; CloudHeight2

; 472  : 						LoadBmpToSurface( no, lpsurCloud2, w, h);

  00180	0f bf 45 b8	 movsx	 eax, WORD PTR _h$5[ebp]
  00184	50		 push	 eax
  00185	0f bf 4d c4	 movsx	 ecx, WORD PTR _w$6[ebp]
  00189	51		 push	 ecx
  0018a	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A ; lpsurCloud2
  00190	52		 push	 edx
  00191	8b 45 d0	 mov	 eax, DWORD PTR _no$7[ebp]
  00194	50		 push	 eax
  00195	e8 00 00 00 00	 call	 ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
  0019a	83 c4 10	 add	 esp, 16			; 00000010H
$LN16@SkyIslandD:

; 473  : 					}
; 474  : 					int dx = 0, dy = 0;

  0019d	c7 45 ac 00 00
	00 00		 mov	 DWORD PTR _dx$4[ebp], 0
  001a4	c7 45 a0 00 00
	00 00		 mov	 DWORD PTR _dy$3[ebp], 0

; 475  : 					switch( rand()%3){

  001ab	8b f4		 mov	 esi, esp
  001ad	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  001b3	3b f4		 cmp	 esi, esp
  001b5	e8 00 00 00 00	 call	 __RTC_CheckEsp
  001ba	99		 cdq
  001bb	b9 03 00 00 00	 mov	 ecx, 3
  001c0	f7 f9		 idiv	 ecx
  001c2	89 95 c0 fe ff
	ff		 mov	 DWORD PTR tv138[ebp], edx
  001c8	83 bd c0 fe ff
	ff 00		 cmp	 DWORD PTR tv138[ebp], 0
  001cf	74 0b		 je	 SHORT $LN18@SkyIslandD
  001d1	83 bd c0 fe ff
	ff 01		 cmp	 DWORD PTR tv138[ebp], 1
  001d8	74 19		 je	 SHORT $LN19@SkyIslandD
  001da	eb 2c		 jmp	 SHORT $LN2@SkyIslandD
$LN18@SkyIslandD:

; 476  : 					case 0:
; 477  : 						dx = rand() & 0x1f;

  001dc	8b f4		 mov	 esi, esp
  001de	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  001e4	3b f4		 cmp	 esi, esp
  001e6	e8 00 00 00 00	 call	 __RTC_CheckEsp
  001eb	83 e0 1f	 and	 eax, 31			; 0000001fH
  001ee	89 45 ac	 mov	 DWORD PTR _dx$4[ebp], eax

; 478  : 						break;

  001f1	eb 15		 jmp	 SHORT $LN2@SkyIslandD
$LN19@SkyIslandD:

; 479  : 					case 1:
; 480  : 						dy = rand() & 0x1f;

  001f3	8b f4		 mov	 esi, esp
  001f5	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  001fb	3b f4		 cmp	 esi, esp
  001fd	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00202	83 e0 1f	 and	 eax, 31			; 0000001fH
  00205	89 45 a0	 mov	 DWORD PTR _dy$3[ebp], eax
$LN2@SkyIslandD:

; 481  : 						break;
; 482  : 					default:
; 483  : 						break;
; 484  : 					}
; 485  : 					iCloudX2 = -CloudWidth2 + dx + 40;

  00208	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudWidth2@@3FA ; CloudWidth2
  0020f	f7 d8		 neg	 eax
  00211	8b 4d ac	 mov	 ecx, DWORD PTR _dx$4[ebp]
  00214	8d 54 08 28	 lea	 edx, DWORD PTR [eax+ecx+40]
  00218	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudX2@@3HA, edx ; iCloudX2

; 486  : 					iCloudY2 = -CloudHeight2 + dy + 30;

  0021e	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight2@@3FA ; CloudHeight2
  00225	f7 d8		 neg	 eax
  00227	8b 4d a0	 mov	 ecx, DWORD PTR _dy$3[ebp]
  0022a	8d 54 08 1e	 lea	 edx, DWORD PTR [eax+ecx+30]
  0022e	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudY2@@3HA, edx ; iCloudY2
$LN10@SkyIslandD:

; 487  : 				}
; 488  : 			}
; 489  : 			int x, y;
; 490  : 			x = iCloudX2;

  00234	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX2@@3HA ; iCloudX2
  00239	89 45 94	 mov	 DWORD PTR _x$2[ebp], eax

; 491  : 			y = iCloudY2;

  0023c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY2@@3HA ; iCloudY2
  00241	89 45 88	 mov	 DWORD PTR _y$1[ebp], eax

; 492  : 			SetRect( &rc, 0, 0, CloudWidth2, CloudHeight2);

  00244	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight2@@3FA ; CloudHeight2
  0024b	8b f4		 mov	 esi, esp
  0024d	50		 push	 eax
  0024e	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudWidth2@@3FA ; CloudWidth2
  00255	51		 push	 ecx
  00256	6a 00		 push	 0
  00258	6a 00		 push	 0
  0025a	8d 55 dc	 lea	 edx, DWORD PTR _rc$[ebp]
  0025d	52		 push	 edx
  0025e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetRect@20
  00264	3b f4		 cmp	 esi, esp
  00266	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 493  : 			if( x < 0){

  0026b	83 7d 94 00	 cmp	 DWORD PTR _x$2[ebp], 0
  0026f	7d 0f		 jge	 SHORT $LN21@SkyIslandD

; 494  : 				rc.left = -x;

  00271	8b 45 94	 mov	 eax, DWORD PTR _x$2[ebp]
  00274	f7 d8		 neg	 eax
  00276	89 45 dc	 mov	 DWORD PTR _rc$[ebp], eax

; 495  : 				x = 0;

  00279	c7 45 94 00 00
	00 00		 mov	 DWORD PTR _x$2[ebp], 0
$LN21@SkyIslandD:

; 496  : 			}
; 497  : 			if( (x+CloudWidth2) >= DEF_APPSIZEX){

  00280	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudWidth2@@3FA ; CloudWidth2
  00287	03 45 94	 add	 eax, DWORD PTR _x$2[ebp]
  0028a	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  00290	7c 0b		 jl	 SHORT $LN22@SkyIslandD

; 498  : 				rc.right = DEF_APPSIZEX - x;

  00292	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  00297	2b 45 94	 sub	 eax, DWORD PTR _x$2[ebp]
  0029a	89 45 e4	 mov	 DWORD PTR _rc$[ebp+8], eax
$LN22@SkyIslandD:

; 499  : 			}
; 500  : 			if( y < 0){

  0029d	83 7d 88 00	 cmp	 DWORD PTR _y$1[ebp], 0
  002a1	7d 0f		 jge	 SHORT $LN23@SkyIslandD

; 501  : 				rc.top = -y;

  002a3	8b 45 88	 mov	 eax, DWORD PTR _y$1[ebp]
  002a6	f7 d8		 neg	 eax
  002a8	89 45 e0	 mov	 DWORD PTR _rc$[ebp+4], eax

; 502  : 				y = 0;

  002ab	c7 45 88 00 00
	00 00		 mov	 DWORD PTR _y$1[ebp], 0
$LN23@SkyIslandD:

; 503  : 			}
; 504  : 			if( (y+CloudHeight2) >= DEF_APPSIZEY){

  002b2	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight2@@3FA ; CloudHeight2
  002b9	03 45 88	 add	 eax, DWORD PTR _y$1[ebp]
  002bc	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  002c2	7c 0b		 jl	 SHORT $LN24@SkyIslandD

; 505  : 				rc.bottom = DEF_APPSIZEY -y;

  002c4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  002c9	2b 45 88	 sub	 eax, DWORD PTR _y$1[ebp]
  002cc	89 45 e8	 mov	 DWORD PTR _rc$[ebp+12], eax
$LN24@SkyIslandD:

; 506  : 			}
; 507  : 			if( (rc.bottom-rc.top)>0 && (rc.right-rc.left)>0){

  002cf	8b 45 e8	 mov	 eax, DWORD PTR _rc$[ebp+12]
  002d2	2b 45 e0	 sub	 eax, DWORD PTR _rc$[ebp+4]
  002d5	85 c0		 test	 eax, eax
  002d7	7e 41		 jle	 SHORT $LN1@SkyIslandD
  002d9	8b 45 e4	 mov	 eax, DWORD PTR _rc$[ebp+8]
  002dc	2b 45 dc	 sub	 eax, DWORD PTR _rc$[ebp]
  002df	85 c0		 test	 eax, eax
  002e1	7e 37		 jle	 SHORT $LN1@SkyIslandD

; 508  : 				lpDraw->lpBACKBUFFER->BltFast( x, y, lpsurCloud2, &rc, DDBLTFAST_WAIT|DDBLTFAST_SRCCOLORKEY);

  002e3	8b f4		 mov	 esi, esp
  002e5	6a 11		 push	 17			; 00000011H
  002e7	8d 45 dc	 lea	 eax, DWORD PTR _rc$[ebp]
  002ea	50		 push	 eax
  002eb	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A ; lpsurCloud2
  002f1	51		 push	 ecx
  002f2	8b 55 88	 mov	 edx, DWORD PTR _y$1[ebp]
  002f5	52		 push	 edx
  002f6	8b 45 94	 mov	 eax, DWORD PTR _x$2[ebp]
  002f9	50		 push	 eax
  002fa	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00300	8b 51 0c	 mov	 edx, DWORD PTR [ecx+12]
  00303	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00308	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  0030b	8b 12		 mov	 edx, DWORD PTR [edx]
  0030d	51		 push	 ecx
  0030e	8b 42 1c	 mov	 eax, DWORD PTR [edx+28]
  00311	ff d0		 call	 eax
  00313	3b f4		 cmp	 esi, esp
  00315	e8 00 00 00 00	 call	 __RTC_CheckEsp
$LN1@SkyIslandD:

; 509  : #ifdef _READ16BITBMP
; 510  : 				if(g_bUseAlpha) lpDraw->lpBACKBUFFERSYS->BltFast( x, y, lpsurCloud2, &rc, DDBLTFAST_WAIT|DDBLTFAST_SRCCOLORKEY);
; 511  : #endif
; 512  : 			}
; 513  : 		}
; 514  : 	}
; 515  : }

  0031a	52		 push	 edx
  0031b	8b cd		 mov	 ecx, ebp
  0031d	50		 push	 eax
  0031e	8d 15 00 00 00
	00		 lea	 edx, DWORD PTR $LN32@SkyIslandD
  00324	e8 00 00 00 00	 call	 @_RTC_CheckStackVars@8
  00329	58		 pop	 eax
  0032a	5a		 pop	 edx
  0032b	5f		 pop	 edi
  0032c	5e		 pop	 esi
  0032d	5b		 pop	 ebx
  0032e	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00331	33 cd		 xor	 ecx, ebp
  00333	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00338	81 c4 40 01 00
	00		 add	 esp, 320		; 00000140H
  0033e	3b ec		 cmp	 ebp, esp
  00340	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00345	8b e5		 mov	 esp, ebp
  00347	5d		 pop	 ebp
  00348	c3		 ret	 0
  00349	0f 1f 00	 npad	 3
$LN32@SkyIslandD:
  0034c	04 00 00 00	 DD	 4
  00350	00 00 00 00	 DD	 $LN31@SkyIslandD
$LN31@SkyIslandD:
  00354	dc ff ff ff	 DD	 -36			; ffffffdcH
  00358	10 00 00 00	 DD	 16			; 00000010H
  0035c	00 00 00 00	 DD	 $LN27@SkyIslandD
  00360	d0 ff ff ff	 DD	 -48			; ffffffd0H
  00364	04 00 00 00	 DD	 4
  00368	00 00 00 00	 DD	 $LN28@SkyIslandD
  0036c	c4 ff ff ff	 DD	 -60			; ffffffc4H
  00370	02 00 00 00	 DD	 2
  00374	00 00 00 00	 DD	 $LN29@SkyIslandD
  00378	b8 ff ff ff	 DD	 -72			; ffffffb8H
  0037c	02 00 00 00	 DD	 2
  00380	00 00 00 00	 DD	 $LN30@SkyIslandD
$LN30@SkyIslandD:
  00384	68		 DB	 104			; 00000068H
  00385	00		 DB	 0
$LN29@SkyIslandD:
  00386	77		 DB	 119			; 00000077H
  00387	00		 DB	 0
$LN28@SkyIslandD:
  00388	6e		 DB	 110			; 0000006eH
  00389	6f		 DB	 111			; 0000006fH
  0038a	00		 DB	 0
$LN27@SkyIslandD:
  0038b	72		 DB	 114			; 00000072H
  0038c	63		 DB	 99			; 00000063H
  0038d	00		 DB	 0
?SkyIslandDraw2@@YAXH@Z ENDP				; SkyIslandDraw2
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandSetNo@@YAXH@Z
_TEXT	SEGMENT
tv64 = -220						; size = 4
_y$1 = -20						; size = 4
_x$2 = -8						; size = 4
_fl$ = 8						; size = 4
?SkyIslandSetNo@@YAXH@Z PROC				; SkyIslandSetNo, COMDAT

; 196  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec dc 00 00
	00		 sub	 esp, 220		; 000000dcH
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 24 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-220]
  00012	b9 37 00 00 00	 mov	 ecx, 55			; 00000037H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 197  : 	sky_island_no_bak = sky_island_no;

  0001e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?sky_island_no@@3KA ; sky_island_no
  00023	a3 00 00 00 00	 mov	 DWORD PTR ?sky_island_no_bak@@3KA, eax ; sky_island_no_bak

; 198  : 	sky_island_no = 0;

  00028	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no

; 199  : 
; 200  : #ifdef _MOON_FAIRYLAND				// (不可开) ROG ADD 月之仙境
; 201  : 	moonFlag =	FALSE;

  00032	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?moonFlag@@3HA, 0 ; moonFlag

; 202  : #endif
; 203  : #ifdef _NEW_CLOUD
; 204  : 	NCLOUD_Flag = FALSE;

  0003c	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?NCLOUD_Flag@@3HA, 0 ; NCLOUD_Flag

; 205  : #endif
; 206  : 	switch( fl){

  00046	8b 45 08	 mov	 eax, DWORD PTR _fl$[ebp]
  00049	89 85 24 ff ff
	ff		 mov	 DWORD PTR tv64[ebp], eax
  0004f	81 bd 24 ff ff
	ff e1 77 00 00	 cmp	 DWORD PTR tv64[ebp], 30689 ; 000077e1H
  00059	0f 8f a4 00 00
	00		 jg	 $LN19@SkyIslandS
  0005f	81 bd 24 ff ff
	ff e1 77 00 00	 cmp	 DWORD PTR tv64[ebp], 30689 ; 000077e1H
  00069	0f 84 3c 01 00
	00		 je	 $LN9@SkyIslandS
  0006f	81 bd 24 ff ff
	ff 3f 20 00 00	 cmp	 DWORD PTR tv64[ebp], 8255 ; 0000203fH
  00079	7f 63		 jg	 SHORT $LN20@SkyIslandS
  0007b	81 bd 24 ff ff
	ff 3f 20 00 00	 cmp	 DWORD PTR tv64[ebp], 8255 ; 0000203fH
  00085	0f 84 38 01 00
	00		 je	 $LN11@SkyIslandS
  0008b	81 bd 24 ff ff
	ff cd 15 00 00	 cmp	 DWORD PTR tv64[ebp], 5581 ; 000015cdH
  00095	7f 22		 jg	 SHORT $LN21@SkyIslandS
  00097	81 bd 24 ff ff
	ff cd 15 00 00	 cmp	 DWORD PTR tv64[ebp], 5581 ; 000015cdH
  000a1	0f 84 10 01 00
	00		 je	 $LN10@SkyIslandS
  000a7	83 bd 24 ff ff
	ff 68		 cmp	 DWORD PTR tv64[ebp], 104 ; 00000068H
  000ae	0f 84 5d 01 00
	00		 je	 $LN15@SkyIslandS
  000b4	e9 78 01 00 00	 jmp	 $LN2@SkyIslandS
$LN21@SkyIslandS:
  000b9	81 bd 24 ff ff
	ff 1a 1d 00 00	 cmp	 DWORD PTR tv64[ebp], 7450 ; 00001d1aH
  000c3	0f 8c 68 01 00
	00		 jl	 $LN2@SkyIslandS
  000c9	81 bd 24 ff ff
	ff 1b 1d 00 00	 cmp	 DWORD PTR tv64[ebp], 7451 ; 00001d1bH
  000d3	0f 8e 2c 01 00
	00		 jle	 $LN14@SkyIslandS
  000d9	e9 53 01 00 00	 jmp	 $LN2@SkyIslandS
$LN20@SkyIslandS:
  000de	81 bd 24 ff ff
	ff 40 20 00 00	 cmp	 DWORD PTR tv64[ebp], 8256 ; 00002040H
  000e8	0f 84 eb 00 00
	00		 je	 $LN12@SkyIslandS
  000ee	81 bd 24 ff ff
	ff 41 20 00 00	 cmp	 DWORD PTR tv64[ebp], 8257 ; 00002041H
  000f8	0f 84 f1 00 00
	00		 je	 $LN13@SkyIslandS
  000fe	e9 2e 01 00 00	 jmp	 $LN2@SkyIslandS
$LN19@SkyIslandS:
  00103	81 bd 24 ff ff
	ff 48 ee 00 00	 cmp	 DWORD PTR tv64[ebp], 61000 ; 0000ee48H
  0010d	7f 3c		 jg	 SHORT $LN22@SkyIslandS
  0010f	81 bd 24 ff ff
	ff 48 ee 00 00	 cmp	 DWORD PTR tv64[ebp], 61000 ; 0000ee48H
  00119	0f 84 fe 00 00
	00		 je	 $LN16@SkyIslandS
  0011f	8b 8d 24 ff ff
	ff		 mov	 ecx, DWORD PTR tv64[ebp]
  00125	81 e9 e3 77 00
	00		 sub	 ecx, 30691		; 000077e3H
  0012b	89 8d 24 ff ff
	ff		 mov	 DWORD PTR tv64[ebp], ecx
  00131	83 bd 24 ff ff
	ff 04		 cmp	 DWORD PTR tv64[ebp], 4
  00138	0f 87 f3 00 00
	00		 ja	 $LN2@SkyIslandS
  0013e	8b 95 24 ff ff
	ff		 mov	 edx, DWORD PTR tv64[ebp]
  00144	ff 24 95 00 00
	00 00		 jmp	 DWORD PTR $LN23@SkyIslandS[edx*4]
$LN22@SkyIslandS:
  0014b	81 bd 24 ff ff
	ff ac ee 00 00	 cmp	 DWORD PTR tv64[ebp], 61100 ; 0000eeacH
  00155	0f 84 c2 00 00
	00		 je	 $LN16@SkyIslandS
  0015b	e9 d1 00 00 00	 jmp	 $LN2@SkyIslandS
$LN4@SkyIslandS:

; 207  : //避免重复的loadmap动作
; 208  : 	case 30691:
; 209  : 		sky_island_no = (1<<16) | 40510;

  00160	c7 05 00 00 00
	00 3e 9e 01 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 106046 ; sky_island_no, 00019e3eH

; 210  : 		break;

  0016a	e9 c2 00 00 00	 jmp	 $LN2@SkyIslandS
$LN5@SkyIslandS:

; 211  : 	case 30692:
; 212  : 		sky_island_no = (2<<16) | 40510;

  0016f	c7 05 00 00 00
	00 3e 9e 02 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 171582 ; sky_island_no, 00029e3eH

; 213  : 		break;

  00179	e9 b3 00 00 00	 jmp	 $LN2@SkyIslandS
$LN6@SkyIslandS:

; 214  : 	case 30693:
; 215  : 		sky_island_no = (3<<16) | 40510;

  0017e	c7 05 00 00 00
	00 3e 9e 03 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 237118 ; sky_island_no, 00039e3eH

; 216  : 		break;

  00188	e9 a4 00 00 00	 jmp	 $LN2@SkyIslandS
$LN7@SkyIslandS:

; 217  : 	case 30694:
; 218  : 		sky_island_no = (4<<16) | 40510;

  0018d	c7 05 00 00 00
	00 3e 9e 04 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 302654 ; sky_island_no, 00049e3eH

; 219  : 		break;

  00197	e9 95 00 00 00	 jmp	 $LN2@SkyIslandS
$LN8@SkyIslandS:

; 220  : 	case 30695:
; 221  : 		sky_island_no = (5<<16) | 40510;

  0019c	c7 05 00 00 00
	00 3e 9e 05 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 368190 ; sky_island_no, 00059e3eH

; 222  : 		break;

  001a6	e9 86 00 00 00	 jmp	 $LN2@SkyIslandS
$LN9@SkyIslandS:

; 223  : 	case 30689:
; 224  : 		sky_island_no = (6<<16) | 40510;

  001ab	c7 05 00 00 00
	00 3e 9e 06 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 433726 ; sky_island_no, 00069e3eH

; 225  : 		break;

  001b5	eb 7a		 jmp	 SHORT $LN2@SkyIslandS
$LN10@SkyIslandS:

; 226  : 	case 5581://金飞航空
; 227  : 		sky_island_no = (1<<16) | 40511;

  001b7	c7 05 00 00 00
	00 3f 9e 01 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 106047 ; sky_island_no, 00019e3fH

; 228  : 		break;

  001c1	eb 6e		 jmp	 SHORT $LN2@SkyIslandS
$LN11@SkyIslandS:

; 229  : #ifdef _MOON_FAIRYLAND				// (不可开) ROG ADD 月之仙境
; 230  : 	case 8255:
; 231  : 		sky_island_no = (1<<16) | 40512;

  001c3	c7 05 00 00 00
	00 40 9e 01 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 106048 ; sky_island_no, 00019e40H

; 232  : 		moonFlag =	TRUE;

  001cd	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?moonFlag@@3HA, 1 ; moonFlag

; 233  : 		break;

  001d7	eb 58		 jmp	 SHORT $LN2@SkyIslandS
$LN12@SkyIslandS:

; 234  : 	case 8256:
; 235  : 		sky_island_no = (2<<16) | 40512;

  001d9	c7 05 00 00 00
	00 40 9e 02 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 171584 ; sky_island_no, 00029e40H

; 236  : 		moonFlag =	TRUE;

  001e3	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?moonFlag@@3HA, 1 ; moonFlag

; 237  : 		break;

  001ed	eb 42		 jmp	 SHORT $LN2@SkyIslandS
$LN13@SkyIslandS:

; 238  : 	case 8257:
; 239  : 		sky_island_no = (3<<16) | 40512;

  001ef	c7 05 00 00 00
	00 40 9e 03 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 237120 ; sky_island_no, 00039e40H

; 240  : 		moonFlag =	TRUE;

  001f9	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?moonFlag@@3HA, 1 ; moonFlag

; 241  : 		break;

  00203	eb 2c		 jmp	 SHORT $LN2@SkyIslandS
$LN14@SkyIslandS:

; 242  : #endif
; 243  : 
; 244  : #ifdef _LOST_FOREST_FOG
; 245  : 	case 7450:
; 246  : 	case 7451:
; 247  : 		sky_island_no = (1<<16);

  00205	c7 05 00 00 00
	00 00 00 01 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 65536 ; sky_island_no, 00010000H

; 248  : 		break;

  0020f	eb 20		 jmp	 SHORT $LN2@SkyIslandS
$LN15@SkyIslandS:

; 249  : #endif
; 250  : 	// 神台
; 251  : 	case 104:
; 252  : 		sky_island_no = (2<<16) | 40511;

  00211	c7 05 00 00 00
	00 3f 9e 02 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 171583 ; sky_island_no, 00029e3fH

; 253  : 		break;

  0021b	eb 14		 jmp	 SHORT $LN2@SkyIslandS
$LN16@SkyIslandS:

; 254  : #ifdef _NEW_CLOUD
; 255  : 	case 61000:
; 256  : 	case 61100:
; 257  : 		sky_island_no = (1<<16);

  0021d	c7 05 00 00 00
	00 00 00 01 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 65536 ; sky_island_no, 00010000H

; 258  : 		NCLOUD_Flag = TRUE;

  00227	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?NCLOUD_Flag@@3HA, 1 ; NCLOUD_Flag
$LN2@SkyIslandS:

; 259  : 		break;
; 260  : #endif
; 261  : 	}
; 262  : 	if( sky_island_no_bak != sky_island_no){

  00231	a1 00 00 00 00	 mov	 eax, DWORD PTR ?sky_island_no_bak@@3KA ; sky_island_no_bak
  00236	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?sky_island_no@@3KA ; sky_island_no
  0023c	0f 84 87 00 00
	00		 je	 $LN1@SkyIslandS

; 263  : 		SkyIslandLoadBmp();

  00242	e8 00 00 00 00	 call	 ?SkyIslandLoadBmp@@YAXXZ ; SkyIslandLoadBmp

; 264  : 		int x,y;
; 265  : 		
; 266  : 		x = ((nowGx + nowGy) * (SURFACE_WIDTH >> 1));

  00247	a1 00 00 00 00	 mov	 eax, DWORD PTR ?nowGx@@3HA ; nowGx
  0024c	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?nowGy@@3HA ; nowGy
  00252	c1 e0 05	 shl	 eax, 5
  00255	89 45 f8	 mov	 DWORD PTR _x$2[ebp], eax

; 267  : 		y = ((nowFloorGySize + nowGy - nowGx) * (SURFACE_HEIGHT >> 1));

  00258	a1 00 00 00 00	 mov	 eax, DWORD PTR ?nowFloorGySize@@3HA ; nowFloorGySize
  0025d	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?nowGy@@3HA ; nowGy
  00263	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?nowGx@@3HA ; nowGx
  00269	6b c8 18	 imul	 ecx, eax, 24
  0026c	89 4d ec	 mov	 DWORD PTR _y$1[ebp], ecx

; 268  : 		g_rc.left = ((LandWidth-DEF_APPSIZEX)*x/fMapWidth);

  0026f	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandWidth@@3FA ; LandWidth
  00276	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  0027c	0f af 45 f8	 imul	 eax, DWORD PTR _x$2[ebp]
  00280	99		 cdq
  00281	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?fMapWidth@@3HA ; fMapWidth
  00287	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax

; 269  : 		g_rc.top = ((LandHeight-DEF_APPSIZEY)*y/fMapHeight);

  0028c	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandHeight@@3FA ; LandHeight
  00293	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  00299	0f af 45 ec	 imul	 eax, DWORD PTR _y$1[ebp]
  0029d	99		 cdq
  0029e	f7 3d 00 00 00
	00		 idiv	 DWORD PTR ?fMapHeight@@3HA ; fMapHeight
  002a4	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax

; 270  : 		g_rc.right = g_rc.left + DEF_APPSIZEX;

  002a9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  002ae	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  002b4	a3 08 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+8, eax

; 271  : 		g_rc.bottom = g_rc.top + DEF_APPSIZEY;

  002b9	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  002be	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  002c4	a3 0c 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+12, eax
$LN1@SkyIslandS:

; 272  : 	}
; 273  : }

  002c9	5f		 pop	 edi
  002ca	5e		 pop	 esi
  002cb	5b		 pop	 ebx
  002cc	81 c4 dc 00 00
	00		 add	 esp, 220		; 000000dcH
  002d2	3b ec		 cmp	 ebp, esp
  002d4	e8 00 00 00 00	 call	 __RTC_CheckEsp
  002d9	8b e5		 mov	 esp, ebp
  002db	5d		 pop	 ebp
  002dc	c3		 ret	 0
  002dd	0f 1f 00	 npad	 3
$LN23@SkyIslandS:
  002e0	00 00 00 00	 DD	 $LN4@SkyIslandS
  002e4	00 00 00 00	 DD	 $LN5@SkyIslandS
  002e8	00 00 00 00	 DD	 $LN6@SkyIslandS
  002ec	00 00 00 00	 DD	 $LN7@SkyIslandS
  002f0	00 00 00 00	 DD	 $LN8@SkyIslandS
?SkyIslandSetNo@@YAXH@Z ENDP				; SkyIslandSetNo
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandLoadBmp@@YAXXZ
_TEXT	SEGMENT
_no$1 = -68						; size = 4
_h$2 = -56						; size = 2
_w$3 = -44						; size = 2
_no$4 = -32						; size = 4
_h$5 = -20						; size = 2
_w$6 = -8						; size = 2
?SkyIslandLoadBmp@@YAXXZ PROC				; SkyIslandLoadBmp, COMDAT

; 132  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 08 01 00
	00		 sub	 esp, 264		; 00000108H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd f8 fe ff
	ff		 lea	 edi, DWORD PTR [ebp-264]
  00012	b9 42 00 00 00	 mov	 ecx, 66			; 00000042H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 133  : 	if( sky_island_no){

  0001e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no
  00025	0f 84 41 03 00
	00		 je	 $LN1@SkyIslandL

; 134  : 		short w, h;
; 135  : 		DWORD no;
; 136  : 		realGetNo( sky_island_no & 0xffff, &no );

  0002b	8d 45 e0	 lea	 eax, DWORD PTR _no$4[ebp]
  0002e	50		 push	 eax
  0002f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?sky_island_no@@3KA ; sky_island_no
  00035	81 e1 ff ff 00
	00		 and	 ecx, 65535		; 0000ffffH
  0003b	51		 push	 ecx
  0003c	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00041	83 c4 08	 add	 esp, 8

; 137  : 		realGetWH( no, &w, &h);

  00044	8d 45 ec	 lea	 eax, DWORD PTR _h$5[ebp]
  00047	50		 push	 eax
  00048	8d 4d f8	 lea	 ecx, DWORD PTR _w$6[ebp]
  0004b	51		 push	 ecx
  0004c	8b 55 e0	 mov	 edx, DWORD PTR _no$4[ebp]
  0004f	52		 push	 edx
  00050	e8 00 00 00 00	 call	 ?realGetWH@@YAHKPAF0@Z	; realGetWH
  00055	83 c4 0c	 add	 esp, 12			; 0000000cH

; 138  : 		if( w != LandWidth || h != LandHeight){

  00058	0f bf 45 f8	 movsx	 eax, WORD PTR _w$6[ebp]
  0005c	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?LandWidth@@3FA ; LandWidth
  00063	3b c1		 cmp	 eax, ecx
  00065	75 13		 jne	 SHORT $LN4@SkyIslandL
  00067	0f bf 45 ec	 movsx	 eax, WORD PTR _h$5[ebp]
  0006b	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?LandHeight@@3FA ; LandHeight
  00072	3b c1		 cmp	 eax, ecx
  00074	0f 84 8c 00 00
	00		 je	 $LN3@SkyIslandL
$LN4@SkyIslandL:

; 139  : 			fMapWidth = ((nowFloorGxSize + nowFloorGySize) * SURFACE_WIDTH) >> 1; // fMapWidth = (nowFloorGxSize+nowFloorGySize)*SURFACE_WIDTH/2;

  0007a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?nowFloorGxSize@@3HA ; nowFloorGxSize
  0007f	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?nowFloorGySize@@3HA ; nowFloorGySize
  00085	c1 e0 06	 shl	 eax, 6
  00088	d1 f8		 sar	 eax, 1
  0008a	a3 00 00 00 00	 mov	 DWORD PTR ?fMapWidth@@3HA, eax ; fMapWidth

; 140  : 			fMapHeight = ((nowFloorGxSize + nowFloorGySize) * SURFACE_HEIGHT) >> 1; //fMapWidth = (nowFloorGxSize+nowFloorGySize)*SURFACE_WIDTH/2;

  0008f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?nowFloorGxSize@@3HA ; nowFloorGxSize
  00094	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?nowFloorGySize@@3HA ; nowFloorGySize
  0009a	6b c8 30	 imul	 ecx, eax, 48
  0009d	d1 f9		 sar	 ecx, 1
  0009f	89 0d 00 00 00
	00		 mov	 DWORD PTR ?fMapHeight@@3HA, ecx ; fMapHeight

; 141  : 			LandWidth = w;

  000a5	66 8b 45 f8	 mov	 ax, WORD PTR _w$6[ebp]
  000a9	66 a3 00 00 00
	00		 mov	 WORD PTR ?LandWidth@@3FA, ax ; LandWidth

; 142  : 			LandHeight = h;

  000af	66 8b 45 ec	 mov	 ax, WORD PTR _h$5[ebp]
  000b3	66 a3 00 00 00
	00		 mov	 WORD PTR ?LandHeight@@3FA, ax ; LandHeight

; 143  : 			if( lpsurLand){

  000b9	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
  000c0	74 26		 je	 SHORT $LN5@SkyIslandL

; 144  : 				lpsurLand->Release();

  000c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  000c7	8b 08		 mov	 ecx, DWORD PTR [eax]
  000c9	8b f4		 mov	 esi, esp
  000cb	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  000d1	52		 push	 edx
  000d2	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]
  000d5	ff d0		 call	 eax
  000d7	3b f4		 cmp	 esi, esp
  000d9	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 145  : 				lpsurLand = NULL;

  000de	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
$LN5@SkyIslandL:

; 146  : 			}
; 147  : 			lpsurLand = CreateSurface( w, h, 0, DDSCAPS_SYSTEMMEMORY);

  000e8	68 00 08 00 00	 push	 2048			; 00000800H
  000ed	6a 00		 push	 0
  000ef	0f b7 45 ec	 movzx	 eax, WORD PTR _h$5[ebp]
  000f3	50		 push	 eax
  000f4	0f b7 4d f8	 movzx	 ecx, WORD PTR _w$6[ebp]
  000f8	51		 push	 ecx
  000f9	e8 00 00 00 00	 call	 ?CreateSurface@@YAPAUIDirectDrawSurface@@FFKI@Z ; CreateSurface
  000fe	83 c4 10	 add	 esp, 16			; 00000010H
  00101	a3 00 00 00 00	 mov	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, eax ; lpsurLand
$LN3@SkyIslandL:

; 148  : 		}
; 149  : 		if( lpsurLand){

  00106	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
  0010d	0f 84 59 02 00
	00		 je	 $LN1@SkyIslandL

; 150  : 			LoadBmpToSurface( no, lpsurLand, w, h);

  00113	0f bf 45 ec	 movsx	 eax, WORD PTR _h$5[ebp]
  00117	50		 push	 eax
  00118	0f bf 4d f8	 movsx	 ecx, WORD PTR _w$6[ebp]
  0011c	51		 push	 ecx
  0011d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  00123	52		 push	 edx
  00124	8b 45 e0	 mov	 eax, DWORD PTR _no$4[ebp]
  00127	50		 push	 eax
  00128	e8 00 00 00 00	 call	 ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
  0012d	83 c4 10	 add	 esp, 16			; 00000010H

; 151  : 			if( !lpsurCloud1){

  00130	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
  00137	0f 85 11 01 00
	00		 jne	 $LN7@SkyIslandL

; 152  : #ifdef _NEW_CLOUD
; 153  : 				if( NCLOUD_Flag == TRUE )

  0013d	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?NCLOUD_Flag@@3HA, 1 ; NCLOUD_Flag
  00144	75 2f		 jne	 SHORT $LN8@SkyIslandL

; 154  : 					realGetNo( 29077+(rand()%2), &no);

  00146	8d 45 e0	 lea	 eax, DWORD PTR _no$4[ebp]
  00149	50		 push	 eax
  0014a	8b f4		 mov	 esi, esp
  0014c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00152	3b f4		 cmp	 esi, esp
  00154	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00159	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0015e	79 05		 jns	 SHORT $LN24@SkyIslandL
  00160	48		 dec	 eax
  00161	83 c8 fe	 or	 eax, -2			; fffffffeH
  00164	40		 inc	 eax
$LN24@SkyIslandL:
  00165	05 95 71 00 00	 add	 eax, 29077		; 00007195H
  0016a	50		 push	 eax
  0016b	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00170	83 c4 08	 add	 esp, 8

; 155  : 				else

  00173	eb 24		 jmp	 SHORT $LN9@SkyIslandL
$LN8@SkyIslandL:

; 156  : 					realGetNo( 40500+(rand()&0x3), &no);

  00175	8d 45 e0	 lea	 eax, DWORD PTR _no$4[ebp]
  00178	50		 push	 eax
  00179	8b f4		 mov	 esi, esp
  0017b	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00181	3b f4		 cmp	 esi, esp
  00183	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00188	83 e0 03	 and	 eax, 3
  0018b	05 34 9e 00 00	 add	 eax, 40500		; 00009e34H
  00190	50		 push	 eax
  00191	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00196	83 c4 08	 add	 esp, 8
$LN9@SkyIslandL:

; 157  : #else
; 158  : 				realGetNo( 40500+(rand()&0x3), &no);
; 159  : #endif
; 160  : 				realGetWH( no, &w, &h);

  00199	8d 45 ec	 lea	 eax, DWORD PTR _h$5[ebp]
  0019c	50		 push	 eax
  0019d	8d 4d f8	 lea	 ecx, DWORD PTR _w$6[ebp]
  001a0	51		 push	 ecx
  001a1	8b 55 e0	 mov	 edx, DWORD PTR _no$4[ebp]
  001a4	52		 push	 edx
  001a5	e8 00 00 00 00	 call	 ?realGetWH@@YAHKPAF0@Z	; realGetWH
  001aa	83 c4 0c	 add	 esp, 12			; 0000000cH

; 161  : 				CloudWidth1 = w;

  001ad	66 8b 45 f8	 mov	 ax, WORD PTR _w$6[ebp]
  001b1	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth1@@3FA, ax ; CloudWidth1

; 162  : 				CloudHeight1 = h;

  001b7	66 8b 45 ec	 mov	 ax, WORD PTR _h$5[ebp]
  001bb	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight1@@3FA, ax ; CloudHeight1

; 163  : 				iCloudX1 = rand() % w;

  001c1	8b f4		 mov	 esi, esp
  001c3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  001c9	3b f4		 cmp	 esi, esp
  001cb	e8 00 00 00 00	 call	 __RTC_CheckEsp
  001d0	0f bf 4d f8	 movsx	 ecx, WORD PTR _w$6[ebp]
  001d4	99		 cdq
  001d5	f7 f9		 idiv	 ecx
  001d7	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudX1@@3HA, edx ; iCloudX1

; 164  : 				iCloudY1 = rand() % h;

  001dd	8b f4		 mov	 esi, esp
  001df	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  001e5	3b f4		 cmp	 esi, esp
  001e7	e8 00 00 00 00	 call	 __RTC_CheckEsp
  001ec	0f bf 4d ec	 movsx	 ecx, WORD PTR _h$5[ebp]
  001f0	99		 cdq
  001f1	f7 f9		 idiv	 ecx
  001f3	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudY1@@3HA, edx ; iCloudY1

; 165  : 
; 166  : 				if( lpsurCloud1 = CreateSurface(lpDraw->xSize, lpDraw->ySize, 0, DDSCAPS_SYSTEMMEMORY) ){

  001f9	68 00 08 00 00	 push	 2048			; 00000800H
  001fe	6a 00		 push	 0
  00200	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00205	0f b7 88 88 00
	00 00		 movzx	 ecx, WORD PTR [eax+136]
  0020c	51		 push	 ecx
  0020d	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00213	0f b7 82 84 00
	00 00		 movzx	 eax, WORD PTR [edx+132]
  0021a	50		 push	 eax
  0021b	e8 00 00 00 00	 call	 ?CreateSurface@@YAPAUIDirectDrawSurface@@FFKI@Z ; CreateSurface
  00220	83 c4 10	 add	 esp, 16			; 00000010H
  00223	a3 00 00 00 00	 mov	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, eax ; lpsurCloud1
  00228	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
  0022f	74 1d		 je	 SHORT $LN7@SkyIslandL

; 167  : 					LoadBmpToSurface( no, lpsurCloud1, w, h);

  00231	0f bf 45 ec	 movsx	 eax, WORD PTR _h$5[ebp]
  00235	50		 push	 eax
  00236	0f bf 4d f8	 movsx	 ecx, WORD PTR _w$6[ebp]
  0023a	51		 push	 ecx
  0023b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  00241	52		 push	 edx
  00242	8b 45 e0	 mov	 eax, DWORD PTR _no$4[ebp]
  00245	50		 push	 eax
  00246	e8 00 00 00 00	 call	 ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
  0024b	83 c4 10	 add	 esp, 16			; 00000010H
$LN7@SkyIslandL:

; 168  : 				}
; 169  : 			}
; 170  : 			if( !lpsurCloud2){

  0024e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud2
  00255	0f 85 11 01 00
	00		 jne	 $LN1@SkyIslandL

; 171  : 				short w, h;
; 172  : 				DWORD no;
; 173  : #ifdef _NEW_CLOUD
; 174  : 				if( NCLOUD_Flag == TRUE )

  0025b	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?NCLOUD_Flag@@3HA, 1 ; NCLOUD_Flag
  00262	75 2f		 jne	 SHORT $LN12@SkyIslandL

; 175  : 					realGetNo( 29077+(rand()%2), &no);

  00264	8d 45 bc	 lea	 eax, DWORD PTR _no$1[ebp]
  00267	50		 push	 eax
  00268	8b f4		 mov	 esi, esp
  0026a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00270	3b f4		 cmp	 esi, esp
  00272	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00277	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  0027c	79 05		 jns	 SHORT $LN25@SkyIslandL
  0027e	48		 dec	 eax
  0027f	83 c8 fe	 or	 eax, -2			; fffffffeH
  00282	40		 inc	 eax
$LN25@SkyIslandL:
  00283	05 95 71 00 00	 add	 eax, 29077		; 00007195H
  00288	50		 push	 eax
  00289	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  0028e	83 c4 08	 add	 esp, 8

; 176  : 				else

  00291	eb 24		 jmp	 SHORT $LN13@SkyIslandL
$LN12@SkyIslandL:

; 177  : 					realGetNo( 40500+(rand()&0x3), &no);

  00293	8d 45 bc	 lea	 eax, DWORD PTR _no$1[ebp]
  00296	50		 push	 eax
  00297	8b f4		 mov	 esi, esp
  00299	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  0029f	3b f4		 cmp	 esi, esp
  002a1	e8 00 00 00 00	 call	 __RTC_CheckEsp
  002a6	83 e0 03	 and	 eax, 3
  002a9	05 34 9e 00 00	 add	 eax, 40500		; 00009e34H
  002ae	50		 push	 eax
  002af	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  002b4	83 c4 08	 add	 esp, 8
$LN13@SkyIslandL:

; 178  : #else
; 179  : 				realGetNo( 40500+(rand()&0x3), &no);
; 180  : #endif
; 181  : 				realGetWH( no, &w, &h);

  002b7	8d 45 c8	 lea	 eax, DWORD PTR _h$2[ebp]
  002ba	50		 push	 eax
  002bb	8d 4d d4	 lea	 ecx, DWORD PTR _w$3[ebp]
  002be	51		 push	 ecx
  002bf	8b 55 bc	 mov	 edx, DWORD PTR _no$1[ebp]
  002c2	52		 push	 edx
  002c3	e8 00 00 00 00	 call	 ?realGetWH@@YAHKPAF0@Z	; realGetWH
  002c8	83 c4 0c	 add	 esp, 12			; 0000000cH

; 182  : 				CloudWidth2 = w;

  002cb	66 8b 45 d4	 mov	 ax, WORD PTR _w$3[ebp]
  002cf	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth2@@3FA, ax ; CloudWidth2

; 183  : 				CloudHeight2 = h;

  002d5	66 8b 45 c8	 mov	 ax, WORD PTR _h$2[ebp]
  002d9	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight2@@3FA, ax ; CloudHeight2

; 184  : 				iCloudX2 = rand() % w;

  002df	8b f4		 mov	 esi, esp
  002e1	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  002e7	3b f4		 cmp	 esi, esp
  002e9	e8 00 00 00 00	 call	 __RTC_CheckEsp
  002ee	0f bf 4d d4	 movsx	 ecx, WORD PTR _w$3[ebp]
  002f2	99		 cdq
  002f3	f7 f9		 idiv	 ecx
  002f5	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudX2@@3HA, edx ; iCloudX2

; 185  : 				iCloudY2 = rand() % h;

  002fb	8b f4		 mov	 esi, esp
  002fd	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00303	3b f4		 cmp	 esi, esp
  00305	e8 00 00 00 00	 call	 __RTC_CheckEsp
  0030a	0f bf 4d c8	 movsx	 ecx, WORD PTR _h$2[ebp]
  0030e	99		 cdq
  0030f	f7 f9		 idiv	 ecx
  00311	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudY2@@3HA, edx ; iCloudY2

; 186  : 				if( lpsurCloud2 = CreateSurface(lpDraw->xSize, lpDraw->ySize, 0, DDSCAPS_SYSTEMMEMORY) ){

  00317	68 00 08 00 00	 push	 2048			; 00000800H
  0031c	6a 00		 push	 0
  0031e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00323	0f b7 88 88 00
	00 00		 movzx	 ecx, WORD PTR [eax+136]
  0032a	51		 push	 ecx
  0032b	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00331	0f b7 82 84 00
	00 00		 movzx	 eax, WORD PTR [edx+132]
  00338	50		 push	 eax
  00339	e8 00 00 00 00	 call	 ?CreateSurface@@YAPAUIDirectDrawSurface@@FFKI@Z ; CreateSurface
  0033e	83 c4 10	 add	 esp, 16			; 00000010H
  00341	a3 00 00 00 00	 mov	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, eax ; lpsurCloud2
  00346	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud2
  0034d	74 1d		 je	 SHORT $LN1@SkyIslandL

; 187  : 					LoadBmpToSurface( no, lpsurCloud2, w, h);

  0034f	0f bf 45 c8	 movsx	 eax, WORD PTR _h$2[ebp]
  00353	50		 push	 eax
  00354	0f bf 4d d4	 movsx	 ecx, WORD PTR _w$3[ebp]
  00358	51		 push	 ecx
  00359	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A ; lpsurCloud2
  0035f	52		 push	 edx
  00360	8b 45 bc	 mov	 eax, DWORD PTR _no$1[ebp]
  00363	50		 push	 eax
  00364	e8 00 00 00 00	 call	 ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
  00369	83 c4 10	 add	 esp, 16			; 00000010H
$LN1@SkyIslandL:

; 188  : 				}
; 189  : 			}			
; 190  : 		}
; 191  : 
; 192  : 	}
; 193  : }

  0036c	52		 push	 edx
  0036d	8b cd		 mov	 ecx, ebp
  0036f	50		 push	 eax
  00370	8d 15 00 00 00
	00		 lea	 edx, DWORD PTR $LN23@SkyIslandL
  00376	e8 00 00 00 00	 call	 @_RTC_CheckStackVars@8
  0037b	58		 pop	 eax
  0037c	5a		 pop	 edx
  0037d	5f		 pop	 edi
  0037e	5e		 pop	 esi
  0037f	5b		 pop	 ebx
  00380	81 c4 08 01 00
	00		 add	 esp, 264		; 00000108H
  00386	3b ec		 cmp	 ebp, esp
  00388	e8 00 00 00 00	 call	 __RTC_CheckEsp
  0038d	8b e5		 mov	 esp, ebp
  0038f	5d		 pop	 ebp
  00390	c3		 ret	 0
  00391	0f 1f 00	 npad	 3
$LN23@SkyIslandL:
  00394	06 00 00 00	 DD	 6
  00398	00 00 00 00	 DD	 $LN22@SkyIslandL
$LN22@SkyIslandL:
  0039c	f8 ff ff ff	 DD	 -8			; fffffff8H
  003a0	02 00 00 00	 DD	 2
  003a4	00 00 00 00	 DD	 $LN16@SkyIslandL
  003a8	ec ff ff ff	 DD	 -20			; ffffffecH
  003ac	02 00 00 00	 DD	 2
  003b0	00 00 00 00	 DD	 $LN17@SkyIslandL
  003b4	e0 ff ff ff	 DD	 -32			; ffffffe0H
  003b8	04 00 00 00	 DD	 4
  003bc	00 00 00 00	 DD	 $LN18@SkyIslandL
  003c0	d4 ff ff ff	 DD	 -44			; ffffffd4H
  003c4	02 00 00 00	 DD	 2
  003c8	00 00 00 00	 DD	 $LN19@SkyIslandL
  003cc	c8 ff ff ff	 DD	 -56			; ffffffc8H
  003d0	02 00 00 00	 DD	 2
  003d4	00 00 00 00	 DD	 $LN20@SkyIslandL
  003d8	bc ff ff ff	 DD	 -68			; ffffffbcH
  003dc	04 00 00 00	 DD	 4
  003e0	00 00 00 00	 DD	 $LN21@SkyIslandL
$LN21@SkyIslandL:
  003e4	6e		 DB	 110			; 0000006eH
  003e5	6f		 DB	 111			; 0000006fH
  003e6	00		 DB	 0
$LN20@SkyIslandL:
  003e7	68		 DB	 104			; 00000068H
  003e8	00		 DB	 0
$LN19@SkyIslandL:
  003e9	77		 DB	 119			; 00000077H
  003ea	00		 DB	 0
$LN18@SkyIslandL:
  003eb	6e		 DB	 110			; 0000006eH
  003ec	6f		 DB	 111			; 0000006fH
  003ed	00		 DB	 0
$LN17@SkyIslandL:
  003ee	68		 DB	 104			; 00000068H
  003ef	00		 DB	 0
$LN16@SkyIslandL:
  003f0	77		 DB	 119			; 00000077H
  003f1	00		 DB	 0
?SkyIslandLoadBmp@@YAXXZ ENDP				; SkyIslandLoadBmp
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandRelease@@YAXXZ
_TEXT	SEGMENT
?SkyIslandRelease@@YAXXZ PROC				; SkyIslandRelease, COMDAT

; 113  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec c0 00 00
	00		 sub	 esp, 192		; 000000c0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 40 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-192]
  00012	b9 30 00 00 00	 mov	 ecx, 48			; 00000030H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 114  : 	LandWidth = 0;

  0001e	33 c0		 xor	 eax, eax
  00020	66 a3 00 00 00
	00		 mov	 WORD PTR ?LandWidth@@3FA, ax ; LandWidth

; 115  : 	CloudWidth1 = 0;

  00026	33 c0		 xor	 eax, eax
  00028	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth1@@3FA, ax ; CloudWidth1

; 116  : 	CloudWidth2 = 0;

  0002e	33 c0		 xor	 eax, eax
  00030	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth2@@3FA, ax ; CloudWidth2

; 117  : 	if( lpsurLand){

  00036	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
  0003d	74 26		 je	 SHORT $LN2@SkyIslandR

; 118  : 		lpsurLand->Release();

  0003f	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  00044	8b 08		 mov	 ecx, DWORD PTR [eax]
  00046	8b f4		 mov	 esi, esp
  00048	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  0004e	52		 push	 edx
  0004f	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]
  00052	ff d0		 call	 eax
  00054	3b f4		 cmp	 esi, esp
  00056	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 119  : 		lpsurLand = NULL;

  0005b	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
$LN2@SkyIslandR:

; 120  : 	}
; 121  : 	if( lpsurCloud1){

  00065	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
  0006c	74 26		 je	 SHORT $LN3@SkyIslandR

; 122  : 		lpsurCloud1->Release();

  0006e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  00073	8b 08		 mov	 ecx, DWORD PTR [eax]
  00075	8b f4		 mov	 esi, esp
  00077	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  0007d	52		 push	 edx
  0007e	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]
  00081	ff d0		 call	 eax
  00083	3b f4		 cmp	 esi, esp
  00085	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 123  : 		lpsurCloud1 = NULL;

  0008a	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
$LN3@SkyIslandR:

; 124  : 	}
; 125  : 	if( lpsurCloud2){

  00094	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud2
  0009b	74 26		 je	 SHORT $LN1@SkyIslandR

; 126  : 		lpsurCloud2->Release();

  0009d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A ; lpsurCloud2
  000a2	8b 08		 mov	 ecx, DWORD PTR [eax]
  000a4	8b f4		 mov	 esi, esp
  000a6	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A ; lpsurCloud2
  000ac	52		 push	 edx
  000ad	8b 41 08	 mov	 eax, DWORD PTR [ecx+8]
  000b0	ff d0		 call	 eax
  000b2	3b f4		 cmp	 esi, esp
  000b4	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 127  : 		lpsurCloud2 = NULL;

  000b9	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?lpsurCloud2@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud2
$LN1@SkyIslandR:

; 128  : 	}
; 129  : }

  000c3	5f		 pop	 edi
  000c4	5e		 pop	 esi
  000c5	5b		 pop	 ebx
  000c6	81 c4 c0 00 00
	00		 add	 esp, 192		; 000000c0H
  000cc	3b ec		 cmp	 ebp, esp
  000ce	e8 00 00 00 00	 call	 __RTC_CheckEsp
  000d3	8b e5		 mov	 esp, ebp
  000d5	5d		 pop	 ebp
  000d6	c3		 ret	 0
?SkyIslandRelease@@YAXXZ ENDP				; SkyIslandRelease
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandInit@@YAXXZ
_TEXT	SEGMENT
?SkyIslandInit@@YAXXZ PROC				; SkyIslandInit, COMDAT

; 100  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec c0 00 00
	00		 sub	 esp, 192		; 000000c0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 40 ff ff
	ff		 lea	 edi, DWORD PTR [ebp-192]
  00012	b9 30 00 00 00	 mov	 ecx, 48			; 00000030H
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd

; 101  : 	sky_island_no = 0;

  0001e	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no

; 102  : 	sky_island_no_bak = 0;

  00028	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?sky_island_no_bak@@3KA, 0 ; sky_island_no_bak

; 103  : 	LandWidth = 0;

  00032	33 c0		 xor	 eax, eax
  00034	66 a3 00 00 00
	00		 mov	 WORD PTR ?LandWidth@@3FA, ax ; LandWidth

; 104  : 	LandHeight = 0;

  0003a	33 c0		 xor	 eax, eax
  0003c	66 a3 00 00 00
	00		 mov	 WORD PTR ?LandHeight@@3FA, ax ; LandHeight

; 105  : 	CloudWidth1 = CloudHeight1 = 0;

  00042	33 c0		 xor	 eax, eax
  00044	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight1@@3FA, ax ; CloudHeight1
  0004a	66 8b 0d 00 00
	00 00		 mov	 cx, WORD PTR ?CloudHeight1@@3FA ; CloudHeight1
  00051	66 89 0d 00 00
	00 00		 mov	 WORD PTR ?CloudWidth1@@3FA, cx ; CloudWidth1

; 106  : 	CloudWidth2 = CloudHeight2 = 0;

  00058	33 c0		 xor	 eax, eax
  0005a	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight2@@3FA, ax ; CloudHeight2
  00060	66 8b 0d 00 00
	00 00		 mov	 cx, WORD PTR ?CloudHeight2@@3FA ; CloudHeight2
  00067	66 89 0d 00 00
	00 00		 mov	 WORD PTR ?CloudWidth2@@3FA, cx ; CloudWidth2

; 107  : 	iCloudX1 = iCloudY1 = 0;

  0006e	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?iCloudY1@@3HA, 0 ; iCloudY1
  00078	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY1@@3HA ; iCloudY1
  0007d	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudX1@@3HA, eax ; iCloudX1

; 108  : 	iCloudX2 = iCloudY2 = 0;

  00082	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?iCloudY2@@3HA, 0 ; iCloudY2
  0008c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY2@@3HA ; iCloudY2
  00091	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudX2@@3HA, eax ; iCloudX2

; 109  : 	iCloudDX = iCloudDY = 0;

  00096	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?iCloudDY@@3HA, 0 ; iCloudDY
  000a0	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudDY@@3HA ; iCloudDY
  000a5	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudDX@@3HA, eax ; iCloudDX

; 110  : }

  000aa	5f		 pop	 edi
  000ab	5e		 pop	 esi
  000ac	5b		 pop	 ebx
  000ad	8b e5		 mov	 esp, ebp
  000af	5d		 pop	 ebp
  000b0	c3		 ret	 0
?SkyIslandInit@@YAXXZ ENDP				; SkyIslandInit
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z
_TEXT	SEGMENT
_i$1 = -236						; size = 2
_surface$2 = -224					; size = 4
_j$3 = -212						; size = 2
_i$4 = -200						; size = 2
_pixel$5 = -188						; size = 2
_surface$6 = -176					; size = 4
_j$7 = -164						; size = 4
_i$8 = -152						; size = 4
_pixel$9 = -140						; size = 4
_surface$10 = -128					; size = 4
_ddsd$ = -116						; size = 108
__$ArrayPad$ = -4					; size = 4
_noFrom$ = 8						; size = 4
_lpsurTo$ = 12						; size = 4
_w$ = 16						; size = 4
_h$ = 20						; size = 4
?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z PROC	; LoadBmpToSurface, COMDAT

; 42   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b0 01 00
	00		 sub	 esp, 432		; 000001b0H
  00009	53		 push	 ebx
  0000a	56		 push	 esi
  0000b	57		 push	 edi
  0000c	8d bd 50 fe ff
	ff		 lea	 edi, DWORD PTR [ebp-432]
  00012	b9 6c 00 00 00	 mov	 ecx, 108		; 0000006cH
  00017	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0001c	f3 ab		 rep stosd
  0001e	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00023	33 c5		 xor	 eax, ebp
  00025	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 43   : 	DDSURFACEDESC ddsd;
; 44   : 	ZeroMemory( &ddsd, sizeof(DDSURFACEDESC) );

  00028	6a 6c		 push	 108			; 0000006cH
  0002a	6a 00		 push	 0
  0002c	8d 45 8c	 lea	 eax, DWORD PTR _ddsd$[ebp]
  0002f	50		 push	 eax
  00030	e8 00 00 00 00	 call	 _memset
  00035	83 c4 0c	 add	 esp, 12			; 0000000cH

; 45   : 	ddsd.dwSize = sizeof(DDSURFACEDESC);

  00038	c7 45 8c 6c 00
	00 00		 mov	 DWORD PTR _ddsd$[ebp], 108 ; 0000006cH

; 46   : 	if( lpsurTo->Lock( NULL, &ddsd, DDLOCK_WAIT, NULL) == DD_OK ){

  0003f	8b f4		 mov	 esi, esp
  00041	6a 00		 push	 0
  00043	6a 01		 push	 1
  00045	8d 45 8c	 lea	 eax, DWORD PTR _ddsd$[ebp]
  00048	50		 push	 eax
  00049	6a 00		 push	 0
  0004b	8b 4d 0c	 mov	 ecx, DWORD PTR _lpsurTo$[ebp]
  0004e	8b 11		 mov	 edx, DWORD PTR [ecx]
  00050	8b 45 0c	 mov	 eax, DWORD PTR _lpsurTo$[ebp]
  00053	50		 push	 eax
  00054	8b 4a 64	 mov	 ecx, DWORD PTR [edx+100]
  00057	ff d1		 call	 ecx
  00059	3b f4		 cmp	 esi, esp
  0005b	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00060	85 c0		 test	 eax, eax
  00062	0f 85 60 02 00
	00		 jne	 $LN1@LoadBmpToS

; 47   : 		if( realGetImage( 	noFrom, 

  00068	68 00 00 00 00	 push	 OFFSET ?RealBinHeight@@3HA ; RealBinHeight
  0006d	68 00 00 00 00	 push	 OFFSET ?RealBinWidth@@3HA ; RealBinWidth
  00072	68 00 00 00 00	 push	 OFFSET ?pRealBinBits@@3PADA ; pRealBinBits
  00077	8b 45 08	 mov	 eax, DWORD PTR _noFrom$[ebp]
  0007a	50		 push	 eax
  0007b	e8 00 00 00 00	 call	 ?realGetImage@@YAHHPAPAEPAH1@Z ; realGetImage
  00080	83 c4 10	 add	 esp, 16			; 00000010H
  00083	85 c0		 test	 eax, eax
  00085	0f 84 21 02 00
	00		 je	 $LN18@LoadBmpToS

; 48   : 							( unsigned char **)&pRealBinBits, 
; 49   : 							&RealBinWidth, 
; 50   : 							&RealBinHeight ) ){
; 51   : 			// realbin档图素要倒着读
; 52   : 			pRealBinBits += (w * (h-1));

  0008b	8b 45 14	 mov	 eax, DWORD PTR _h$[ebp]
  0008e	83 e8 01	 sub	 eax, 1
  00091	0f af 45 10	 imul	 eax, DWORD PTR _w$[ebp]
  00095	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  0009b	a3 00 00 00 00	 mov	 DWORD PTR ?pRealBinBits@@3PADA, eax ; pRealBinBits

; 53   : 			if (displayBpp == 32){

  000a0	83 3d 00 00 00
	00 20		 cmp	 DWORD PTR ?displayBpp@@3HA, 32 ; displayBpp, 00000020H
  000a7	0f 85 b6 00 00
	00		 jne	 $LN19@LoadBmpToS

; 54   : 				LPDWORD surface;
; 55   : 				surface = (LPDWORD)ddsd.lpSurface;

  000ad	8b 45 b0	 mov	 eax, DWORD PTR _ddsd$[ebp+36]
  000b0	89 45 80	 mov	 DWORD PTR _surface$10[ebp], eax

; 56   : 				// 高彩一个点要用2个byte,所以pitch除2方便填颜色值
; 57   : 				ddsd.lPitch >>= 2; // ddsd.lPitch /= 2;

  000b3	8b 45 9c	 mov	 eax, DWORD PTR _ddsd$[ebp+16]
  000b6	c1 f8 02	 sar	 eax, 2
  000b9	89 45 9c	 mov	 DWORD PTR _ddsd$[ebp+16], eax

; 58   : 				unsigned int pixel;
; 59   : 				for (int i = 0; i < h; i++){

  000bc	c7 85 68 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _i$8[ebp], 0
  000c6	eb 0f		 jmp	 SHORT $LN4@LoadBmpToS
$LN2@LoadBmpToS:
  000c8	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR _i$8[ebp]
  000ce	83 c0 01	 add	 eax, 1
  000d1	89 85 68 ff ff
	ff		 mov	 DWORD PTR _i$8[ebp], eax
$LN4@LoadBmpToS:
  000d7	8b 85 68 ff ff
	ff		 mov	 eax, DWORD PTR _i$8[ebp]
  000dd	3b 45 14	 cmp	 eax, DWORD PTR _h$[ebp]
  000e0	7d 7c		 jge	 SHORT $LN3@LoadBmpToS

; 60   : 					for (int j = 0; j < w; j++){

  000e2	c7 85 5c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _j$7[ebp], 0
  000ec	eb 0f		 jmp	 SHORT $LN7@LoadBmpToS
$LN5@LoadBmpToS:
  000ee	8b 85 5c ff ff
	ff		 mov	 eax, DWORD PTR _j$7[ebp]
  000f4	83 c0 01	 add	 eax, 1
  000f7	89 85 5c ff ff
	ff		 mov	 DWORD PTR _j$7[ebp], eax
$LN7@LoadBmpToS:
  000fd	8b 85 5c ff ff
	ff		 mov	 eax, DWORD PTR _j$7[ebp]
  00103	3b 45 10	 cmp	 eax, DWORD PTR _w$[ebp]
  00106	7d 38		 jge	 SHORT $LN6@LoadBmpToS

; 61   : 						pixel = highColor32Palette[(unsigned char)pRealBinBits[j]];

  00108	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  0010d	03 85 5c ff ff
	ff		 add	 eax, DWORD PTR _j$7[ebp]
  00113	0f b6 08	 movzx	 ecx, BYTE PTR [eax]
  00116	8b 14 8d 00 00
	00 00		 mov	 edx, DWORD PTR ?highColor32Palette@@3PAIA[ecx*4]
  0011d	89 95 74 ff ff
	ff		 mov	 DWORD PTR _pixel$9[ebp], edx

; 62   : 						// 透明色不处理
; 63   : 						if (pixel) surface[j] = pixel;

  00123	83 bd 74 ff ff
	ff 00		 cmp	 DWORD PTR _pixel$9[ebp], 0
  0012a	74 12		 je	 SHORT $LN21@LoadBmpToS
  0012c	8b 85 5c ff ff
	ff		 mov	 eax, DWORD PTR _j$7[ebp]
  00132	8b 4d 80	 mov	 ecx, DWORD PTR _surface$10[ebp]
  00135	8b 95 74 ff ff
	ff		 mov	 edx, DWORD PTR _pixel$9[ebp]
  0013b	89 14 81	 mov	 DWORD PTR [ecx+eax*4], edx
$LN21@LoadBmpToS:

; 64   : 					}

  0013e	eb ae		 jmp	 SHORT $LN5@LoadBmpToS
$LN6@LoadBmpToS:

; 65   : 					// 换下一行
; 66   : 					surface += ddsd.lPitch;

  00140	8b 45 9c	 mov	 eax, DWORD PTR _ddsd$[ebp+16]
  00143	8b 4d 80	 mov	 ecx, DWORD PTR _surface$10[ebp]
  00146	8d 14 81	 lea	 edx, DWORD PTR [ecx+eax*4]
  00149	89 55 80	 mov	 DWORD PTR _surface$10[ebp], edx

; 67   : 					pRealBinBits -= w;

  0014c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  00151	2b 45 10	 sub	 eax, DWORD PTR _w$[ebp]
  00154	a3 00 00 00 00	 mov	 DWORD PTR ?pRealBinBits@@3PADA, eax ; pRealBinBits

; 68   : 				}

  00159	e9 6a ff ff ff	 jmp	 $LN2@LoadBmpToS
$LN3@LoadBmpToS:

; 69   : 			}else if( displayBpp == 16){

  0015e	e9 49 01 00 00	 jmp	 $LN18@LoadBmpToS
$LN19@LoadBmpToS:
  00163	83 3d 00 00 00
	00 10		 cmp	 DWORD PTR ?displayBpp@@3HA, 16 ; displayBpp, 00000010H
  0016a	0f 85 d2 00 00
	00		 jne	 $LN22@LoadBmpToS

; 70   : 				LPWORD surface;
; 71   : 				surface = (LPWORD)ddsd.lpSurface;

  00170	8b 45 b0	 mov	 eax, DWORD PTR _ddsd$[ebp+36]
  00173	89 85 50 ff ff
	ff		 mov	 DWORD PTR _surface$6[ebp], eax

; 72   : 				// 高彩一个点要用2个byte,所以pitch除2方便填颜色值
; 73   : 				ddsd.lPitch >>= 1; // ddsd.lPitch /= 2;

  00179	8b 45 9c	 mov	 eax, DWORD PTR _ddsd$[ebp+16]
  0017c	d1 f8		 sar	 eax, 1
  0017e	89 45 9c	 mov	 DWORD PTR _ddsd$[ebp+16], eax

; 74   : 				unsigned short pixel;
; 75   : 				for( short i = 0; i < h; i++){

  00181	33 c0		 xor	 eax, eax
  00183	66 89 85 38 ff
	ff ff		 mov	 WORD PTR _i$4[ebp], ax
  0018a	eb 12		 jmp	 SHORT $LN10@LoadBmpToS
$LN8@LoadBmpToS:
  0018c	66 8b 85 38 ff
	ff ff		 mov	 ax, WORD PTR _i$4[ebp]
  00193	66 83 c0 01	 add	 ax, 1
  00197	66 89 85 38 ff
	ff ff		 mov	 WORD PTR _i$4[ebp], ax
$LN10@LoadBmpToS:
  0019e	0f bf 85 38 ff
	ff ff		 movsx	 eax, WORD PTR _i$4[ebp]
  001a5	3b 45 14	 cmp	 eax, DWORD PTR _h$[ebp]
  001a8	0f 8d 92 00 00
	00		 jge	 $LN9@LoadBmpToS

; 76   : 					for( short j = 0; j < w; j++){

  001ae	33 c0		 xor	 eax, eax
  001b0	66 89 85 2c ff
	ff ff		 mov	 WORD PTR _j$3[ebp], ax
  001b7	eb 12		 jmp	 SHORT $LN13@LoadBmpToS
$LN11@LoadBmpToS:
  001b9	66 8b 85 2c ff
	ff ff		 mov	 ax, WORD PTR _j$3[ebp]
  001c0	66 83 c0 01	 add	 ax, 1
  001c4	66 89 85 2c ff
	ff ff		 mov	 WORD PTR _j$3[ebp], ax
$LN13@LoadBmpToS:
  001cb	0f bf 85 2c ff
	ff ff		 movsx	 eax, WORD PTR _j$3[ebp]
  001d2	3b 45 10	 cmp	 eax, DWORD PTR _w$[ebp]
  001d5	7d 45		 jge	 SHORT $LN12@LoadBmpToS

; 77   : 						pixel = highColorPalette[(unsigned char)pRealBinBits[j]];

  001d7	0f bf 85 2c ff
	ff ff		 movsx	 eax, WORD PTR _j$3[ebp]
  001de	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  001e4	0f b6 14 01	 movzx	 edx, BYTE PTR [ecx+eax]
  001e8	66 8b 04 55 00
	00 00 00	 mov	 ax, WORD PTR ?highColorPalette@@3PAGA[edx*2]
  001f0	66 89 85 44 ff
	ff ff		 mov	 WORD PTR _pixel$5[ebp], ax

; 78   : 						// 透明色不处理
; 79   : 						if( pixel) surface[j] = pixel;

  001f7	0f b7 85 44 ff
	ff ff		 movzx	 eax, WORD PTR _pixel$5[ebp]
  001fe	85 c0		 test	 eax, eax
  00200	74 18		 je	 SHORT $LN24@LoadBmpToS
  00202	0f bf 85 2c ff
	ff ff		 movsx	 eax, WORD PTR _j$3[ebp]
  00209	8b 8d 50 ff ff
	ff		 mov	 ecx, DWORD PTR _surface$6[ebp]
  0020f	66 8b 95 44 ff
	ff ff		 mov	 dx, WORD PTR _pixel$5[ebp]
  00216	66 89 14 41	 mov	 WORD PTR [ecx+eax*2], dx
$LN24@LoadBmpToS:

; 80   : 					}

  0021a	eb 9d		 jmp	 SHORT $LN11@LoadBmpToS
$LN12@LoadBmpToS:

; 81   : 					// 换下一行
; 82   : 					surface += ddsd.lPitch;

  0021c	8b 45 9c	 mov	 eax, DWORD PTR _ddsd$[ebp+16]
  0021f	8b 8d 50 ff ff
	ff		 mov	 ecx, DWORD PTR _surface$6[ebp]
  00225	8d 14 41	 lea	 edx, DWORD PTR [ecx+eax*2]
  00228	89 95 50 ff ff
	ff		 mov	 DWORD PTR _surface$6[ebp], edx

; 83   : 					pRealBinBits -= w;

  0022e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  00233	2b 45 10	 sub	 eax, DWORD PTR _w$[ebp]
  00236	a3 00 00 00 00	 mov	 DWORD PTR ?pRealBinBits@@3PADA, eax ; pRealBinBits

; 84   : 				}

  0023b	e9 4c ff ff ff	 jmp	 $LN8@LoadBmpToS
$LN9@LoadBmpToS:

; 85   : 			}else{

  00240	eb 6a		 jmp	 SHORT $LN18@LoadBmpToS
$LN22@LoadBmpToS:

; 86   : 				LPBYTE surface;
; 87   : 				surface = (LPBYTE)ddsd.lpSurface;

  00242	8b 45 b0	 mov	 eax, DWORD PTR _ddsd$[ebp+36]
  00245	89 85 20 ff ff
	ff		 mov	 DWORD PTR _surface$2[ebp], eax

; 88   : 				for( short i = 0; i < h; i++){

  0024b	33 c0		 xor	 eax, eax
  0024d	66 89 85 14 ff
	ff ff		 mov	 WORD PTR _i$1[ebp], ax
  00254	eb 12		 jmp	 SHORT $LN16@LoadBmpToS
$LN14@LoadBmpToS:
  00256	66 8b 85 14 ff
	ff ff		 mov	 ax, WORD PTR _i$1[ebp]
  0025d	66 83 c0 01	 add	 ax, 1
  00261	66 89 85 14 ff
	ff ff		 mov	 WORD PTR _i$1[ebp], ax
$LN16@LoadBmpToS:
  00268	0f bf 85 14 ff
	ff ff		 movsx	 eax, WORD PTR _i$1[ebp]
  0026f	3b 45 14	 cmp	 eax, DWORD PTR _h$[ebp]
  00272	7d 38		 jge	 SHORT $LN18@LoadBmpToS

; 89   : 					CopyMemory( surface, pRealBinBits, w);

  00274	8b 45 10	 mov	 eax, DWORD PTR _w$[ebp]
  00277	50		 push	 eax
  00278	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  0027e	51		 push	 ecx
  0027f	8b 95 20 ff ff
	ff		 mov	 edx, DWORD PTR _surface$2[ebp]
  00285	52		 push	 edx
  00286	e8 00 00 00 00	 call	 _memcpy
  0028b	83 c4 0c	 add	 esp, 12			; 0000000cH

; 90   : 					surface += ddsd.lPitch;

  0028e	8b 85 20 ff ff
	ff		 mov	 eax, DWORD PTR _surface$2[ebp]
  00294	03 45 9c	 add	 eax, DWORD PTR _ddsd$[ebp+16]
  00297	89 85 20 ff ff
	ff		 mov	 DWORD PTR _surface$2[ebp], eax

; 91   : 					pRealBinBits -= w;

  0029d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pRealBinBits@@3PADA ; pRealBinBits
  002a2	2b 45 10	 sub	 eax, DWORD PTR _w$[ebp]
  002a5	a3 00 00 00 00	 mov	 DWORD PTR ?pRealBinBits@@3PADA, eax ; pRealBinBits

; 92   : 				}

  002aa	eb aa		 jmp	 SHORT $LN14@LoadBmpToS
$LN18@LoadBmpToS:

; 93   : 			}
; 94   : 		}
; 95   : 		lpsurTo->Unlock( NULL);

  002ac	8b f4		 mov	 esi, esp
  002ae	6a 00		 push	 0
  002b0	8b 45 0c	 mov	 eax, DWORD PTR _lpsurTo$[ebp]
  002b3	8b 08		 mov	 ecx, DWORD PTR [eax]
  002b5	8b 55 0c	 mov	 edx, DWORD PTR _lpsurTo$[ebp]
  002b8	52		 push	 edx
  002b9	8b 81 80 00 00
	00		 mov	 eax, DWORD PTR [ecx+128]
  002bf	ff d0		 call	 eax
  002c1	3b f4		 cmp	 esi, esp
  002c3	e8 00 00 00 00	 call	 __RTC_CheckEsp
$LN1@LoadBmpToS:

; 96   : 	}
; 97   : }

  002c8	52		 push	 edx
  002c9	8b cd		 mov	 ecx, ebp
  002cb	50		 push	 eax
  002cc	8d 15 00 00 00
	00		 lea	 edx, DWORD PTR $LN28@LoadBmpToS
  002d2	e8 00 00 00 00	 call	 @_RTC_CheckStackVars@8
  002d7	58		 pop	 eax
  002d8	5a		 pop	 edx
  002d9	5f		 pop	 edi
  002da	5e		 pop	 esi
  002db	5b		 pop	 ebx
  002dc	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  002df	33 cd		 xor	 ecx, ebp
  002e1	e8 00 00 00 00	 call	 @__security_check_cookie@4
  002e6	81 c4 b0 01 00
	00		 add	 esp, 432		; 000001b0H
  002ec	3b ec		 cmp	 ebp, esp
  002ee	e8 00 00 00 00	 call	 __RTC_CheckEsp
  002f3	8b e5		 mov	 esp, ebp
  002f5	5d		 pop	 ebp
  002f6	c3		 ret	 0
  002f7	90		 npad	 1
$LN28@LoadBmpToS:
  002f8	01 00 00 00	 DD	 1
  002fc	00 00 00 00	 DD	 $LN27@LoadBmpToS
$LN27@LoadBmpToS:
  00300	8c ff ff ff	 DD	 -116			; ffffff8cH
  00304	6c 00 00 00	 DD	 108			; 0000006cH
  00308	00 00 00 00	 DD	 $LN26@LoadBmpToS
$LN26@LoadBmpToS:
  0030c	64		 DB	 100			; 00000064H
  0030d	64		 DB	 100			; 00000064H
  0030e	73		 DB	 115			; 00000073H
  0030f	64		 DB	 100			; 00000064H
  00310	00		 DB	 0
?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ENDP	; LoadBmpToSurface
_TEXT	ENDS
; Function compile flags: /Odtp /RTCsu /ZI
; File c:\users\administrator\desktop\????? ??\????? ??\client source code\system\skyisland.cpp
;	COMDAT ?SkyIslandDraw@@YAXH@Z
_TEXT	SEGMENT
tv247 = -332						; size = 4
tv95 = -332						; size = 4
_dy$2 = -132						; size = 4
_dx$3 = -120						; size = 4
_h$4 = -108						; size = 2
_w$5 = -96						; size = 2
_no$6 = -84						; size = 4
_rc$ = -72						; size = 16
_now$ = -48						; size = 4
_y$ = -36						; size = 4
_x$ = -24						; size = 4
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
_floor$ = 8						; size = 4
?SkyIslandDraw@@YAXH@Z PROC				; SkyIslandDraw, COMDAT

; 280  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?SkyIslandDraw@@YAXH@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 40 01 00
	00		 sub	 esp, 320		; 00000140H
  00017	53		 push	 ebx
  00018	56		 push	 esi
  00019	57		 push	 edi
  0001a	8d bd b4 fe ff
	ff		 lea	 edi, DWORD PTR [ebp-332]
  00020	b9 50 00 00 00	 mov	 ecx, 80			; 00000050H
  00025	b8 cc cc cc cc	 mov	 eax, -858993460		; ccccccccH
  0002a	f3 ab		 rep stosd
  0002c	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00031	33 c5		 xor	 eax, ebp
  00033	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00036	50		 push	 eax
  00037	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0003a	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax

; 281  : 	static DWORD dwSlow1;
; 282  : //JL fix 2017.9.22 修复单人打精灵王后崩
; 283  : 	if (pc.ptAct == NULL){

  00040	83 3d ec 50 00
	00 00		 cmp	 DWORD PTR ?pc@@3UPC@@A+20716, 0
  00047	75 05		 jne	 SHORT $LN8@SkyIslandD

; 284  : 		return;

  00049	e9 ed 05 00 00	 jmp	 $LN1@SkyIslandD
$LN8@SkyIslandD:

; 285  : 	}
; 286  : 	static int compx = (int)pc.ptAct->mx,compy = (int)pc.ptAct->my;

  0004e	a1 00 00 00 00	 mov	 eax, DWORD PTR __tls_index
  00053	64 8b 0d 00 00
	00 00		 mov	 ecx, DWORD PTR fs:__tls_array
  0005a	8b 14 81	 mov	 edx, DWORD PTR [ecx+eax*4]
  0005d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA
  00062	3b 82 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[edx]
  00068	7e 44		 jle	 SHORT $LN2@SkyIslandD
  0006a	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA
  0006f	e8 00 00 00 00	 call	 __Init_thread_header
  00074	83 c4 04	 add	 esp, 4
  00077	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA, -1
  0007e	75 2e		 jne	 SHORT $LN2@SkyIslandD
  00080	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  00087	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  0008c	f3 0f 2c 88 18
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+280]
  00094	89 0d 00 00 00
	00		 mov	 DWORD PTR ?compx@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx
  0009a	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  000a1	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA
  000a6	e8 00 00 00 00	 call	 __Init_thread_footer
  000ab	83 c4 04	 add	 esp, 4
$LN2@SkyIslandD:
  000ae	a1 00 00 00 00	 mov	 eax, DWORD PTR __tls_index
  000b3	64 8b 0d 00 00
	00 00		 mov	 ecx, DWORD PTR fs:__tls_array
  000ba	8b 14 81	 mov	 edx, DWORD PTR [ecx+eax*4]
  000bd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA
  000c2	3b 82 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[edx]
  000c8	7e 44		 jle	 SHORT $LN3@SkyIslandD
  000ca	68 00 00 00 00	 push	 OFFSET ?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA
  000cf	e8 00 00 00 00	 call	 __Init_thread_header
  000d4	83 c4 04	 add	 esp, 4
  000d7	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA, -1
  000de	75 2e		 jne	 SHORT $LN3@SkyIslandD
  000e0	c7 45 fc 01 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 1
  000e7	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  000ec	f3 0f 2c 88 1c
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+284]
  000f4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?compy@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx
  000fa	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  00101	68 00 00 00 00	 push	 OFFSET ?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA
  00106	e8 00 00 00 00	 call	 __Init_thread_footer
  0010b	83 c4 04	 add	 esp, 4
$LN3@SkyIslandD:

; 287  : 	int x,y;
; 288  : 	DWORD now;
; 289  : 	RECT rc;
; 290  : 
; 291  : 	if( sky_island_no && lpsurCloud1 && lpsurLand && pc.ptAct){

  0010e	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?sky_island_no@@3KA, 0 ; sky_island_no
  00115	0f 84 20 05 00
	00		 je	 $LN40@SkyIslandD
  0011b	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A, 0 ; lpsurCloud1
  00122	0f 84 13 05 00
	00		 je	 $LN40@SkyIslandD
  00128	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A, 0 ; lpsurLand
  0012f	0f 84 06 05 00
	00		 je	 $LN40@SkyIslandD
  00135	83 3d ec 50 00
	00 00		 cmp	 DWORD PTR ?pc@@3UPC@@A+20716, 0
  0013c	0f 84 f9 04 00
	00		 je	 $LN40@SkyIslandD

; 292  : 		bDrawUpCloud = TRUE;

  00142	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?bDrawUpCloud@@3HA, 1 ; bDrawUpCloud

; 293  : 		if(compx != (int)pc.ptAct->mx || compy != (int)pc.ptAct->my){

  0014c	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  00151	f3 0f 2c 88 18
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+280]
  00159	39 0d 00 00 00
	00		 cmp	 DWORD PTR ?compx@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx
  0015f	75 19		 jne	 SHORT $LN11@SkyIslandD
  00161	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  00166	f3 0f 2c 88 1c
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+284]
  0016e	39 0d 00 00 00
	00		 cmp	 DWORD PTR ?compy@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx
  00174	0f 84 f8 00 00
	00		 je	 $LN10@SkyIslandD
$LN11@SkyIslandD:

; 294  : 			switch(pc.dir){

  0017a	a1 0c 00 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+12
  0017f	89 85 b4 fe ff
	ff		 mov	 DWORD PTR tv95[ebp], eax
  00185	83 bd b4 fe ff
	ff 07		 cmp	 DWORD PTR tv95[ebp], 7
  0018c	0f 87 ba 00 00
	00		 ja	 $LN4@SkyIslandD
  00192	8b 8d b4 fe ff
	ff		 mov	 ecx, DWORD PTR tv95[ebp]
  00198	ff 24 8d 00 00
	00 00		 jmp	 DWORD PTR $LN52@SkyIslandD[ecx*4]
$LN12@SkyIslandD:

; 295  : 			// 下
; 296  : 			case 0:	g_rc.top++; break;

  0019f	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  001a4	83 c0 01	 add	 eax, 1
  001a7	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax
  001ac	e9 9b 00 00 00	 jmp	 $LN4@SkyIslandD
$LN13@SkyIslandD:

; 297  : 			// 左下
; 298  : 			case 1:
; 299  : 				g_rc.left--;

  001b1	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  001b6	83 e8 01	 sub	 eax, 1
  001b9	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax

; 300  : 				g_rc.top++;

  001be	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  001c3	83 c0 01	 add	 eax, 1
  001c6	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax

; 301  : 				break;

  001cb	eb 7f		 jmp	 SHORT $LN4@SkyIslandD
$LN14@SkyIslandD:

; 302  : 			// 左
; 303  : 			case 2:	g_rc.left--; break;

  001cd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  001d2	83 e8 01	 sub	 eax, 1
  001d5	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax
  001da	eb 70		 jmp	 SHORT $LN4@SkyIslandD
$LN15@SkyIslandD:

; 304  : 			// 左上
; 305  : 			case 3:
; 306  : 				g_rc.left--;

  001dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  001e1	83 e8 01	 sub	 eax, 1
  001e4	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax

; 307  : 				g_rc.top--;

  001e9	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  001ee	83 e8 01	 sub	 eax, 1
  001f1	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax

; 308  : 				break;

  001f6	eb 54		 jmp	 SHORT $LN4@SkyIslandD
$LN16@SkyIslandD:

; 309  : 			// 上
; 310  : 			case 4:	g_rc.top--; break;

  001f8	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  001fd	83 e8 01	 sub	 eax, 1
  00200	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax
  00205	eb 45		 jmp	 SHORT $LN4@SkyIslandD
$LN17@SkyIslandD:

; 311  : 			// 右上
; 312  : 			case 5:
; 313  : 				g_rc.left++;

  00207	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  0020c	83 c0 01	 add	 eax, 1
  0020f	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax

; 314  : 				g_rc.top--;

  00214	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  00219	83 e8 01	 sub	 eax, 1
  0021c	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax

; 315  : 				break;

  00221	eb 29		 jmp	 SHORT $LN4@SkyIslandD
$LN18@SkyIslandD:

; 316  : 			// 右
; 317  : 			case 6:	g_rc.left++; break;

  00223	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  00228	83 c0 01	 add	 eax, 1
  0022b	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax
  00230	eb 1a		 jmp	 SHORT $LN4@SkyIslandD
$LN19@SkyIslandD:

; 318  : 			// 右下
; 319  : 			case 7:
; 320  : 				g_rc.left++;

  00232	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  00237	83 c0 01	 add	 eax, 1
  0023a	a3 00 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A, eax

; 321  : 				g_rc.top++;

  0023f	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  00244	83 c0 01	 add	 eax, 1
  00247	a3 04 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, eax
$LN4@SkyIslandD:

; 322  : 				break;
; 323  : 			}
; 324  : 			compx = (int)pc.ptAct->mx;

  0024c	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  00251	f3 0f 2c 88 18
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+280]
  00259	89 0d 00 00 00
	00		 mov	 DWORD PTR ?compx@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx

; 325  : 			compy = (int)pc.ptAct->my;

  0025f	a1 ec 50 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+20716
  00264	f3 0f 2c 88 1c
	01 00 00	 cvttss2si ecx, DWORD PTR [eax+284]
  0026c	89 0d 00 00 00
	00		 mov	 DWORD PTR ?compy@?1??SkyIslandDraw@@YAXH@Z@4HA, ecx
$LN10@SkyIslandD:

; 326  : 		}
; 327  : 		g_rc.right = g_rc.left + DEF_APPSIZEX;

  00272	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  00277	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  0027d	a3 08 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+8, eax

; 328  : 		g_rc.bottom = g_rc.top + DEF_APPSIZEY;

  00282	a1 04 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  00287	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  0028d	a3 0c 00 00 00	 mov	 DWORD PTR ?g_rc@@3UtagRECT@@A+12, eax

; 329  : 		SetRect(&rc,g_rc.left,g_rc.top,g_rc.right,g_rc.bottom);

  00292	8b f4		 mov	 esi, esp
  00294	a1 0c 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A+12
  00299	50		 push	 eax
  0029a	8b 0d 08 00 00
	00		 mov	 ecx, DWORD PTR ?g_rc@@3UtagRECT@@A+8
  002a0	51		 push	 ecx
  002a1	8b 15 04 00 00
	00		 mov	 edx, DWORD PTR ?g_rc@@3UtagRECT@@A+4
  002a7	52		 push	 edx
  002a8	a1 00 00 00 00	 mov	 eax, DWORD PTR ?g_rc@@3UtagRECT@@A
  002ad	50		 push	 eax
  002ae	8d 4d b8	 lea	 ecx, DWORD PTR _rc$[ebp]
  002b1	51		 push	 ecx
  002b2	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetRect@20
  002b8	3b f4		 cmp	 esi, esp
  002ba	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 330  : 		if(g_rc.left < 0){

  002bf	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?g_rc@@3UtagRECT@@A, 0
  002c6	7d 13		 jge	 SHORT $LN20@SkyIslandD

; 331  : 			rc.left = 0;

  002c8	c7 45 b8 00 00
	00 00		 mov	 DWORD PTR _rc$[ebp], 0

; 332  : 			rc.right = rc.left + DEF_APPSIZEX;

  002cf	8b 45 b8	 mov	 eax, DWORD PTR _rc$[ebp]
  002d2	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  002d8	89 45 c0	 mov	 DWORD PTR _rc$[ebp+8], eax
$LN20@SkyIslandD:

; 333  : 		}
; 334  : 		if(g_rc.top < 0){

  002db	83 3d 04 00 00
	00 00		 cmp	 DWORD PTR ?g_rc@@3UtagRECT@@A+4, 0
  002e2	7d 13		 jge	 SHORT $LN21@SkyIslandD

; 335  : 			rc.top = 0;

  002e4	c7 45 bc 00 00
	00 00		 mov	 DWORD PTR _rc$[ebp+4], 0

; 336  : 			rc.bottom = rc.top + DEF_APPSIZEY;

  002eb	8b 45 bc	 mov	 eax, DWORD PTR _rc$[ebp+4]
  002ee	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  002f4	89 45 c4	 mov	 DWORD PTR _rc$[ebp+12], eax
$LN21@SkyIslandD:

; 337  : 		}
; 338  : 		if(g_rc.right > LandWidth){

  002f7	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandWidth@@3FA ; LandWidth
  002fe	39 05 08 00 00
	00		 cmp	 DWORD PTR ?g_rc@@3UtagRECT@@A+8, eax
  00304	7e 1a		 jle	 SHORT $LN22@SkyIslandD

; 339  : 			rc.right = LandWidth;

  00306	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandWidth@@3FA ; LandWidth
  0030d	89 45 c0	 mov	 DWORD PTR _rc$[ebp+8], eax

; 340  : 			rc.left = LandWidth - DEF_APPSIZEX;

  00310	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandWidth@@3FA ; LandWidth
  00317	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  0031d	89 45 b8	 mov	 DWORD PTR _rc$[ebp], eax
$LN22@SkyIslandD:

; 341  : 		}
; 342  : 		if(g_rc.bottom > LandHeight){

  00320	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandHeight@@3FA ; LandHeight
  00327	39 05 0c 00 00
	00		 cmp	 DWORD PTR ?g_rc@@3UtagRECT@@A+12, eax
  0032d	7e 1a		 jle	 SHORT $LN23@SkyIslandD

; 343  : 			rc.bottom = LandHeight;

  0032f	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandHeight@@3FA ; LandHeight
  00336	89 45 c4	 mov	 DWORD PTR _rc$[ebp+12], eax

; 344  : 			rc.top = LandHeight - DEF_APPSIZEY;

  00339	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?LandHeight@@3FA ; LandHeight
  00340	2b 05 00 00 00
	00		 sub	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  00346	89 45 bc	 mov	 DWORD PTR _rc$[ebp+4], eax
$LN23@SkyIslandD:

; 345  : 		}
; 346  : 		lpDraw->lpBACKBUFFER->BltFast( 0, 0, lpsurLand, &rc, DDBLTFAST_WAIT);	

  00349	8b f4		 mov	 esi, esp
  0034b	6a 10		 push	 16			; 00000010H
  0034d	8d 45 b8	 lea	 eax, DWORD PTR _rc$[ebp]
  00350	50		 push	 eax
  00351	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpsurLand@@3PAUIDirectDrawSurface@@A ; lpsurLand
  00357	51		 push	 ecx
  00358	6a 00		 push	 0
  0035a	6a 00		 push	 0
  0035c	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00362	8b 42 0c	 mov	 eax, DWORD PTR [edx+12]
  00365	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  0036b	8b 51 0c	 mov	 edx, DWORD PTR [ecx+12]
  0036e	8b 00		 mov	 eax, DWORD PTR [eax]
  00370	52		 push	 edx
  00371	8b 48 1c	 mov	 ecx, DWORD PTR [eax+28]
  00374	ff d1		 call	 ecx
  00376	3b f4		 cmp	 esi, esp
  00378	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 347  : #ifdef _READ16BITBMP
; 348  : 		if(g_bUseAlpha) lpDraw->lpBACKBUFFERSYS->BltFast( 0, 0, lpsurLand, &rc, DDBLTFAST_WAIT);	
; 349  : #endif
; 350  : #ifdef _MOON_FAIRYLAND				// (不可开) ROG ADD 月之仙境
; 351  : 		if(moonFlag == TRUE) return;

  0037d	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?moonFlag@@3HA, 1 ; moonFlag
  00384	75 05		 jne	 SHORT $LN24@SkyIslandD
  00386	e9 b0 02 00 00	 jmp	 $LN1@SkyIslandD
$LN24@SkyIslandD:

; 352  : #endif
; 353  : 
; 354  : 		if( (now = TimeGetTime()) > dwSlow1){

  0038b	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  00390	89 45 d0	 mov	 DWORD PTR _now$[ebp], eax
  00393	8b 45 d0	 mov	 eax, DWORD PTR _now$[ebp]
  00396	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?dwSlow1@?1??SkyIslandDraw@@YAXH@Z@4KA
  0039c	0f 86 b3 01 00
	00		 jbe	 $LN26@SkyIslandD

; 355  : 			dwSlow1 = now + 177;

  003a2	8b 45 d0	 mov	 eax, DWORD PTR _now$[ebp]
  003a5	05 b1 00 00 00	 add	 eax, 177		; 000000b1H
  003aa	a3 00 00 00 00	 mov	 DWORD PTR ?dwSlow1@?1??SkyIslandDraw@@YAXH@Z@4KA, eax

; 356  : 			iCloudX1 += iCloudDX;

  003af	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX1@@3HA ; iCloudX1
  003b4	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?iCloudDX@@3HA ; iCloudDX
  003ba	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudX1@@3HA, eax ; iCloudX1

; 357  : 			iCloudY1 += iCloudDY;

  003bf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY1@@3HA ; iCloudY1
  003c4	03 05 00 00 00
	00		 add	 eax, DWORD PTR ?iCloudDY@@3HA ; iCloudDY
  003ca	a3 00 00 00 00	 mov	 DWORD PTR ?iCloudY1@@3HA, eax ; iCloudY1

; 358  : 			if(((iCloudX1>=DEF_APPSIZEX) || (iCloudY1>=DEF_APPSIZEY)) ){

  003cf	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX1@@3HA ; iCloudX1
  003d4	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  003da	7d 11		 jge	 SHORT $LN27@SkyIslandD
  003dc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY1@@3HA ; iCloudY1
  003e1	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  003e7	0f 8c 68 01 00
	00		 jl	 $LN26@SkyIslandD
$LN27@SkyIslandD:

; 359  : 				//产生一朵新的云
; 360  : #ifdef __CARYTEST
; 361  : 				iCloudNo1 = 40500+(rand()&0x3);
; 362  : 				DWORD no;
; 363  : 				short w, h;
; 364  : 				realGetNo( iCloudNo1, &no);
; 365  : 				realGetWH( no, &w, &h);
; 366  : 				CloudWidth1 = w;
; 367  : 				CloudHeight1 = h;
; 368  : #else
; 369  : 				DWORD no;
; 370  : 				short w, h;
; 371  : #ifdef _NEW_CLOUD
; 372  : 				if( floor == 61000 || floor == 61100 )

  003ed	81 7d 08 48 ee
	00 00		 cmp	 DWORD PTR _floor$[ebp], 61000 ; 0000ee48H
  003f4	74 09		 je	 SHORT $LN30@SkyIslandD
  003f6	81 7d 08 ac ee
	00 00		 cmp	 DWORD PTR _floor$[ebp], 61100 ; 0000eeacH
  003fd	75 2f		 jne	 SHORT $LN28@SkyIslandD
$LN30@SkyIslandD:

; 373  : 					realGetNo( 29077+(rand()%2), &no);

  003ff	8d 45 ac	 lea	 eax, DWORD PTR _no$6[ebp]
  00402	50		 push	 eax
  00403	8b f4		 mov	 esi, esp
  00405	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  0040b	3b f4		 cmp	 esi, esp
  0040d	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00412	25 01 00 00 80	 and	 eax, -2147483647	; 80000001H
  00417	79 05		 jns	 SHORT $LN51@SkyIslandD
  00419	48		 dec	 eax
  0041a	83 c8 fe	 or	 eax, -2			; fffffffeH
  0041d	40		 inc	 eax
$LN51@SkyIslandD:
  0041e	05 95 71 00 00	 add	 eax, 29077		; 00007195H
  00423	50		 push	 eax
  00424	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  00429	83 c4 08	 add	 esp, 8

; 374  : 				else

  0042c	eb 24		 jmp	 SHORT $LN29@SkyIslandD
$LN28@SkyIslandD:

; 375  : 					realGetNo( 40500+(rand()&0x3), &no);

  0042e	8d 45 ac	 lea	 eax, DWORD PTR _no$6[ebp]
  00431	50		 push	 eax
  00432	8b f4		 mov	 esi, esp
  00434	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  0043a	3b f4		 cmp	 esi, esp
  0043c	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00441	83 e0 03	 and	 eax, 3
  00444	05 34 9e 00 00	 add	 eax, 40500		; 00009e34H
  00449	50		 push	 eax
  0044a	e8 00 00 00 00	 call	 ?realGetNo@@YAHKPAK@Z	; realGetNo
  0044f	83 c4 08	 add	 esp, 8
$LN29@SkyIslandD:

; 376  : #else
; 377  : 				realGetNo( 40500+(rand()&0x3), &no);
; 378  : #endif
; 379  : 				realGetWH( no, &w, &h);

  00452	8d 45 94	 lea	 eax, DWORD PTR _h$4[ebp]
  00455	50		 push	 eax
  00456	8d 4d a0	 lea	 ecx, DWORD PTR _w$5[ebp]
  00459	51		 push	 ecx
  0045a	8b 55 ac	 mov	 edx, DWORD PTR _no$6[ebp]
  0045d	52		 push	 edx
  0045e	e8 00 00 00 00	 call	 ?realGetWH@@YAHKPAF0@Z	; realGetWH
  00463	83 c4 0c	 add	 esp, 12			; 0000000cH

; 380  : 				if( w!=CloudWidth1 || h!=CloudHeight1){

  00466	0f bf 45 a0	 movsx	 eax, WORD PTR _w$5[ebp]
  0046a	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudWidth1@@3FA ; CloudWidth1
  00471	3b c1		 cmp	 eax, ecx
  00473	75 0f		 jne	 SHORT $LN32@SkyIslandD
  00475	0f bf 45 94	 movsx	 eax, WORD PTR _h$4[ebp]
  00479	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudHeight1@@3FA ; CloudHeight1
  00480	3b c1		 cmp	 eax, ecx
  00482	74 31		 je	 SHORT $LN31@SkyIslandD
$LN32@SkyIslandD:

; 381  : 					CloudWidth1 = w;

  00484	66 8b 45 a0	 mov	 ax, WORD PTR _w$5[ebp]
  00488	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudWidth1@@3FA, ax ; CloudWidth1

; 382  : 					CloudHeight1 = h;

  0048e	66 8b 45 94	 mov	 ax, WORD PTR _h$4[ebp]
  00492	66 a3 00 00 00
	00		 mov	 WORD PTR ?CloudHeight1@@3FA, ax ; CloudHeight1

; 383  : 					LoadBmpToSurface( no, lpsurCloud1, w, h);

  00498	0f bf 45 94	 movsx	 eax, WORD PTR _h$4[ebp]
  0049c	50		 push	 eax
  0049d	0f bf 4d a0	 movsx	 ecx, WORD PTR _w$5[ebp]
  004a1	51		 push	 ecx
  004a2	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  004a8	52		 push	 edx
  004a9	8b 45 ac	 mov	 eax, DWORD PTR _no$6[ebp]
  004ac	50		 push	 eax
  004ad	e8 00 00 00 00	 call	 ?LoadBmpToSurface@@YAXHPAUIDirectDrawSurface@@HH@Z ; LoadBmpToSurface
  004b2	83 c4 10	 add	 esp, 16			; 00000010H
$LN31@SkyIslandD:

; 384  : 				}
; 385  : #endif
; 386  : 				int dx = 0, dy = 0;

  004b5	c7 45 88 00 00
	00 00		 mov	 DWORD PTR _dx$3[ebp], 0
  004bc	c7 85 7c ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _dy$2[ebp], 0

; 387  : 				switch( rand()%3){

  004c6	8b f4		 mov	 esi, esp
  004c8	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  004ce	3b f4		 cmp	 esi, esp
  004d0	e8 00 00 00 00	 call	 __RTC_CheckEsp
  004d5	99		 cdq
  004d6	b9 03 00 00 00	 mov	 ecx, 3
  004db	f7 f9		 idiv	 ecx
  004dd	89 95 b4 fe ff
	ff		 mov	 DWORD PTR tv247[ebp], edx
  004e3	83 bd b4 fe ff
	ff 00		 cmp	 DWORD PTR tv247[ebp], 0
  004ea	74 0b		 je	 SHORT $LN33@SkyIslandD
  004ec	83 bd b4 fe ff
	ff 01		 cmp	 DWORD PTR tv247[ebp], 1
  004f3	74 19		 je	 SHORT $LN34@SkyIslandD
  004f5	eb 2f		 jmp	 SHORT $LN35@SkyIslandD
$LN33@SkyIslandD:

; 388  : 				case 0:
; 389  : 					dx = rand() & 0x1f;

  004f7	8b f4		 mov	 esi, esp
  004f9	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  004ff	3b f4		 cmp	 esi, esp
  00501	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00506	83 e0 1f	 and	 eax, 31			; 0000001fH
  00509	89 45 88	 mov	 DWORD PTR _dx$3[ebp], eax

; 390  : 					break;

  0050c	eb 18		 jmp	 SHORT $LN6@SkyIslandD
$LN34@SkyIslandD:

; 391  : 				case 1:
; 392  : 					dy = rand() & 0x1f;

  0050e	8b f4		 mov	 esi, esp
  00510	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__rand
  00516	3b f4		 cmp	 esi, esp
  00518	e8 00 00 00 00	 call	 __RTC_CheckEsp
  0051d	83 e0 1f	 and	 eax, 31			; 0000001fH
  00520	89 85 7c ff ff
	ff		 mov	 DWORD PTR _dy$2[ebp], eax
$LN35@SkyIslandD:
$LN6@SkyIslandD:

; 393  : 					break;
; 394  : 				default:
; 395  : 					break;
; 396  : 				}
; 397  : 				iCloudX1 = -CloudWidth1 + dx + 40;

  00526	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudWidth1@@3FA ; CloudWidth1
  0052d	f7 d8		 neg	 eax
  0052f	8b 4d 88	 mov	 ecx, DWORD PTR _dx$3[ebp]
  00532	8d 54 08 28	 lea	 edx, DWORD PTR [eax+ecx+40]
  00536	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudX1@@3HA, edx ; iCloudX1

; 398  : 				iCloudY1 = -CloudHeight1 + dy + 30;

  0053c	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight1@@3FA ; CloudHeight1
  00543	f7 d8		 neg	 eax
  00545	8b 8d 7c ff ff
	ff		 mov	 ecx, DWORD PTR _dy$2[ebp]
  0054b	8d 54 08 1e	 lea	 edx, DWORD PTR [eax+ecx+30]
  0054f	89 15 00 00 00
	00		 mov	 DWORD PTR ?iCloudY1@@3HA, edx ; iCloudY1
$LN26@SkyIslandD:

; 399  : 			}
; 400  : 		}
; 401  : 	//		int x, y;
; 402  : 			x = iCloudX1;

  00555	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudX1@@3HA ; iCloudX1
  0055a	89 45 e8	 mov	 DWORD PTR _x$[ebp], eax

; 403  : 			y = iCloudY1;

  0055d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?iCloudY1@@3HA ; iCloudY1
  00562	89 45 dc	 mov	 DWORD PTR _y$[ebp], eax

; 404  : 			SetRect( &rc, 0, 0, CloudWidth1, CloudHeight1);

  00565	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight1@@3FA ; CloudHeight1
  0056c	8b f4		 mov	 esi, esp
  0056e	50		 push	 eax
  0056f	0f bf 0d 00 00
	00 00		 movsx	 ecx, WORD PTR ?CloudWidth1@@3FA ; CloudWidth1
  00576	51		 push	 ecx
  00577	6a 00		 push	 0
  00579	6a 00		 push	 0
  0057b	8d 55 b8	 lea	 edx, DWORD PTR _rc$[ebp]
  0057e	52		 push	 edx
  0057f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetRect@20
  00585	3b f4		 cmp	 esi, esp
  00587	e8 00 00 00 00	 call	 __RTC_CheckEsp

; 405  : 			if( x < 0){

  0058c	83 7d e8 00	 cmp	 DWORD PTR _x$[ebp], 0
  00590	7d 0f		 jge	 SHORT $LN36@SkyIslandD

; 406  : 				rc.left = -x;

  00592	8b 45 e8	 mov	 eax, DWORD PTR _x$[ebp]
  00595	f7 d8		 neg	 eax
  00597	89 45 b8	 mov	 DWORD PTR _rc$[ebp], eax

; 407  : 				x = 0;

  0059a	c7 45 e8 00 00
	00 00		 mov	 DWORD PTR _x$[ebp], 0
$LN36@SkyIslandD:

; 408  : 			}
; 409  : 			if( (x+CloudWidth1) >= DEF_APPSIZEX){

  005a1	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudWidth1@@3FA ; CloudWidth1
  005a8	03 45 e8	 add	 eax, DWORD PTR _x$[ebp]
  005ab	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  005b1	7c 0b		 jl	 SHORT $LN37@SkyIslandD

; 410  : 				rc.right = DEF_APPSIZEX - x;

  005b3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DEF_APPSIZEX@@3HA ; DEF_APPSIZEX
  005b8	2b 45 e8	 sub	 eax, DWORD PTR _x$[ebp]
  005bb	89 45 c0	 mov	 DWORD PTR _rc$[ebp+8], eax
$LN37@SkyIslandD:

; 411  : 			}
; 412  : 			if( y < 0){

  005be	83 7d dc 00	 cmp	 DWORD PTR _y$[ebp], 0
  005c2	7d 0f		 jge	 SHORT $LN38@SkyIslandD

; 413  : 				rc.top = -y;

  005c4	8b 45 dc	 mov	 eax, DWORD PTR _y$[ebp]
  005c7	f7 d8		 neg	 eax
  005c9	89 45 bc	 mov	 DWORD PTR _rc$[ebp+4], eax

; 414  : 				y = 0;

  005cc	c7 45 dc 00 00
	00 00		 mov	 DWORD PTR _y$[ebp], 0
$LN38@SkyIslandD:

; 415  : 			}
; 416  : 			if( (y+CloudHeight1) >= DEF_APPSIZEY){

  005d3	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?CloudHeight1@@3FA ; CloudHeight1
  005da	03 45 dc	 add	 eax, DWORD PTR _y$[ebp]
  005dd	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  005e3	7c 0b		 jl	 SHORT $LN39@SkyIslandD

; 417  : 				rc.bottom = DEF_APPSIZEY -y;

  005e5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DEF_APPSIZEY@@3HA ; DEF_APPSIZEY
  005ea	2b 45 dc	 sub	 eax, DWORD PTR _y$[ebp]
  005ed	89 45 c4	 mov	 DWORD PTR _rc$[ebp+12], eax
$LN39@SkyIslandD:

; 418  : 			}
; 419  : 			if( (rc.bottom-rc.top)>0 && (rc.right-rc.left)>0){

  005f0	8b 45 c4	 mov	 eax, DWORD PTR _rc$[ebp+12]
  005f3	2b 45 bc	 sub	 eax, DWORD PTR _rc$[ebp+4]
  005f6	85 c0		 test	 eax, eax
  005f8	7e 41		 jle	 SHORT $LN40@SkyIslandD
  005fa	8b 45 c0	 mov	 eax, DWORD PTR _rc$[ebp+8]
  005fd	2b 45 b8	 sub	 eax, DWORD PTR _rc$[ebp]
  00600	85 c0		 test	 eax, eax
  00602	7e 37		 jle	 SHORT $LN40@SkyIslandD

; 420  : 				lpDraw->lpBACKBUFFER->BltFast( x, y, lpsurCloud1, &rc, DDBLTFAST_WAIT|DDBLTFAST_SRCCOLORKEY);

  00604	8b f4		 mov	 esi, esp
  00606	6a 11		 push	 17			; 00000011H
  00608	8d 45 b8	 lea	 eax, DWORD PTR _rc$[ebp]
  0060b	50		 push	 eax
  0060c	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpsurCloud1@@3PAUIDirectDrawSurface@@A ; lpsurCloud1
  00612	51		 push	 ecx
  00613	8b 55 dc	 mov	 edx, DWORD PTR _y$[ebp]
  00616	52		 push	 edx
  00617	8b 45 e8	 mov	 eax, DWORD PTR _x$[ebp]
  0061a	50		 push	 eax
  0061b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00621	8b 51 0c	 mov	 edx, DWORD PTR [ecx+12]
  00624	a1 00 00 00 00	 mov	 eax, DWORD PTR ?lpDraw@@3PAUDIRECT_DRAW@@A ; lpDraw
  00629	8b 48 0c	 mov	 ecx, DWORD PTR [eax+12]
  0062c	8b 12		 mov	 edx, DWORD PTR [edx]
  0062e	51		 push	 ecx
  0062f	8b 42 1c	 mov	 eax, DWORD PTR [edx+28]
  00632	ff d0		 call	 eax
  00634	3b f4		 cmp	 esi, esp
  00636	e8 00 00 00 00	 call	 __RTC_CheckEsp
$LN40@SkyIslandD:
$LN1@SkyIslandD:

; 421  : #ifdef _READ16BITBMP
; 422  : 				if(g_bUseAlpha) lpDraw->lpBACKBUFFERSYS->BltFast( x, y, lpsurCloud1, &rc, DDBLTFAST_WAIT|DDBLTFAST_SRCCOLORKEY);
; 423  : #endif
; 424  : 
; 425  : 		}
; 426  : 	}
; 427  : }

  0063b	52		 push	 edx
  0063c	8b cd		 mov	 ecx, ebp
  0063e	50		 push	 eax
  0063f	8d 15 00 00 00
	00		 lea	 edx, DWORD PTR $LN50@SkyIslandD
  00645	e8 00 00 00 00	 call	 @_RTC_CheckStackVars@8
  0064a	58		 pop	 eax
  0064b	5a		 pop	 edx
  0064c	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  0064f	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00656	59		 pop	 ecx
  00657	5f		 pop	 edi
  00658	5e		 pop	 esi
  00659	5b		 pop	 ebx
  0065a	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0065d	33 cd		 xor	 ecx, ebp
  0065f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00664	81 c4 4c 01 00
	00		 add	 esp, 332		; 0000014cH
  0066a	3b ec		 cmp	 ebp, esp
  0066c	e8 00 00 00 00	 call	 __RTC_CheckEsp
  00671	8b e5		 mov	 esp, ebp
  00673	5d		 pop	 ebp
  00674	c3		 ret	 0
  00675	0f 1f 00	 npad	 3
$LN50@SkyIslandD:
  00678	04 00 00 00	 DD	 4
  0067c	00 00 00 00	 DD	 $LN49@SkyIslandD
$LN49@SkyIslandD:
  00680	b8 ff ff ff	 DD	 -72			; ffffffb8H
  00684	10 00 00 00	 DD	 16			; 00000010H
  00688	00 00 00 00	 DD	 $LN44@SkyIslandD
  0068c	ac ff ff ff	 DD	 -84			; ffffffacH
  00690	04 00 00 00	 DD	 4
  00694	00 00 00 00	 DD	 $LN45@SkyIslandD
  00698	a0 ff ff ff	 DD	 -96			; ffffffa0H
  0069c	02 00 00 00	 DD	 2
  006a0	00 00 00 00	 DD	 $LN46@SkyIslandD
  006a4	94 ff ff ff	 DD	 -108			; ffffff94H
  006a8	02 00 00 00	 DD	 2
  006ac	00 00 00 00	 DD	 $LN47@SkyIslandD
$LN47@SkyIslandD:
  006b0	68		 DB	 104			; 00000068H
  006b1	00		 DB	 0
$LN46@SkyIslandD:
  006b2	77		 DB	 119			; 00000077H
  006b3	00		 DB	 0
$LN45@SkyIslandD:
  006b4	6e		 DB	 110			; 0000006eH
  006b5	6f		 DB	 111			; 0000006fH
  006b6	00		 DB	 0
$LN44@SkyIslandD:
  006b7	72		 DB	 114			; 00000072H
  006b8	63		 DB	 99			; 00000063H
  006b9	00		 DB	 0
  006ba	66 90		 npad	 2
$LN52@SkyIslandD:
  006bc	00 00 00 00	 DD	 $LN12@SkyIslandD
  006c0	00 00 00 00	 DD	 $LN13@SkyIslandD
  006c4	00 00 00 00	 DD	 $LN14@SkyIslandD
  006c8	00 00 00 00	 DD	 $LN15@SkyIslandD
  006cc	00 00 00 00	 DD	 $LN16@SkyIslandD
  006d0	00 00 00 00	 DD	 $LN17@SkyIslandD
  006d4	00 00 00 00	 DD	 $LN18@SkyIslandD
  006d8	00 00 00 00	 DD	 $LN19@SkyIslandD
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?SkyIslandDraw@@YAXH@Z$0:
  00000	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??SkyIslandDraw@@YAXH@Z@4HA
  00005	e8 00 00 00 00	 call	 __Init_thread_abort
  0000a	59		 pop	 ecx
  0000b	c3		 ret	 0
__unwindfunclet$?SkyIslandDraw@@YAXH@Z$1:
  0000c	68 00 00 00 00	 push	 OFFSET ?$TSS1@?1??SkyIslandDraw@@YAXH@Z@4HA
  00011	e8 00 00 00 00	 call	 __Init_thread_abort
  00016	59		 pop	 ecx
  00017	c3		 ret	 0
__ehhandler$?SkyIslandDraw@@YAXH@Z:
  00018	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  0001c	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0001f	8b 8a b0 fe ff
	ff		 mov	 ecx, DWORD PTR [edx-336]
  00025	33 c8		 xor	 ecx, eax
  00027	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0002c	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  0002f	33 c8		 xor	 ecx, eax
  00031	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00036	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?SkyIslandDraw@@YAXH@Z
  0003b	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?SkyIslandDraw@@YAXH@Z ENDP				; SkyIslandDraw
END
