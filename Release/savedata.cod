; Listing generated by Microsoft (R) Optimizing Compiler Version 19.29.30133.0 

	TITLE	\\VBOXSVR\_stoneage\repos\ssm-sacli\Release\savedata.obj
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?savedataErrorCode@@3EA				; savedataErrorCode
PUBLIC	?sPetStatFlag@@3HA				; sPetStatFlag
PUBLIC	?fMapBgm@@3HA					; fMapBgm
PUBLIC	?sCharSide@@3HA					; sCharSide
_BSS	SEGMENT
?savedataErrorCode@@3EA DB 01H DUP (?)			; savedataErrorCode
	ALIGN	4

?sPetStatFlag@@3HA DD 01H DUP (?)			; sPetStatFlag
?fMapBgm@@3HA DD 01H DUP (?)				; fMapBgm
?sCharSide@@3HA DD 01H DUP (?)				; sCharSide
_BSS	ENDS
PUBLIC	?saveUserSetting@@YAHXZ				; saveUserSetting
PUBLIC	?loadUserSetting@@YAHXZ				; loadUserSetting
PUBLIC	?setUserSetting@@YAXH@Z				; setUserSetting
PUBLIC	?getUserSetting@@YAXH@Z				; getUserSetting
PUBLIC	?clearUserSetting@@YAXH@Z			; clearUserSetting
PUBLIC	?setUserSoundOption@@YAXXZ			; setUserSoundOption
PUBLIC	?getUserSoundOption@@YAXXZ			; getUserSoundOption
PUBLIC	?setUserChatOption@@YAXXZ			; setUserChatOption
PUBLIC	?getUserChatOption@@YAXXZ			; getUserChatOption
PUBLIC	?setUserInterfaceOption@@YAXXZ			; setUserInterfaceOption
PUBLIC	?getUserInterfaceOption@@YAXXZ			; getUserInterfaceOption
PUBLIC	?saveNowState@@YAHXZ				; saveNowState
PUBLIC	?loadNowState@@YAHXZ				; loadNowState
PUBLIC	?createSaveFile@@YAHXZ				; createSaveFile
PUBLIC	??_C@_0N@DGECLGHJ@explorer?4exe@		; `string'
PUBLIC	??_C@_03BFHAFKOB@wb?$CL@			; `string'
PUBLIC	??_C@_0BC@OGIKFLLL@data?2savedata?4dat@		; `string'
PUBLIC	??_C@_03CCKOKKND@rb?$CL@			; `string'
EXTRN	___report_rangecheckfailure:PROC
EXTRN	_fclose:PROC
EXTRN	_ferror:PROC
EXTRN	_fopen:PROC
EXTRN	_fread:PROC
EXTRN	_fwrite:PROC
EXTRN	_strstr:PROC
EXTRN	?jEncode@@YAXPADHH0PAHH@Z:PROC			; jEncode
EXTRN	?jDecode@@YAXPADHH0PAH@Z:PROC			; jDecode
EXTRN	__imp__CloseHandle@4:PROC
EXTRN	__imp__OpenProcess@12:PROC
EXTRN	?lssproto_PETST_send@@YAXHHH@Z:PROC		; lssproto_PETST_send
EXTRN	_Process32First@8:PROC
EXTRN	_Process32Next@8:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__chkstk:PROC
EXTRN	_memset:PROC
EXTRN	?MyChatBuffer@@3USTR_BUFFER@@A:BYTE		; MyChatBuffer
EXTRN	?NowMaxChatLine@@3HA:DWORD			; NowMaxChatLine
EXTRN	?NowMaxVoice@@3HA:DWORD				; NowMaxVoice
EXTRN	?pc@@3UPC@@A:BYTE				; pc
EXTRN	?selectPcNo@@3FA:WORD				; selectPcNo
EXTRN	?stereo_flg@@3HA:DWORD				; stereo_flg
EXTRN	?t_music_se_volume@@3HA:DWORD			; t_music_se_volume
EXTRN	?t_music_bgm_volume@@3HA:DWORD			; t_music_bgm_volume
EXTRN	?t_music_bgm_pitch@@3PADA:BYTE			; t_music_bgm_pitch
EXTRN	??λε??@@3HA:DWORD				; ?λε??
EXTRN	?MouseCursorFlag@@3HA:DWORD			; MouseCursorFlag
EXTRN	?sockfd@@3IA:DWORD				; sockfd
EXTRN	?hProcessSnap@@3PAXA:DWORD			; hProcessSnap
EXTRN	?hParentProcess@@3PAXA:DWORD			; hParentProcess
EXTRN	?dwPID@@3KA:DWORD				; dwPID
EXTRN	?pe32@@3UtagPROCESSENTRY32@@A:BYTE		; pe32
EXTRN	___security_cookie:DWORD
_BSS	SEGMENT
?savedatabuf@@3PAEA DB 07fH DUP (?)			; savedatabuf
_BSS	ENDS
;	COMDAT ??_C@_03CCKOKKND@rb?$CL@
CONST	SEGMENT
??_C@_03CCKOKKND@rb?$CL@ DB 'rb+', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BC@OGIKFLLL@data?2savedata?4dat@
CONST	SEGMENT
??_C@_0BC@OGIKFLLL@data?2savedata?4dat@ DB 'data\savedata.dat', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_03BFHAFKOB@wb?$CL@
CONST	SEGMENT
??_C@_03BFHAFKOB@wb?$CL@ DB 'wb+', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@DGECLGHJ@explorer?4exe@
CONST	SEGMENT
??_C@_0N@DGECLGHJ@explorer?4exe@ DB 'explorer.exe', 00H	; `string'
CONST	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?createSaveFile@@YAHXZ
_TEXT	SEGMENT
_writebufferlen$ = -4008				; size = 4
_writebuffer$ = -4004					; size = 4000
__$ArrayPad$ = -4					; size = 4
?createSaveFile@@YAHXZ PROC				; createSaveFile, COMDAT

; 284  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a8 0f 00
	00		 sub	 esp, 4008		; 00000fa8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi

; 285  : 	FILE *fp;
; 286  : 	char writebuffer[4000];
; 287  : 	int writebufferlen;
; 288  : 	int i;
; 289  : 
; 290  : 	// ?????????????
; 291  : 	memset( savedatabuf, 0, SAVEDATA_SIZE );

  00014	6a 7f		 push	 127			; 0000007fH
  00016	6a 00		 push	 0
  00018	68 00 00 00 00	 push	 OFFSET ?savedatabuf@@3PAEA
  0001d	e8 00 00 00 00	 call	 _memset
  00022	0f 10 05 00 00
	00 00		 movups	 xmm0, XMMWORD PTR ?t_music_bgm_pitch@@3PADA

; 292  : 
; 293  : 	// ????????????ξΌ????
; 294  : 	*((unsigned short *)savedatabuf+SAVEDATA_VER) = SAVEDATA_VERSION;

  00029	b8 06 00 00 00	 mov	 eax, 6

; 295  : 
; 296  : 	// ??ξ–±?ξ“†ξ‹
; 297  : 	savedatabuf[STEREO_FLAG]	= (unsigned char)stereo_flg;
; 298  : 	savedatabuf[SE_VOL]			= (unsigned char)t_music_se_volume;
; 299  : 	savedatabuf[BGM_VOL]		= (unsigned char)t_music_bgm_volume;
; 300  : 	for( i = 0; i < 16; i++ )
; 301  : 		savedatabuf[BGM_PITCH+i] = t_music_bgm_pitch[i];
; 302  : 
; 303  : 	savedatabuf[CHAT_LINE]		= 10;

  0002e	66 c7 05 38 00
	00 00 0a 03	 mov	 WORD PTR ?savedatabuf@@3PAEA+56, 778 ; 0000030aH
  00037	66 a3 00 00 00
	00		 mov	 WORD PTR ?savedatabuf@@3PAEA, ax
  0003d	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?stereo_flg@@3HA
  00044	a2 24 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+36, al
  00049	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?t_music_se_volume@@3HA
  00050	a2 25 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+37, al
  00055	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?t_music_bgm_volume@@3HA

; 304  : 	savedatabuf[CHAT_AREA]		= DEF_VOICE;
; 305  : 
; 306  : 
; 307  : 	// ??????????
; 308  : 	jEncode( (char *)savedatabuf, SAVEDATA_SIZE, 0,

  0005c	68 a0 0f 00 00	 push	 4000			; 00000fa0H
  00061	a2 26 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+38, al
  00066	8d 85 58 f0 ff
	ff		 lea	 eax, DWORD PTR _writebufferlen$[ebp]
  0006c	50		 push	 eax
  0006d	8d 85 5c f0 ff
	ff		 lea	 eax, DWORD PTR _writebuffer$[ebp]
  00073	50		 push	 eax
  00074	6a 00		 push	 0
  00076	6a 7f		 push	 127			; 0000007fH
  00078	68 00 00 00 00	 push	 OFFSET ?savedatabuf@@3PAEA
  0007d	0f 11 05 27 00
	00 00		 movups	 XMMWORD PTR ?savedatabuf@@3PAEA+39, xmm0
  00084	e8 00 00 00 00	 call	 ?jEncode@@YAXPADHH0PAHH@Z ; jEncode

; 309  : 		writebuffer, &writebufferlen, sizeof( writebuffer ) );
; 310  : #ifndef PROFILE_TEST
; 311  : 	if( (fp = fopen( SAVEFILE_NAME, "wb+" )) == NULL )

  00089	68 00 00 00 00	 push	 OFFSET ??_C@_03BFHAFKOB@wb?$CL@
  0008e	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OGIKFLLL@data?2savedata?4dat@
  00093	e8 00 00 00 00	 call	 _fopen
  00098	8b f0		 mov	 esi, eax
  0009a	83 c4 2c	 add	 esp, 44			; 0000002cH
  0009d	85 f6		 test	 esi, esi
  0009f	74 3d		 je	 SHORT $LN16@createSave

; 312  : #else
; 313  : 	if( (fp = fopen( "d:\\sa\\data\\savedata.dat", "wb+" )) == NULL )
; 314  : #endif
; 315  : 	{
; 316  : 		return FALSE;
; 317  : 	}
; 318  : 	if( fwrite( writebuffer, 1, writebufferlen, fp ) < (unsigned int)writebufferlen )

  000a1	56		 push	 esi
  000a2	ff b5 58 f0 ff
	ff		 push	 DWORD PTR _writebufferlen$[ebp]
  000a8	8d 85 5c f0 ff
	ff		 lea	 eax, DWORD PTR _writebuffer$[ebp]
  000ae	6a 01		 push	 1
  000b0	50		 push	 eax
  000b1	e8 00 00 00 00	 call	 _fwrite
  000b6	83 c4 10	 add	 esp, 16			; 00000010H
  000b9	3b 85 58 f0 ff
	ff		 cmp	 eax, DWORD PTR _writebufferlen$[ebp]
  000bf	72 1d		 jb	 SHORT $LN16@createSave

; 319  : 	{
; 320  : 		return FALSE;
; 321  : 	}
; 322  : 
; 323  : 	fclose( fp );

  000c1	56		 push	 esi
  000c2	e8 00 00 00 00	 call	 _fclose
  000c7	83 c4 04	 add	 esp, 4

; 324  : 
; 325  : 	return TRUE;

  000ca	b8 01 00 00 00	 mov	 eax, 1
  000cf	5e		 pop	 esi

; 326  : }

  000d0	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d3	33 cd		 xor	 ecx, ebp
  000d5	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000da	8b e5		 mov	 esp, ebp
  000dc	5d		 pop	 ebp
  000dd	c3		 ret	 0
$LN16@createSave:
  000de	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000e1	33 c0		 xor	 eax, eax
  000e3	33 cd		 xor	 ecx, ebp
  000e5	5e		 pop	 esi
  000e6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000eb	8b e5		 mov	 esp, ebp
  000ed	5d		 pop	 ebp
  000ee	c3		 ret	 0
?createSaveFile@@YAHXZ ENDP				; createSaveFile
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?loadNowState@@YAHXZ
_TEXT	SEGMENT
_tmpsavedatalen$ = -4008				; size = 4
_readbuffer$ = -4004					; size = 4000
__$ArrayPad$ = -4					; size = 4
?loadNowState@@YAHXZ PROC				; loadNowState, COMDAT

; 208  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec a8 0f 00
	00		 sub	 esp, 4008		; 00000fa8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	56		 push	 esi

; 209  : 	FILE *fp;
; 210  : 	char readbuffer[4000];
; 211  : 	int readbufferlen;
; 212  : 	int tmpsavedatalen;
; 213  : 	savedataErrorCode = 0;
; 214  : #ifndef PROFILE_TEST
; 215  : 	if( (fp = fopen( SAVEFILE_NAME, "rb+" )) == NULL ){

  00014	68 00 00 00 00	 push	 OFFSET ??_C@_03CCKOKKND@rb?$CL@
  00019	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OGIKFLLL@data?2savedata?4dat@
  0001e	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 0 ; savedataErrorCode
  00025	e8 00 00 00 00	 call	 _fopen
  0002a	8b f0		 mov	 esi, eax
  0002c	83 c4 08	 add	 esp, 8
  0002f	85 f6		 test	 esi, esi
  00031	75 4d		 jne	 SHORT $LN4@loadNowSta

; 216  : #else
; 217  : 	if( (fp = fopen( "d:\\sa\\data\\savedata.dat", "rb+" )) == NULL ){
; 218  : #endif
; 219  : 		if( createSaveFile() == FALSE ){

  00033	e8 00 00 00 00	 call	 ?createSaveFile@@YAHXZ	; createSaveFile
  00038	85 c0		 test	 eax, eax
  0003a	75 16		 jne	 SHORT $LN3@loadNowSta

; 220  : 			savedataErrorCode = 1;

  0003c	c6 05 00 00 00
	00 01		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 1 ; savedataErrorCode
  00043	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  00044	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00047	33 cd		 xor	 ecx, ebp
  00049	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0004e	8b e5		 mov	 esp, ebp
  00050	5d		 pop	 ebp
  00051	c3		 ret	 0
$LN3@loadNowSta:

; 221  : 			return FALSE;
; 222  : 		}
; 223  : 		if( (fp = fopen( SAVEFILE_NAME, "rb+" ))==NULL ){

  00052	68 00 00 00 00	 push	 OFFSET ??_C@_03CCKOKKND@rb?$CL@
  00057	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OGIKFLLL@data?2savedata?4dat@
  0005c	e8 00 00 00 00	 call	 _fopen
  00061	8b f0		 mov	 esi, eax
  00063	83 c4 08	 add	 esp, 8
  00066	85 f6		 test	 esi, esi
  00068	75 16		 jne	 SHORT $LN4@loadNowSta

; 224  : 			savedataErrorCode = 2;

  0006a	c6 05 00 00 00
	00 02		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 2 ; savedataErrorCode
  00071	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  00072	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00075	33 cd		 xor	 ecx, ebp
  00077	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0007c	8b e5		 mov	 esp, ebp
  0007e	5d		 pop	 ebp
  0007f	c3		 ret	 0
$LN4@loadNowSta:
  00080	57		 push	 edi

; 225  : 			return FALSE;
; 226  : 		}
; 227  : 	}
; 228  : 	readbufferlen = fread( readbuffer, 1, sizeof( readbuffer ), fp );

  00081	56		 push	 esi
  00082	68 a0 0f 00 00	 push	 4000			; 00000fa0H
  00087	8d 85 5c f0 ff
	ff		 lea	 eax, DWORD PTR _readbuffer$[ebp]
  0008d	6a 01		 push	 1
  0008f	50		 push	 eax
  00090	e8 00 00 00 00	 call	 _fread

; 229  : 	if( ferror( fp ) )

  00095	56		 push	 esi
  00096	8b f8		 mov	 edi, eax
  00098	e8 00 00 00 00	 call	 _ferror
  0009d	83 c4 14	 add	 esp, 20			; 00000014H
  000a0	56		 push	 esi
  000a1	85 c0		 test	 eax, eax
  000a3	74 21		 je	 SHORT $LN5@loadNowSta

; 230  : 	{
; 231  : 		// ξ‡??????
; 232  : 		savedataErrorCode = 3;

  000a5	c6 05 00 00 00
	00 03		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 3 ; savedataErrorCode

; 233  : 		fclose( fp );

  000ac	e8 00 00 00 00	 call	 _fclose
  000b1	83 c4 04	 add	 esp, 4

; 258  : 	}
; 259  : 	else
; 260  : #endif
; 261  : 
; 262  : 	if( tmpsavedatalen != SAVEDATA_SIZE )
; 263  : 	{
; 264  : 		// ??????????
; 265  : 		savedataErrorCode = 4;
; 266  : 		return FALSE;

  000b4	33 c0		 xor	 eax, eax
  000b6	5f		 pop	 edi
  000b7	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  000b8	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000bb	33 cd		 xor	 ecx, ebp
  000bd	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000c2	8b e5		 mov	 esp, ebp
  000c4	5d		 pop	 ebp
  000c5	c3		 ret	 0
$LN5@loadNowSta:

; 234  : 		return FALSE;
; 235  : 	}
; 236  : 	fclose( fp );

  000c6	e8 00 00 00 00	 call	 _fclose

; 237  : 
; 238  : 	jDecode( readbuffer, readbufferlen, 0, (char *)savedatabuf, &tmpsavedatalen );

  000cb	8d 85 58 f0 ff
	ff		 lea	 eax, DWORD PTR _tmpsavedatalen$[ebp]
  000d1	50		 push	 eax
  000d2	68 00 00 00 00	 push	 OFFSET ?savedatabuf@@3PAEA
  000d7	6a 00		 push	 0
  000d9	8d 85 5c f0 ff
	ff		 lea	 eax, DWORD PTR _readbuffer$[ebp]
  000df	57		 push	 edi
  000e0	50		 push	 eax
  000e1	e8 00 00 00 00	 call	 ?jDecode@@YAXPADHH0PAH@Z ; jDecode

; 239  : 
; 240  : #if 1
; 241  : 	// ????????????????????ξ‰???
; 242  : 	if( tmpsavedatalen == 57
; 243  : 	 && *((unsigned short *)savedatabuf+SAVEDATA_VER) == 0x0004 )

  000e6	8b 85 58 f0 ff
	ff		 mov	 eax, DWORD PTR _tmpsavedatalen$[ebp]
  000ec	83 c4 18	 add	 esp, 24			; 00000018H
  000ef	83 f8 39	 cmp	 eax, 57			; 00000039H
  000f2	75 36		 jne	 SHORT $LN6@loadNowSta
  000f4	66 83 3d 00 00
	00 00 04	 cmp	 WORD PTR ?savedatabuf@@3PAEA, 4
  000fc	0f 85 80 00 00
	00		 jne	 $LN15@loadNowSta

; 244  : 	{
; 245  : 		savedatabuf[SAVEDATA_VER] = SAVEDATA_VERSION;

  00102	c6 05 00 00 00
	00 06		 mov	 BYTE PTR ?savedatabuf@@3PAEA, 6

; 246  : 		savedatabuf[CHAT_AREA] = 3;

  00109	c6 05 39 00 00
	00 03		 mov	 BYTE PTR ?savedatabuf@@3PAEA+57, 3

; 247  : 		saveNowState();

  00110	e8 00 00 00 00	 call	 ?saveNowState@@YAHXZ	; saveNowState
  00115	5f		 pop	 edi

; 248  : 		return TRUE;

  00116	b8 01 00 00 00	 mov	 eax, 1
  0011b	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  0011c	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0011f	33 cd		 xor	 ecx, ebp
  00121	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00126	8b e5		 mov	 esp, ebp
  00128	5d		 pop	 ebp
  00129	c3		 ret	 0
$LN6@loadNowSta:

; 249  : 	}
; 250  : 	else
; 251  : 	if( tmpsavedatalen == 127
; 252  : 	 && *((unsigned short *)savedatabuf+SAVEDATA_VER) == 0x0005 )

  0012a	83 f8 7f	 cmp	 eax, 127		; 0000007fH
  0012d	75 53		 jne	 SHORT $LN15@loadNowSta
  0012f	66 a1 00 00 00
	00		 mov	 ax, WORD PTR ?savedatabuf@@3PAEA
  00135	66 83 f8 05	 cmp	 ax, 5
  00139	75 28		 jne	 SHORT $LN10@loadNowSta

; 253  : 	{
; 254  : 		savedatabuf[SAVEDATA_VER] = SAVEDATA_VERSION;

  0013b	c6 05 00 00 00
	00 06		 mov	 BYTE PTR ?savedatabuf@@3PAEA, 6

; 255  : 		savedatabuf[MOUSE_CUR_SEL] = 0;

  00142	c6 05 3a 00 00
	00 00		 mov	 BYTE PTR ?savedatabuf@@3PAEA+58, 0

; 256  : 		saveNowState();

  00149	e8 00 00 00 00	 call	 ?saveNowState@@YAHXZ	; saveNowState
$LN11@loadNowSta:

; 257  : 		return TRUE;

  0014e	5f		 pop	 edi
  0014f	b8 01 00 00 00	 mov	 eax, 1
  00154	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  00155	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00158	33 cd		 xor	 ecx, ebp
  0015a	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0015f	8b e5		 mov	 esp, ebp
  00161	5d		 pop	 ebp
  00162	c3		 ret	 0
$LN10@loadNowSta:

; 267  : 	}
; 268  : 
; 269  : 	// ????????????????
; 270  : 	if( *((unsigned short *)savedatabuf+SAVEDATA_VER) != SAVEDATA_VERSION )

  00163	66 83 f8 06	 cmp	 ax, 6
  00167	74 e5		 je	 SHORT $LN11@loadNowSta

; 271  : 	{
; 272  : 		// ???????
; 273  : 		savedataErrorCode = 5;

  00169	5f		 pop	 edi
  0016a	c6 05 00 00 00
	00 05		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 5 ; savedataErrorCode
  00171	33 c0		 xor	 eax, eax
  00173	5e		 pop	 esi

; 274  : 		return FALSE;
; 275  : 	}
; 276  : 
; 277  : 	return TRUE;
; 278  : }

  00174	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00177	33 cd		 xor	 ecx, ebp
  00179	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0017e	8b e5		 mov	 esp, ebp
  00180	5d		 pop	 ebp
  00181	c3		 ret	 0
$LN15@loadNowSta:
  00182	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00185	33 c0		 xor	 eax, eax
  00187	5f		 pop	 edi
  00188	33 cd		 xor	 ecx, ebp
  0018a	c6 05 00 00 00
	00 04		 mov	 BYTE PTR ?savedataErrorCode@@3EA, 4 ; savedataErrorCode
  00191	5e		 pop	 esi
  00192	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00197	8b e5		 mov	 esp, ebp
  00199	5d		 pop	 ebp
  0019a	c3		 ret	 0
?loadNowState@@YAHXZ ENDP				; loadNowState
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?saveNowState@@YAHXZ
_TEXT	SEGMENT
_writebufferlen$ = -4136				; size = 4
_writebuffer$ = -4132					; size = 4000
_tmpsavedatabuf$ = -132					; size = 127
__$ArrayPad$ = -4					; size = 4
?saveNowState@@YAHXZ PROC				; saveNowState, COMDAT

; 150  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	b8 28 10 00 00	 mov	 eax, 4136		; 00001028H
  00008	e8 00 00 00 00	 call	 __chkstk
  0000d	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00012	33 c5		 xor	 eax, ebp
  00014	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 151  : #ifdef __NEW_CLIENT
; 152  : 	extern HANDLE hProcessSnap, hParentProcess;
; 153  : 	extern DWORD dwPID;
; 154  : 	extern PROCESSENTRY32 pe32;
; 155  : 	if( dwPID){

  00017	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?dwPID@@3KA, 0 ; dwPID
  0001e	0f 84 83 00 00
	00		 je	 $LN8@saveNowSta

; 156  : 		pe32.dwSize = sizeof(PROCESSENTRY32);
; 157  : 		if( Process32First( hProcessSnap, &pe32)){ 

  00024	68 00 00 00 00	 push	 OFFSET ?pe32@@3UtagPROCESSENTRY32@@A ; pe32
  00029	ff 35 00 00 00
	00		 push	 DWORD PTR ?hProcessSnap@@3PAXA ; hProcessSnap
  0002f	c7 05 00 00 00
	00 28 01 00 00	 mov	 DWORD PTR ?pe32@@3UtagPROCESSENTRY32@@A, 296 ; 00000128H
  00039	e8 00 00 00 00	 call	 _Process32First@8
  0003e	85 c0		 test	 eax, eax
  00040	74 5b		 je	 SHORT $LN3@saveNowSta
$LL4@saveNowSta:

; 158  : 			do{
; 159  : 				if( pe32.th32ProcessID == dwPID){

  00042	a1 08 00 00 00	 mov	 eax, DWORD PTR ?pe32@@3UtagPROCESSENTRY32@@A+8
  00047	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?dwPID@@3KA ; dwPID
  0004d	74 16		 je	 SHORT $LN19@saveNowSta

; 165  : 					}
; 166  : 					break;
; 167  : 				}
; 168  : 			}while( Process32Next( hProcessSnap, &pe32));

  0004f	68 00 00 00 00	 push	 OFFSET ?pe32@@3UtagPROCESSENTRY32@@A ; pe32
  00054	ff 35 00 00 00
	00		 push	 DWORD PTR ?hProcessSnap@@3PAXA ; hProcessSnap
  0005a	e8 00 00 00 00	 call	 _Process32Next@8
  0005f	85 c0		 test	 eax, eax
  00061	75 df		 jne	 SHORT $LL4@saveNowSta
  00063	eb 38		 jmp	 SHORT $LN3@saveNowSta
$LN19@saveNowSta:
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 520  :         return const_cast<char*>(strstr(static_cast<char const*>(_String), _SubString));

  00065	68 00 00 00 00	 push	 OFFSET ??_C@_0N@DGECLGHJ@explorer?4exe@
  0006a	68 24 00 00 00	 push	 OFFSET ?pe32@@3UtagPROCESSENTRY32@@A+36
  0006f	e8 00 00 00 00	 call	 _strstr
  00074	83 c4 08	 add	 esp, 8
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp

; 160  : 					if( !strstr( pe32.szExeFile, "explorer.exe") && (hParentProcess = OpenProcess( PROCESS_ALL_ACCESS, FALSE, dwPID))){

  00077	85 c0		 test	 eax, eax
  00079	75 22		 jne	 SHORT $LN3@saveNowSta
  0007b	ff 35 00 00 00
	00		 push	 DWORD PTR ?dwPID@@3KA	; dwPID
  00081	50		 push	 eax
  00082	68 ff ff 1f 00	 push	 2097151			; 001fffffH
  00087	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__OpenProcess@12
  0008d	a3 00 00 00 00	 mov	 DWORD PTR ?hParentProcess@@3PAXA, eax ; hParentProcess
  00092	85 c0		 test	 eax, eax
  00094	74 07		 je	 SHORT $LN3@saveNowSta

; 161  : 	#ifndef NO_TERMINATER
; 162  : 				//		TerminateProcess( hParentProcess, 0);
; 163  : 	#endif
; 164  : 						CloseHandle( hParentProcess);

  00096	50		 push	 eax
  00097	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__CloseHandle@4
$LN3@saveNowSta:

; 169  : 		}
; 170  : 		dwPID = 0;

  0009d	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?dwPID@@3KA, 0 ; dwPID
$LN8@saveNowSta:
  000a7	56		 push	 esi
  000a8	57		 push	 edi

; 171  : 	}
; 172  : #endif
; 173  : 	FILE *fp;
; 174  : 	char writebuffer[4000];
; 175  : 	int writebufferlen;
; 176  : 	unsigned char tmpsavedatabuf[SAVEDATA_SIZE];
; 177  : 	int i;
; 178  : 
; 179  : 	for( i = 0; i < SAVEDATA_SIZE; i++ )

  000a9	b9 1f 00 00 00	 mov	 ecx, 31			; 0000001fH
  000ae	8d bd 7c ff ff
	ff		 lea	 edi, DWORD PTR _tmpsavedatabuf$[ebp]
  000b4	be 00 00 00 00	 mov	 esi, OFFSET ?savedatabuf@@3PAEA

; 180  : 	{
; 181  : 		tmpsavedatabuf[i] = savedatabuf[i];
; 182  : 	}
; 183  : 
; 184  : 	// ??????????
; 185  : 	jEncode( (char *)tmpsavedatabuf, SAVEDATA_SIZE, 0,

  000b9	8d 85 d8 ef ff
	ff		 lea	 eax, DWORD PTR _writebufferlen$[ebp]
  000bf	f3 a5		 rep movsd
  000c1	68 a0 0f 00 00	 push	 4000			; 00000fa0H
  000c6	50		 push	 eax
  000c7	8d 85 dc ef ff
	ff		 lea	 eax, DWORD PTR _writebuffer$[ebp]
  000cd	50		 push	 eax
  000ce	66 a5		 movsw
  000d0	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _tmpsavedatabuf$[ebp]
  000d6	6a 00		 push	 0
  000d8	6a 7f		 push	 127			; 0000007fH
  000da	50		 push	 eax
  000db	a4		 movsb
  000dc	e8 00 00 00 00	 call	 ?jEncode@@YAXPADHH0PAHH@Z ; jEncode

; 186  : 		writebuffer, &writebufferlen, sizeof( writebuffer ) );
; 187  : 
; 188  : 	// ??????ξ•ξ”Ό
; 189  : 	if( (fp = fopen( SAVEFILE_NAME, "wb+" )) == NULL )

  000e1	68 00 00 00 00	 push	 OFFSET ??_C@_03BFHAFKOB@wb?$CL@
  000e6	68 00 00 00 00	 push	 OFFSET ??_C@_0BC@OGIKFLLL@data?2savedata?4dat@
  000eb	e8 00 00 00 00	 call	 _fopen
  000f0	8b f0		 mov	 esi, eax
  000f2	83 c4 20	 add	 esp, 32			; 00000020H
  000f5	85 f6		 test	 esi, esi
  000f7	74 3e		 je	 SHORT $LN29@saveNowSta

; 190  : 	{
; 191  : 		return FALSE;
; 192  : 	}
; 193  : 	if( fwrite( writebuffer, 1, writebufferlen, fp ) < (unsigned int)writebufferlen )

  000f9	56		 push	 esi
  000fa	ff b5 d8 ef ff
	ff		 push	 DWORD PTR _writebufferlen$[ebp]
  00100	8d 85 dc ef ff
	ff		 lea	 eax, DWORD PTR _writebuffer$[ebp]
  00106	6a 01		 push	 1
  00108	50		 push	 eax
  00109	e8 00 00 00 00	 call	 _fwrite
  0010e	83 c4 10	 add	 esp, 16			; 00000010H
  00111	3b 85 d8 ef ff
	ff		 cmp	 eax, DWORD PTR _writebufferlen$[ebp]
  00117	72 1e		 jb	 SHORT $LN29@saveNowSta

; 194  : 	{
; 195  : 		return FALSE;
; 196  : 	}
; 197  : 	fclose( fp );

  00119	56		 push	 esi
  0011a	e8 00 00 00 00	 call	 _fclose
  0011f	83 c4 04	 add	 esp, 4

; 198  : 
; 199  : 	return TRUE;

  00122	b8 01 00 00 00	 mov	 eax, 1
  00127	5f		 pop	 edi

; 200  : }

  00128	5e		 pop	 esi
  00129	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0012c	33 cd		 xor	 ecx, ebp
  0012e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00133	8b e5		 mov	 esp, ebp
  00135	5d		 pop	 ebp
  00136	c3		 ret	 0
$LN29@saveNowSta:
  00137	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0013a	33 c0		 xor	 eax, eax
  0013c	5f		 pop	 edi
  0013d	33 cd		 xor	 ecx, ebp
  0013f	5e		 pop	 esi
  00140	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00145	8b e5		 mov	 esp, ebp
  00147	5d		 pop	 ebp
  00148	c3		 ret	 0
?saveNowState@@YAHXZ ENDP				; saveNowState
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?getUserInterfaceOption@@YAXXZ
_TEXT	SEGMENT
?getUserInterfaceOption@@YAXXZ PROC			; getUserInterfaceOption, COMDAT

; 488  : 	MouseCursorFlag =  (int)savedatabuf[MOUSE_CUR_SEL];

  00000	0f b6 05 3a 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+58
  00007	a3 00 00 00 00	 mov	 DWORD PTR ?MouseCursorFlag@@3HA, eax ; MouseCursorFlag

; 489  : }

  0000c	c3		 ret	 0
?getUserInterfaceOption@@YAXXZ ENDP			; getUserInterfaceOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?setUserInterfaceOption@@YAXXZ
_TEXT	SEGMENT
?setUserInterfaceOption@@YAXXZ PROC			; setUserInterfaceOption, COMDAT

; 481  : 	savedatabuf[MOUSE_CUR_SEL] = (unsigned char)MouseCursorFlag;

  00000	a0 00 00 00 00	 mov	 al, BYTE PTR ?MouseCursorFlag@@3HA
  00005	a2 3a 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+58, al

; 482  : }

  0000a	c3		 ret	 0
?setUserInterfaceOption@@YAXXZ ENDP			; setUserInterfaceOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?getUserChatOption@@YAXXZ
_TEXT	SEGMENT
?getUserChatOption@@YAXXZ PROC				; getUserChatOption, COMDAT

; 472  : 	MyChatBuffer.color	= savedatabuf[CHAT_COLOR];			// ????ξ°?ξ‘‘

  00000	a0 37 00 00 00	 mov	 al, BYTE PTR ?savedatabuf@@3PAEA+55
  00005	a2 08 01 00 00	 mov	 BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+264, al

; 473  : 	NowMaxChatLine		= (int)savedatabuf[CHAT_LINE];		// ??????

  0000a	0f b6 05 38 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+56
  00011	a3 00 00 00 00	 mov	 DWORD PTR ?NowMaxChatLine@@3HA, eax ; NowMaxChatLine

; 474  : 	NowMaxVoice			= savedatabuf[CHAT_AREA];			// ????ξ?

  00016	0f b6 05 39 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+57
  0001d	a3 00 00 00 00	 mov	 DWORD PTR ?NowMaxVoice@@3HA, eax ; NowMaxVoice

; 475  : }

  00022	c3		 ret	 0
?getUserChatOption@@YAXXZ ENDP				; getUserChatOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?setUserChatOption@@YAXXZ
_TEXT	SEGMENT
?setUserChatOption@@YAXXZ PROC				; setUserChatOption, COMDAT

; 463  : 	savedatabuf[CHAT_COLOR]		= MyChatBuffer.color;				// ????ξ°?ξ‘‘

  00000	0f b6 05 08 01
	00 00		 movzx	 eax, BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+264
  00007	a2 37 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+55, al

; 464  : 	savedatabuf[CHAT_LINE]		= (unsigned char)NowMaxChatLine;	// ??????

  0000c	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?NowMaxChatLine@@3HA
  00013	a2 38 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+56, al

; 465  : 	savedatabuf[CHAT_AREA]		= NowMaxVoice;						// ????ξ?

  00018	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?NowMaxVoice@@3HA
  0001f	a2 39 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+57, al

; 466  : }

  00024	c3		 ret	 0
?setUserChatOption@@YAXXZ ENDP				; setUserChatOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?getUserSoundOption@@YAXXZ
_TEXT	SEGMENT
?getUserSoundOption@@YAXXZ PROC				; getUserSoundOption, COMDAT

; 447  : 	int i;
; 448  : 
; 449  : 	stereo_flg			= (int)savedatabuf[STEREO_FLAG];	// ????ξ“?ξ•????

  00000	0f b6 05 24 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+36
  00007	0f 10 05 27 00
	00 00		 movups	 xmm0, XMMWORD PTR ?savedatabuf@@3PAEA+39
  0000e	a3 00 00 00 00	 mov	 DWORD PTR ?stereo_flg@@3HA, eax ; stereo_flg

; 450  : 	t_music_se_volume	= (int)savedatabuf[SE_VOL];			// SE?????

  00013	0f b6 05 25 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+37
  0001a	a3 00 00 00 00	 mov	 DWORD PTR ?t_music_se_volume@@3HA, eax ; t_music_se_volume

; 451  : 	t_music_bgm_volume	= (int)savedatabuf[BGM_VOL];		// BGM?????

  0001f	0f b6 05 26 00
	00 00		 movzx	 eax, BYTE PTR ?savedatabuf@@3PAEA+38
  00026	a3 00 00 00 00	 mov	 DWORD PTR ?t_music_bgm_volume@@3HA, eax ; t_music_bgm_volume

; 452  : #ifdef _NB_CANCEL_BGM
; 453  : 	ε£°ι³εΌ€ε…³ = (savedatabuf[BGM_VOL] & 0x80);

  0002b	25 80 00 00 00	 and	 eax, 128		; 00000080H
  00030	a3 00 00 00 00	 mov	 DWORD PTR ??λε??@@3HA, eax ; ?λε??
  00035	0f 11 05 00 00
	00 00		 movups	 XMMWORD PTR ?t_music_bgm_pitch@@3PADA, xmm0

; 454  : #endif
; 455  : 	for( i = 0; i < 16; i++ )								// BGM???
; 456  : 		t_music_bgm_pitch[i] = savedatabuf[BGM_PITCH+i];
; 457  : }

  0003c	c3		 ret	 0
?getUserSoundOption@@YAXXZ ENDP				; getUserSoundOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?setUserSoundOption@@YAXXZ
_TEXT	SEGMENT
?setUserSoundOption@@YAXXZ PROC				; setUserSoundOption, COMDAT

; 427  : 	int i;
; 428  : 
; 429  : 	savedatabuf[STEREO_FLAG]	= (unsigned char)stereo_flg;		// ????ξ“?ξ•????
; 430  : 	savedatabuf[SE_VOL]			= (unsigned char)t_music_se_volume;	// SE?????
; 431  : 	savedatabuf[BGM_VOL]		= (unsigned char)t_music_bgm_volume;// BGM?????
; 432  : #ifdef _NB_CANCEL_BGM
; 433  : 	if (ε£°ι³εΌ€ε…³){

  00000	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ??λε??@@3HA, 0 ; ?λε??
  00007	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?stereo_flg@@3HA
  0000e	0f 10 05 00 00
	00 00		 movups	 xmm0, XMMWORD PTR ?t_music_bgm_pitch@@3PADA
  00015	a2 24 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+36, al
  0001a	0f b6 05 00 00
	00 00		 movzx	 eax, BYTE PTR ?t_music_se_volume@@3HA
  00021	a2 25 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+37, al
  00026	a0 00 00 00 00	 mov	 al, BYTE PTR ?t_music_bgm_volume@@3HA
  0002b	0f 11 05 27 00
	00 00		 movups	 XMMWORD PTR ?savedatabuf@@3PAEA+39, xmm0
  00032	74 02		 je	 SHORT $LN5@setUserSou

; 434  : 		savedatabuf[BGM_VOL] = (unsigned char)(t_music_bgm_volume | 0x80);		

  00034	0c 80		 or	 al, 128			; 00000080H
$LN5@setUserSou:

; 435  : 	}else{
; 436  : 		savedatabuf[BGM_VOL] = (unsigned char)t_music_bgm_volume;// BGM?????
; 437  : 	}
; 438  : #endif
; 439  : 	for( i = 0; i < 16; i++ )										// BGM???
; 440  : 		savedatabuf[BGM_PITCH+i] = t_music_bgm_pitch[i];
; 441  : }

  00036	a2 26 00 00 00	 mov	 BYTE PTR ?savedatabuf@@3PAEA+38, al
  0003b	c3		 ret	 0
?setUserSoundOption@@YAXXZ ENDP				; setUserSoundOption
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?clearUserSetting@@YAXH@Z
_TEXT	SEGMENT
_no$ = 8						; size = 4
?clearUserSetting@@YAXH@Z PROC				; clearUserSetting, COMDAT

; 407  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 408  : 	int i;
; 409  : 
; 410  : 	if( no < 0 || MAXCHARACTER <= no )

  00003	8b 45 08	 mov	 eax, DWORD PTR _no$[ebp]
  00006	83 f8 01	 cmp	 eax, 1
  00009	77 28		 ja	 SHORT $LN6@clearUserS

; 411  : 		return;
; 412  : 
; 413  : 	pc.battlePetNo = -1;

  0000b	83 c9 ff	 or	 ecx, -1

; 414  : 
; 415  : 	// ξ“–ξ™¬ξΆ???????
; 416  : 	// ξ“–ξ™¬ξΆ?ξ“±ξ•¶??????
; 417  : 	for( i = 0; i < MAX_PET; i++ )

  0000e	8d 04 80	 lea	 eax, DWORD PTR [eax+eax*4]
  00011	66 89 0d aa 00
	00 00		 mov	 WORD PTR ?pc@@3UPC@@A+170, cx
  00018	33 c9		 xor	 ecx, ecx
  0001a	83 c0 1a	 add	 eax, 26			; 0000001aH
  0001d	0f 1f 00	 npad	 3
$LL4@clearUserS:

; 418  : 	{
; 419  : 		savedatabuf[BA_SEL_PEN+MAX_PET*no+i] = 0x00;

  00020	83 f8 7f	 cmp	 eax, 127		; 0000007fH
  00023	73 10		 jae	 SHORT $LN8@clearUserS
  00025	c6 80 00 00 00
	00 00		 mov	 BYTE PTR ?savedatabuf@@3PAEA[eax], 0
  0002c	41		 inc	 ecx
  0002d	40		 inc	 eax
  0002e	83 f9 05	 cmp	 ecx, 5
  00031	7c ed		 jl	 SHORT $LL4@clearUserS
$LN6@clearUserS:

; 420  : 	}
; 421  : }

  00033	5d		 pop	 ebp
  00034	c3		 ret	 0
$LN8@clearUserS:

; 418  : 	{
; 419  : 		savedatabuf[BA_SEL_PEN+MAX_PET*no+i] = 0x00;

  00035	e9 00 00 00 00	 jmp	 ___report_rangecheckfailure
?clearUserSetting@@YAXH@Z ENDP				; clearUserSetting
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?getUserSetting@@YAXH@Z
_TEXT	SEGMENT
_no$ = 8						; size = 4
?getUserSetting@@YAXH@Z PROC				; getUserSetting, COMDAT

; 377  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 378  : 	int i;
; 379  : 
; 380  : 	if( no < 0 || MAXCHARACTER <= no )

  00003	8b 4d 08	 mov	 ecx, DWORD PTR _no$[ebp]
  00006	83 f9 01	 cmp	 ecx, 1
  00009	77 47		 ja	 SHORT $LN6@getUserSet

; 381  : 		return;
; 382  : 
; 383  : 	// ξ“–ξ™¬ξΆ???????
; 384  : 	// ξ“–ξ™¬ξΆ?ξ“±ξ•¶??????
; 385  : 	pc.battlePetNo = -1;

  0000b	83 c8 ff	 or	 eax, -1
  0000e	56		 push	 esi
  0000f	66 a3 aa 00 00
	00		 mov	 WORD PTR ?pc@@3UPC@@A+170, ax

; 386  : 	for( i = 0; i < MAX_PET; i++ )

  00015	8d 34 8d 1a 00
	00 00		 lea	 esi, DWORD PTR ?savedatabuf@@3PAEA[ecx*4+26]
  0001c	33 c0		 xor	 eax, eax
  0001e	03 f1		 add	 esi, ecx
$LL4@getUserSet:

; 387  : 	{
; 388  : 		if( (savedatabuf[BA_SEL_PEN+MAX_PET*no+i] & 0x01) )

  00020	8a 0e		 mov	 cl, BYTE PTR [esi]
  00022	8d 76 01	 lea	 esi, DWORD PTR [esi+1]
  00025	80 e1 01	 and	 cl, 1

; 389  : 		{
; 390  : 			pc.selectPetNo[i] = 1;			
; 391  : 		}
; 392  : 		else
; 393  : 		{
; 394  : 			pc.selectPetNo[i] = 0;
; 395  : 		}
; 396  : 		// ???ξ???
; 397  : 		if( (savedatabuf[BA_SEL_PEN+MAX_PET*no+i] & 0x04) )

  00028	0f b6 c9	 movzx	 ecx, cl
  0002b	66 89 0c 45 ac
	00 00 00	 mov	 WORD PTR ?pc@@3UPC@@A[eax*2+172], cx
  00033	f6 46 ff 04	 test	 BYTE PTR [esi-1], 4
  00037	0f b7 15 b6 00
	00 00		 movzx	 edx, WORD PTR ?pc@@3UPC@@A+182
  0003e	0f b7 c8	 movzx	 ecx, ax
  00041	0f 45 d1	 cmovne	 edx, ecx
  00044	40		 inc	 eax
  00045	66 89 15 b6 00
	00 00		 mov	 WORD PTR ?pc@@3UPC@@A+182, dx
  0004c	83 f8 05	 cmp	 eax, 5
  0004f	7c cf		 jl	 SHORT $LL4@getUserSet
  00051	5e		 pop	 esi
$LN6@getUserSet:

; 398  : 		{
; 399  : 			pc.mailPetNo = i;
; 400  : 		}
; 401  : 	}
; 402  : }

  00052	5d		 pop	 ebp
  00053	c3		 ret	 0
?getUserSetting@@YAXH@Z ENDP				; getUserSetting
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?setUserSetting@@YAXH@Z
_TEXT	SEGMENT
_no$ = 8						; size = 4
?setUserSetting@@YAXH@Z PROC				; setUserSetting, COMDAT

; 332  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 333  : 	int i;
; 334  : 
; 335  : 	if( no < 0 || MAXCHARACTER <= no )

  00003	8b 45 08	 mov	 eax, DWORD PTR _no$[ebp]
  00006	83 f8 01	 cmp	 eax, 1
  00009	0f 87 9f 00 00
	00		 ja	 $LN6@setUserSet

; 336  : 		return;
; 337  : 
; 338  : 	// ξ“–ξ™¬ξΆ???????
; 339  : 	// ξ“–ξ™¬ξΆ?ξ“±ξ•¶??????
; 340  : 	for( i = 0; i < MAX_PET; i++ )

  0000f	53		 push	 ebx
  00010	56		 push	 esi
  00011	57		 push	 edi
  00012	8d 3c 85 1a 00
	00 00		 lea	 edi, DWORD PTR ?savedatabuf@@3PAEA[eax*4+26]
  00019	33 f6		 xor	 esi, esi
  0001b	8d 1c 85 1a 00
	00 00		 lea	 ebx, DWORD PTR [eax*4+26]
  00022	03 f8		 add	 edi, eax
  00024	03 d8		 add	 ebx, eax
  00026	66 66 0f 1f 84
	00 00 00 00 00	 npad	 10
$LL4@setUserSet:

; 341  : 	{
; 342  : 		if( pc.selectPetNo[i] != 0 )

  00030	66 83 3c 75 ac
	00 00 00 00	 cmp	 WORD PTR ?pc@@3UPC@@A[esi*2+172], 0
  00039	74 10		 je	 SHORT $LN7@setUserSet

; 343  : 		{
; 344  : 			savedatabuf[BA_SEL_PEN+MAX_PET*no+i] = 0x01;
; 345  : 			// shan 2001/01/10
; 346  : 			if(sPetStatFlag==1)

  0003b	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?sPetStatFlag@@3HA, 1 ; sPetStatFlag
  00042	c6 07 01	 mov	 BYTE PTR [edi], 1
  00045	75 2a		 jne	 SHORT $LN10@setUserSet

; 347  : 				lssproto_PETST_send( sockfd, i, 1);			

  00047	6a 01		 push	 1

; 348  : 		}

  00049	eb 17		 jmp	 SHORT $LN21@setUserSet
$LN7@setUserSet:

; 349  : 		else
; 350  : 		{
; 351  : 			savedatabuf[BA_SEL_PEN+MAX_PET*no+i] = 0x00;

  0004b	83 fb 7f	 cmp	 ebx, 127		; 0000007fH
  0004e	73 60		 jae	 SHORT $LN14@setUserSet

; 352  : 			// shan 2001/01/10
; 353  : 			if(sPetStatFlag==1)

  00050	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?sPetStatFlag@@3HA, 1 ; sPetStatFlag
  00057	c6 83 00 00 00
	00 00		 mov	 BYTE PTR ?savedatabuf@@3PAEA[ebx], 0
  0005e	75 11		 jne	 SHORT $LN10@setUserSet

; 354  : 				lssproto_PETST_send( sockfd, i, 0);

  00060	6a 00		 push	 0
$LN21@setUserSet:

; 355  : 		}
; 356  : #if 0	// ????ξΊξ«???????????
; 357  : 		if( i == pc.battlePetNo )
; 358  : 		{
; 359  : 			savedatabuf[BA_SEL_PEN+MAX_PET*no+i] |= 0x02;
; 360  : 		}
; 361  : #endif
; 362  : 		// ???ξ??????
; 363  : 		if( i == pc.mailPetNo )

  00062	56		 push	 esi
  00063	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00069	e8 00 00 00 00	 call	 ?lssproto_PETST_send@@YAXHHH@Z ; lssproto_PETST_send
  0006e	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN10@setUserSet:
  00071	0f bf 05 b6 00
	00 00		 movsx	 eax, WORD PTR ?pc@@3UPC@@A+182
  00078	3b f0		 cmp	 esi, eax
  0007a	75 1d		 jne	 SHORT $LN2@setUserSet

; 364  : 		{
; 365  : 			savedatabuf[BA_SEL_PEN+MAX_PET*no+i] |= 0x04;

  0007c	80 0f 04	 or	 BYTE PTR [edi], 4

; 366  : 			// shan 2001/01/10
; 367  : 			if(sPetStatFlag==1)

  0007f	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?sPetStatFlag@@3HA, 1 ; sPetStatFlag
  00086	75 11		 jne	 SHORT $LN2@setUserSet

; 368  : 				lssproto_PETST_send( sockfd, i, 4);			

  00088	6a 04		 push	 4
  0008a	56		 push	 esi
  0008b	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00091	e8 00 00 00 00	 call	 ?lssproto_PETST_send@@YAXHHH@Z ; lssproto_PETST_send
  00096	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN2@setUserSet:

; 336  : 		return;
; 337  : 
; 338  : 	// ξ“–ξ™¬ξΆ???????
; 339  : 	// ξ“–ξ™¬ξΆ?ξ“±ξ•¶??????
; 340  : 	for( i = 0; i < MAX_PET; i++ )

  00099	46		 inc	 esi
  0009a	43		 inc	 ebx
  0009b	47		 inc	 edi
  0009c	83 fe 05	 cmp	 esi, 5
  0009f	7c 8f		 jl	 SHORT $LL4@setUserSet

; 369  : 		}
; 370  : 	}
; 371  : 	sPetStatFlag = 0;

  000a1	5f		 pop	 edi
  000a2	5e		 pop	 esi
  000a3	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?sPetStatFlag@@3HA, 0 ; sPetStatFlag
  000ad	5b		 pop	 ebx
$LN6@setUserSet:

; 372  : }

  000ae	5d		 pop	 ebp
  000af	c3		 ret	 0
$LN14@setUserSet:

; 349  : 		else
; 350  : 		{
; 351  : 			savedatabuf[BA_SEL_PEN+MAX_PET*no+i] = 0x00;

  000b0	e8 00 00 00 00	 call	 ___report_rangecheckfailure
$LN20@setUserSet:
  000b5	cc		 int	 3
?setUserSetting@@YAXH@Z ENDP				; setUserSetting
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?loadUserSetting@@YAHXZ
_TEXT	SEGMENT
?loadUserSetting@@YAHXZ PROC				; loadUserSetting, COMDAT

; 133  : 	if( loadNowState() )

  00000	e8 00 00 00 00	 call	 ?loadNowState@@YAHXZ	; loadNowState
  00005	85 c0		 test	 eax, eax
  00007	74 15		 je	 SHORT $LN2@loadUserSe

; 134  : 	{
; 135  : 		getUserSoundOption();

  00009	e8 00 00 00 00	 call	 ?getUserSoundOption@@YAXXZ ; getUserSoundOption

; 136  : 		getUserChatOption();

  0000e	e8 00 00 00 00	 call	 ?getUserChatOption@@YAXXZ ; getUserChatOption

; 137  : 		getUserInterfaceOption();

  00013	e8 00 00 00 00	 call	 ?getUserInterfaceOption@@YAXXZ ; getUserInterfaceOption

; 138  : 
; 139  : 		return TRUE;

  00018	b8 01 00 00 00	 mov	 eax, 1

; 143  : }

  0001d	c3		 ret	 0
$LN2@loadUserSe:

; 140  : 	}
; 141  : 
; 142  : 	return FALSE;

  0001e	33 c0		 xor	 eax, eax

; 143  : }

  00020	c3		 ret	 0
?loadUserSetting@@YAHXZ ENDP				; loadUserSetting
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\savedata.cpp
;	COMDAT ?saveUserSetting@@YAHXZ
_TEXT	SEGMENT
?saveUserSetting@@YAHXZ PROC				; saveUserSetting, COMDAT

; 119  : 	setUserSetting( selectPcNo );

  00000	0f bf 05 00 00
	00 00		 movsx	 eax, WORD PTR ?selectPcNo@@3FA ; selectPcNo
  00007	50		 push	 eax
  00008	e8 00 00 00 00	 call	 ?setUserSetting@@YAXH@Z	; setUserSetting
  0000d	83 c4 04	 add	 esp, 4

; 120  : 	setUserSoundOption();

  00010	e8 00 00 00 00	 call	 ?setUserSoundOption@@YAXXZ ; setUserSoundOption

; 121  : 	setUserChatOption();

  00015	e8 00 00 00 00	 call	 ?setUserChatOption@@YAXXZ ; setUserChatOption

; 122  : 	setUserInterfaceOption();

  0001a	e8 00 00 00 00	 call	 ?setUserInterfaceOption@@YAXXZ ; setUserInterfaceOption

; 123  : 
; 124  : 	return saveNowState();

  0001f	e9 00 00 00 00	 jmp	 ?saveNowState@@YAHXZ	; saveNowState
?saveUserSetting@@YAHXZ ENDP				; saveUserSetting
_TEXT	ENDS
END
