; Listing generated by Microsoft (R) Optimizing Compiler Version 19.16.27041.0 

	TITLE	E:\Files\SA Bought Files\client code\mylua\光环lua.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_C@_08BFFAFOCN@SetCount@			; `string'
PUBLIC	??_C@_07MOIAJPBM@SetList@			; `string'
EXTRN	?data光环@@3PAU光环STRUCT@@A:BYTE		; data光环
EXTRN	?count_光环@@3HA:DWORD				; count_光环
;	COMDAT ??_C@_07MOIAJPBM@SetList@
CONST	SEGMENT
??_C@_07MOIAJPBM@SetList@ DB 'SetList', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_08BFFAFOCN@SetCount@
CONST	SEGMENT
??_C@_08BFFAFOCN@SetCount@ DB 'SetCount', 00H		; `string'
CONST	ENDS
CONST	SEGMENT
?GuangHuanFunc@@3QBUluaL_Reg@@B DD FLAT:??_C@_08BFFAFOCN@SetCount@ ; GuangHuanFunc
	DD	FLAT:?SetCount@@YAHPAUlua_State@@@Z
	DD	FLAT:??_C@_07MOIAJPBM@SetList@
	DD	FLAT:?SetList@@YAHPAUlua_State@@@Z
	DD	00H
	DD	00H
CONST	ENDS
PUBLIC	?luaopen_GuangHuanList@@YAHPAUlua_State@@@Z	; luaopen_GuangHuanList
PUBLIC	??_C@_09IOBHABKN@GuangHuan@			; `string'
EXTRN	_luaL_register:PROC
EXTRN	_luaL_checklstring:PROC
EXTRN	_luaL_checkinteger:PROC
;	COMDAT ??_C@_09IOBHABKN@GuangHuan@
CONST	SEGMENT
??_C@_09IOBHABKN@GuangHuan@ DB 'GuangHuan', 00H		; `string'
CONST	ENDS
; Function compile flags: /Ogtp
; File e:\files\sa bought files\client code\mylua\光环lua.cpp
;	COMDAT ?SetList@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_l$ = -8						; size = 4
_id$1$ = -4						; size = 4
_L$ = 8							; size = 4
?SetList@@YAHPAUlua_State@@@Z PROC			; SetList, COMDAT

; 24   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	56		 push	 esi
  00008	57		 push	 edi

; 25   : 	size_t l;
; 26   : 	const int id = luaL_checkint(L, 1);

  00009	8b 7d 08	 mov	 edi, DWORD PTR _L$[ebp]
  0000c	6a 01		 push	 1
  0000e	57		 push	 edi
  0000f	e8 00 00 00 00	 call	 _luaL_checkinteger

; 27   : 	const int bmp = luaL_checkint(L, 2);

  00014	6a 02		 push	 2
  00016	57		 push	 edi
  00017	89 45 fc	 mov	 DWORD PTR _id$1$[ebp], eax
  0001a	e8 00 00 00 00	 call	 _luaL_checkinteger
  0001f	8b d8		 mov	 ebx, eax

; 28   : 	const char * name = luaL_checklstring(L, 3, &l);

  00021	8d 45 f8	 lea	 eax, DWORD PTR _l$[ebp]
  00024	50		 push	 eax
  00025	6a 03		 push	 3
  00027	57		 push	 edi
  00028	e8 00 00 00 00	 call	 _luaL_checklstring

; 29   : 	const int time = luaL_checkint(L, 4);

  0002d	6a 04		 push	 4
  0002f	57		 push	 edi
  00030	8b f0		 mov	 esi, eax
  00032	e8 00 00 00 00	 call	 _luaL_checkinteger
  00037	8b f8		 mov	 edi, eax
  00039	83 c4 24	 add	 esp, 36			; 00000024H

; 30   : 
; 31   : 
; 32   : 	data光环[id].bmpNO = bmp;

  0003c	8b 45 fc	 mov	 eax, DWORD PTR _id$1$[ebp]
  0003f	8d 14 c5 00 00
	00 00		 lea	 edx, DWORD PTR [eax*8]
  00046	2b d0		 sub	 edx, eax
  00048	c1 e2 02	 shl	 edx, 2

; 33   : 	strcpy(data光环[id].name, name);

  0004b	8b ca		 mov	 ecx, edx
  0004d	2b ce		 sub	 ecx, esi
  0004f	89 9a 00 00 00
	00		 mov	 DWORD PTR ?data光环@@3PAU光环STRUCT@@A[edx], ebx
  00055	8d 89 04 00 00
	00		 lea	 ecx, DWORD PTR ?data光环@@3PAU光环STRUCT@@A[ecx+4]
  0005b	0f 1f 44 00 00	 npad	 5
$LL3@SetList:
  00060	8a 06		 mov	 al, BYTE PTR [esi]
  00062	8d 76 01	 lea	 esi, DWORD PTR [esi+1]
  00065	88 44 31 ff	 mov	 BYTE PTR [ecx+esi-1], al
  00069	84 c0		 test	 al, al
  0006b	75 f3		 jne	 SHORT $LL3@SetList

; 34   : 	data光环[id].time = time;

  0006d	89 ba 18 00 00
	00		 mov	 DWORD PTR ?data光环@@3PAU光环STRUCT@@A[edx+24], edi

; 35   : 	return 1;

  00073	b8 01 00 00 00	 mov	 eax, 1
  00078	5f		 pop	 edi
  00079	5e		 pop	 esi
  0007a	5b		 pop	 ebx

; 36   : }

  0007b	8b e5		 mov	 esp, ebp
  0007d	5d		 pop	 ebp
  0007e	c3		 ret	 0
?SetList@@YAHPAUlua_State@@@Z ENDP			; SetList
_TEXT	ENDS
; Function compile flags: /Ogtp
; File e:\files\sa bought files\client code\mylua\光环lua.cpp
;	COMDAT ?SetCount@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_L$ = 8							; size = 4
?SetCount@@YAHPAUlua_State@@@Z PROC			; SetCount, COMDAT

; 17   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 18   : 	const int num = luaL_checkint(L, 1);

  00003	6a 01		 push	 1
  00005	ff 75 08	 push	 DWORD PTR _L$[ebp]
  00008	e8 00 00 00 00	 call	 _luaL_checkinteger

; 19   : 	count_光环 = num;

  0000d	a3 00 00 00 00	 mov	 DWORD PTR ?count_光环@@3HA, eax ; count_光环
  00012	83 c4 08	 add	 esp, 8

; 20   : 	return 1;

  00015	b8 01 00 00 00	 mov	 eax, 1

; 21   : }

  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?SetCount@@YAHPAUlua_State@@@Z ENDP			; SetCount
_TEXT	ENDS
; Function compile flags: /Ogtp
; File e:\files\sa bought files\client code\mylua\光环lua.cpp
;	COMDAT ?luaopen_GuangHuanList@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_L$ = 8							; size = 4
?luaopen_GuangHuanList@@YAHPAUlua_State@@@Z PROC	; luaopen_GuangHuanList, COMDAT

; 45   : LUALIB_API int luaopen_GuangHuanList(lua_State *L) {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 46   : 	luaL_register(L, "GuangHuan", GuangHuanFunc);

  00003	68 00 00 00 00	 push	 OFFSET ?GuangHuanFunc@@3QBUluaL_Reg@@B
  00008	68 00 00 00 00	 push	 OFFSET ??_C@_09IOBHABKN@GuangHuan@
  0000d	ff 75 08	 push	 DWORD PTR _L$[ebp]
  00010	e8 00 00 00 00	 call	 _luaL_register
  00015	83 c4 0c	 add	 esp, 12			; 0000000cH

; 47   : 	return 1;

  00018	b8 01 00 00 00	 mov	 eax, 1

; 48   : }

  0001d	5d		 pop	 ebp
  0001e	c3		 ret	 0
?luaopen_GuangHuanList@@YAHPAUlua_State@@@Z ENDP	; luaopen_GuangHuanList
_TEXT	ENDS
END
