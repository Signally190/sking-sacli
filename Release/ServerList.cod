; Listing generated by Microsoft (R) Optimizing Compiler Version 19.29.30133.0 

	TITLE	\\VBOXSVR\_stoneage\repos\ssm-sacli\Release\ServerList.obj
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_C@_0N@GCICAIEB@SetGroupList@			; `string'
PUBLIC	??_C@_0P@MHLCILKI@SetGroupMaxNum@		; `string'
PUBLIC	??_C@_0O@HKOLBEFP@SetServerList@		; `string'
EXTRN	?nGroup@@3HA:DWORD				; nGroup
EXTRN	?gmsv@@3PAUgameserver@@A:BYTE			; gmsv
EXTRN	?gmgroup@@3PAUgamegroup@@A:BYTE			; gmgroup
;	COMDAT ??_C@_0O@HKOLBEFP@SetServerList@
CONST	SEGMENT
??_C@_0O@HKOLBEFP@SetServerList@ DB 'SetServerList', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0P@MHLCILKI@SetGroupMaxNum@
CONST	SEGMENT
??_C@_0P@MHLCILKI@SetGroupMaxNum@ DB 'SetGroupMaxNum', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0N@GCICAIEB@SetGroupList@
CONST	SEGMENT
??_C@_0N@GCICAIEB@SetGroupList@ DB 'SetGroupList', 00H	; `string'
CONST	ENDS
CONST	SEGMENT
?ServerListlib@@3QBUluaL_Reg@@B DD FLAT:??_C@_0N@GCICAIEB@SetGroupList@ ; ServerListlib
	DD	FLAT:?SetGroupList@@YAHPAUlua_State@@@Z
	DD	FLAT:??_C@_0P@MHLCILKI@SetGroupMaxNum@
	DD	FLAT:?SetGroupMaxNum@@YAHPAUlua_State@@@Z
	DD	FLAT:??_C@_0O@HKOLBEFP@SetServerList@
	DD	FLAT:?SetServerList@@YAHPAUlua_State@@@Z
	DD	00H
	DD	00H
CONST	ENDS
PUBLIC	?luaopen_ServerList@@YAHPAUlua_State@@@Z	; luaopen_ServerList
PUBLIC	??_C@_0L@KPCNOBPE@ServerList@			; `string'
EXTRN	_luaL_register:PROC
EXTRN	_luaL_checklstring:PROC
EXTRN	_luaL_checkinteger:PROC
;	COMDAT ??_C@_0L@KPCNOBPE@ServerList@
CONST	SEGMENT
??_C@_0L@KPCNOBPE@ServerList@ DB 'ServerList', 00H	; `string'
CONST	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\mylua\ServerList.cpp
;	COMDAT ?SetServerList@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_id$1$ = -8						; size = 4
_l$ = -4						; size = 4
_L$ = 8							; size = 4
?SetServerList@@YAHPAUlua_State@@@Z PROC		; SetServerList, COMDAT

; 37   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	53		 push	 ebx
  00007	56		 push	 esi

; 38   : 	size_t l;
; 39   : 	const int id = luaL_checkint(L, 1);

  00008	8b 75 08	 mov	 esi, DWORD PTR _L$[ebp]
  0000b	57		 push	 edi
  0000c	6a 01		 push	 1
  0000e	56		 push	 esi
  0000f	e8 00 00 00 00	 call	 _luaL_checkinteger
  00014	89 45 f8	 mov	 DWORD PTR _id$1$[ebp], eax

; 40   : 	const char *ServerIP = luaL_checklstring(L, 2, &l);

  00017	8d 45 fc	 lea	 eax, DWORD PTR _l$[ebp]
  0001a	50		 push	 eax
  0001b	6a 02		 push	 2
  0001d	56		 push	 esi
  0001e	e8 00 00 00 00	 call	 _luaL_checklstring
  00023	8b d8		 mov	 ebx, eax

; 41   : 	const char *ServerPort = luaL_checklstring(L, 3, &l);

  00025	8d 45 fc	 lea	 eax, DWORD PTR _l$[ebp]
  00028	50		 push	 eax
  00029	6a 03		 push	 3
  0002b	56		 push	 esi
  0002c	e8 00 00 00 00	 call	 _luaL_checklstring
  00031	8b f8		 mov	 edi, eax

; 42   : 	const char *ServerName = luaL_checklstring(L, 4, &l);

  00033	8d 45 fc	 lea	 eax, DWORD PTR _l$[ebp]
  00036	50		 push	 eax
  00037	6a 04		 push	 4
  00039	56		 push	 esi
  0003a	e8 00 00 00 00	 call	 _luaL_checklstring

; 43   : 
; 44   : 	strcpy(gmsv[id].ipaddr, ServerIP);

  0003f	8b 75 f8	 mov	 esi, DWORD PTR _id$1$[ebp]
  00042	83 c4 2c	 add	 esp, 44			; 0000002cH
  00045	c1 e6 08	 shl	 esi, 8
  00048	8b ce		 mov	 ecx, esi
  0004a	2b cb		 sub	 ecx, ebx
  0004c	8d 91 01 00 00
	00		 lea	 edx, DWORD PTR ?gmsv@@3PAUgameserver@@A[ecx+1]
$LL3@SetServerL:
  00052	8a 0b		 mov	 cl, BYTE PTR [ebx]
  00054	8d 5b 01	 lea	 ebx, DWORD PTR [ebx+1]
  00057	88 4c 1a ff	 mov	 BYTE PTR [edx+ebx-1], cl
  0005b	84 c9		 test	 cl, cl
  0005d	75 f3		 jne	 SHORT $LL3@SetServerL

; 45   : 	strcpy(gmsv[id].port, ServerPort);

  0005f	8b ce		 mov	 ecx, esi
  00061	2b cf		 sub	 ecx, edi
  00063	8d 91 80 00 00
	00		 lea	 edx, DWORD PTR ?gmsv@@3PAUgameserver@@A[ecx+128]
  00069	0f 1f 80 00 00
	00 00		 npad	 7
$LL4@SetServerL:
  00070	8a 0f		 mov	 cl, BYTE PTR [edi]
  00072	8d 7f 01	 lea	 edi, DWORD PTR [edi+1]
  00075	88 4c 3a ff	 mov	 BYTE PTR [edx+edi-1], cl
  00079	84 c9		 test	 cl, cl
  0007b	75 f3		 jne	 SHORT $LL4@SetServerL

; 46   : 	strcpy(gmsv[id].name, ServerName);

  0007d	8b ce		 mov	 ecx, esi
  0007f	2b c8		 sub	 ecx, eax
  00081	8d 91 c0 00 00
	00		 lea	 edx, DWORD PTR ?gmsv@@3PAUgameserver@@A[ecx+192]
$LL5@SetServerL:
  00087	8a 08		 mov	 cl, BYTE PTR [eax]
  00089	8d 40 01	 lea	 eax, DWORD PTR [eax+1]
  0008c	88 4c 02 ff	 mov	 BYTE PTR [edx+eax-1], cl
  00090	84 c9		 test	 cl, cl
  00092	75 f3		 jne	 SHORT $LL5@SetServerL

; 47   : 
; 48   : 	gmsv[id].used = '1';
; 49   : 	return 1;

  00094	5f		 pop	 edi
  00095	c6 86 00 00 00
	00 31		 mov	 BYTE PTR ?gmsv@@3PAUgameserver@@A[esi], 49 ; 00000031H
  0009c	b8 01 00 00 00	 mov	 eax, 1
  000a1	5e		 pop	 esi
  000a2	5b		 pop	 ebx

; 50   : }

  000a3	8b e5		 mov	 esp, ebp
  000a5	5d		 pop	 ebp
  000a6	c3		 ret	 0
?SetServerList@@YAHPAUlua_State@@@Z ENDP		; SetServerList
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\mylua\ServerList.cpp
;	COMDAT ?SetGroupList@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_l$ = -12						; size = 4
_ServerMaxNum$1$ = -8					; size = 4
_GroupUse$1$ = -4					; size = 4
_L$ = 8							; size = 4
?SetGroupList@@YAHPAUlua_State@@@Z PROC			; SetGroupList, COMDAT

; 20   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	53		 push	 ebx
  00007	56		 push	 esi

; 21   : 	size_t l;
; 22   : 	const int id = luaL_checkint(L, 1);

  00008	8b 75 08	 mov	 esi, DWORD PTR _L$[ebp]
  0000b	57		 push	 edi
  0000c	6a 01		 push	 1
  0000e	56		 push	 esi
  0000f	e8 00 00 00 00	 call	 _luaL_checkinteger

; 23   : 	const int GroupUse = luaL_checkint(L, 2);

  00014	6a 02		 push	 2
  00016	56		 push	 esi
  00017	8b f8		 mov	 edi, eax
  00019	e8 00 00 00 00	 call	 _luaL_checkinteger

; 24   : 	const int ServerMaxNum = luaL_checkint(L, 3);

  0001e	6a 03		 push	 3
  00020	56		 push	 esi
  00021	89 45 fc	 mov	 DWORD PTR _GroupUse$1$[ebp], eax
  00024	e8 00 00 00 00	 call	 _luaL_checkinteger

; 25   : 	const int ServerIndex = luaL_checkint(L, 4);

  00029	6a 04		 push	 4
  0002b	56		 push	 esi
  0002c	89 45 f8	 mov	 DWORD PTR _ServerMaxNum$1$[ebp], eax
  0002f	e8 00 00 00 00	 call	 _luaL_checkinteger
  00034	8b d8		 mov	 ebx, eax

; 26   : 	const char *GroupName = luaL_checklstring(L, 5, &l);

  00036	8d 45 f4	 lea	 eax, DWORD PTR _l$[ebp]
  00039	50		 push	 eax
  0003a	6a 05		 push	 5
  0003c	56		 push	 esi
  0003d	e8 00 00 00 00	 call	 _luaL_checklstring

; 27   : 	gmgroup[id].used = GroupUse;

  00042	8b 4d fc	 mov	 ecx, DWORD PTR _GroupUse$1$[ebp]
  00045	83 c4 2c	 add	 esp, 44			; 0000002cH
  00048	c1 e7 06	 shl	 edi, 6
  0004b	88 8f 00 00 00
	00		 mov	 BYTE PTR ?gmgroup@@3PAUgamegroup@@A[edi], cl

; 28   : 	gmgroup[id].num = ServerMaxNum;

  00051	8b 4d f8	 mov	 ecx, DWORD PTR _ServerMaxNum$1$[ebp]

; 29   : 	gmgroup[id].startindex = ServerIndex;

  00054	88 9f 02 00 00
	00		 mov	 BYTE PTR ?gmgroup@@3PAUgamegroup@@A[edi+2], bl
  0005a	88 8f 01 00 00
	00		 mov	 BYTE PTR ?gmgroup@@3PAUgamegroup@@A[edi+1], cl

; 30   : 	strcpy(gmgroup[id].name, GroupName);

  00060	2b f8		 sub	 edi, eax
  00062	8d 97 03 00 00
	00		 lea	 edx, DWORD PTR ?gmgroup@@3PAUgamegroup@@A[edi+3]
  00068	5f		 pop	 edi
  00069	5e		 pop	 esi
  0006a	5b		 pop	 ebx
  0006b	0f 1f 44 00 00	 npad	 5
$LL3@SetGroupLi:
  00070	8a 08		 mov	 cl, BYTE PTR [eax]
  00072	8d 40 01	 lea	 eax, DWORD PTR [eax+1]
  00075	88 4c 02 ff	 mov	 BYTE PTR [edx+eax-1], cl
  00079	84 c9		 test	 cl, cl
  0007b	75 f3		 jne	 SHORT $LL3@SetGroupLi

; 31   : 	return 1;

  0007d	b8 01 00 00 00	 mov	 eax, 1

; 32   : }

  00082	8b e5		 mov	 esp, ebp
  00084	5d		 pop	 ebp
  00085	c3		 ret	 0
?SetGroupList@@YAHPAUlua_State@@@Z ENDP			; SetGroupList
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\mylua\ServerList.cpp
;	COMDAT ?SetGroupMaxNum@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_L$ = 8							; size = 4
?SetGroupMaxNum@@YAHPAUlua_State@@@Z PROC		; SetGroupMaxNum, COMDAT

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 14   : 	const int num = luaL_checkint(L, 1);

  00003	6a 01		 push	 1
  00005	ff 75 08	 push	 DWORD PTR _L$[ebp]
  00008	e8 00 00 00 00	 call	 _luaL_checkinteger

; 15   : 	nGroup = num;

  0000d	a3 00 00 00 00	 mov	 DWORD PTR ?nGroup@@3HA, eax ; nGroup
  00012	83 c4 08	 add	 esp, 8

; 16   : 	return 1;

  00015	b8 01 00 00 00	 mov	 eax, 1

; 17   : }

  0001a	5d		 pop	 ebp
  0001b	c3		 ret	 0
?SetGroupMaxNum@@YAHPAUlua_State@@@Z ENDP		; SetGroupMaxNum
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\mylua\ServerList.cpp
;	COMDAT ?luaopen_ServerList@@YAHPAUlua_State@@@Z
_TEXT	SEGMENT
_L$ = 8							; size = 4
?luaopen_ServerList@@YAHPAUlua_State@@@Z PROC		; luaopen_ServerList, COMDAT

; 61   : LUALIB_API int luaopen_ServerList (lua_State *L) {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 62   : 	luaL_register(L, "ServerList", ServerListlib);

  00003	68 00 00 00 00	 push	 OFFSET ?ServerListlib@@3QBUluaL_Reg@@B
  00008	68 00 00 00 00	 push	 OFFSET ??_C@_0L@KPCNOBPE@ServerList@
  0000d	ff 75 08	 push	 DWORD PTR _L$[ebp]
  00010	e8 00 00 00 00	 call	 _luaL_register
  00015	83 c4 0c	 add	 esp, 12			; 0000000cH

; 63   : 	return 1;

  00018	b8 01 00 00 00	 mov	 eax, 1

; 64   : }

  0001d	5d		 pop	 ebp
  0001e	c3		 ret	 0
?luaopen_ServerList@@YAHPAUlua_State@@@Z ENDP		; luaopen_ServerList
_TEXT	ENDS
END
