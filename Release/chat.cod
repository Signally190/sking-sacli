; Listing generated by Microsoft (R) Optimizing Compiler Version 19.29.30133.0 

	TITLE	\\VBOXSVR\_stoneage\repos\ssm-sacli\Release\chat.obj
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?pNowStrBuffer@@3PAUSTR_BUFFER@@A		; pNowStrBuffer
PUBLIC	?ChatBuffer@@3PAU_CHAT_BUFFER@@A		; ChatBuffer
PUBLIC	?MyChatBuffer@@3USTR_BUFFER@@A			; MyChatBuffer
PUBLIC	?NowChatLine@@3HA				; NowChatLine
PUBLIC	?NowMaxChatLine@@3HA				; NowMaxChatLine
PUBLIC	?NowMaxVoice@@3HA				; NowMaxVoice
PUBLIC	?SubBuffer@@3USTR_BUFFER@@A			; SubBuffer
PUBLIC	?CursorFlashCnt@@3HA				; CursorFlashCnt
PUBLIC	?ChatLineSmoothY@@3HA				; ChatLineSmoothY
PUBLIC	?ChatHistory@@3UCHAT_HISTORY@@A			; ChatHistory
PUBLIC	?SayShieldList@@3PAY0BI@DA			; SayShieldList
PUBLIC	?NameShieldList@@3PAY0BI@DA			; NameShieldList
PUBLIC	?chatLogFile@@3PAU_iobuf@@A			; chatLogFile
PUBLIC	?chatLogFileName@@3PADA				; chatLogFileName
_BSS	SEGMENT
?pNowStrBuffer@@3PAUSTR_BUFFER@@A DD 01H DUP (?)	; pNowStrBuffer
?ChatBuffer@@3PAU_CHAT_BUFFER@@A DB 026e8H DUP (?)	; ChatBuffer
?MyChatBuffer@@3USTR_BUFFER@@A DB 0128H DUP (?)		; MyChatBuffer
?NowChatLine@@3HA DD 01H DUP (?)			; NowChatLine
?SubBuffer@@3USTR_BUFFER@@A DB 0128H DUP (?)		; SubBuffer
?CursorFlashCnt@@3HA DD 01H DUP (?)			; CursorFlashCnt
?ChatLineSmoothY@@3HA DD 01H DUP (?)			; ChatLineSmoothY
?ChatHistory@@3UCHAT_HISTORY@@A DB 04148H DUP (?)	; ChatHistory
?SayShieldList@@3PAY0BI@DA DB 01d4c0H DUP (?)		; SayShieldList
?NameShieldList@@3PAY0BI@DA DB 01d4c0H DUP (?)		; NameShieldList
?chatLogFile@@3PAU_iobuf@@A DD 01H DUP (?)		; chatLogFile
_BSS	ENDS
_DATA	SEGMENT
?NowMaxChatLine@@3HA DD 014H				; NowMaxChatLine
?NowMaxVoice@@3HA DD 03H				; NowMaxVoice
?chatLogFileName@@3PADA DB 'CHAT_000000.TXT', 00H	; chatLogFileName
_DATA	ENDS
PUBLIC	___local_stdio_printf_options
PUBLIC	___local_stdio_scanf_options
PUBLIC	_fprintf
PUBLIC	_sprintf
PUBLIC	_sscanf
PUBLIC	?StockStrBufferChar@@YAXD@Z			; StockStrBufferChar
PUBLIC	?StockStrBufferDBChar@@YAXPAD@Z			; StockStrBufferDBChar
PUBLIC	?ChatBufferToFontBuffer@@YAXXZ			; ChatBufferToFontBuffer
PUBLIC	?ChatProc@@YAXXZ				; ChatProc
PUBLIC	?StockChatBufferLine@@YAXPADEH@Z		; StockChatBufferLine
PUBLIC	?StockChatBufferLineExt@@YAXPADEHH@Z		; StockChatBufferLineExt
PUBLIC	?ClearChatBuffer@@YAXXZ				; ClearChatBuffer
PUBLIC	?GetStrLastByte@@YAHPAD@Z			; GetStrLastByte
PUBLIC	?GetStrWidth@@YAHPAD@Z				; GetStrWidth
PUBLIC	?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z		; GetKeyInputFocus
PUBLIC	?InitChat@@YAXXZ				; InitChat
PUBLIC	?FlashKeyboardCursor@@YAXXZ			; FlashKeyboardCursor
PUBLIC	?KeyboardLeft@@YAXXZ				; KeyboardLeft
PUBLIC	?KeyboardRight@@YAXXZ				; KeyboardRight
PUBLIC	?KeyboardReturn@@YAXXZ				; KeyboardReturn
PUBLIC	?KeyboardBackSpace@@YAXXZ			; KeyboardBackSpace
PUBLIC	?SaveChatHistoryStr@@YAHH@Z			; SaveChatHistoryStr
PUBLIC	?LoadChatHistoryStr@@YAHXZ			; LoadChatHistoryStr
PUBLIC	?LoadReadSayShield@@YAHXZ			; LoadReadSayShield
PUBLIC	?LoadReadNameShield@@YAHXZ			; LoadReadNameShield
PUBLIC	?CheckSay@@YA_NPBDD@Z				; CheckSay
PUBLIC	?CheckName@@YA_NPBD@Z				; CheckName
PUBLIC	?GetClipboad@@YAXXZ				; GetClipboad
PUBLIC	?SetClipboad@@YAXXZ				; SetClipboad
PUBLIC	?StrToNowStrBuffer@@YAXPAD@Z			; StrToNowStrBuffer
PUBLIC	?KeyboardTab@@YAXXZ				; KeyboardTab
PUBLIC	?openChatLogFile@@YAXXZ				; openChatLogFile
PUBLIC	?EncryptFileName@@YAPAXPBDAAI@Z			; EncryptFileName
PUBLIC	?MoveFilePointInt@@YAHPBDIAAIAAHH@Z		; MoveFilePointInt
PUBLIC	?StrToNowStrBuffer1@@YAXPAD@Z			; StrToNowStrBuffer1
PUBLIC	?StrToNowStrBuffer2@@YAHPAD@Z			; StrToNowStrBuffer2
PUBLIC	??$sprintf_s@$0IA@@@YAHAAY0IA@DPBDZZ		; sprintf_s<128>
PUBLIC	?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage
PUBLIC	?_OptionsStorage@?1??__local_stdio_scanf_options@@9@4_KA ; `__local_stdio_scanf_options'::`2'::_OptionsStorage
PUBLIC	??_C@_01KDCPPGHE@r@				; `string'
PUBLIC	??_C@_0BB@BLGDDDEM@data?2channel?4dat@		; `string'
PUBLIC	??_C@_02CHHAKFFB@w?$CL@				; `string'
PUBLIC	??_C@_0BG@FPPMNNCD@CHAT_?$CF02d?$CF02d?$CF02d?4TXT@ ; `string'
PUBLIC	??_C@_01MCMALHOG@a@				; `string'
PUBLIC	??_C@_0DC@OHCCGGLJ@?9?9?9?9?9?5Login?3?5?$CF02d?1?$CF02d?1?$CF02d?5?$CF02@ ; `string'
PUBLIC	??_C@_03HMFOOINA@r?$CLb@			; `string'
PUBLIC	??_C@_0BB@NBMCCIBO@data?2chathis?4dat@		; `string'
PUBLIC	??_C@_02JDPG@rb@				; `string'
PUBLIC	??_C@_02GMLFBBN@wb@				; `string'
PUBLIC	??_C@_0M@OJFNJGNP@data?1?$CFs?4bin@		; `string'
PUBLIC	??_C@_0DD@JOCOJABN@?2VBOXSVR?2_stoneage?2repos?2ssm?9sa@ ; `string'
PUBLIC	??_C@_01EEMJAFIK@?6@				; `string'
PUBLIC	??_C@_0M@GNOANMGB@ShieldWorld@			; `string'
PUBLIC	??_C@_02DKCKIIND@?$CFs@				; `string'
PUBLIC	??_C@_0L@DMHAPCJA@ShieldName@			; `string'
PUBLIC	??_C@_01IDAFKMJL@_@				; `string'
PUBLIC	??_C@_04DNPDJLGB@C?$HM?$CFs@			; `string'
PUBLIC	??_C@_03OFAPEBGM@?$CFs?6@			; `string'
PUBLIC	??_C@_0CJ@PPAMOMEI@?$LL?s?$LE?k?$LJ?f?$LP?$KB?$LA?T?5?$MA?$PM?$LM?$NL?G?R?5?$MA?L?$LI?p?F?$LM?D?$NM?$MA?$LL?5?$LM?$LB@ ; `string'
PUBLIC	??_C@_05OLBKMNMB@?$HL?$CD?$CFd?$HN@		; `string'
PUBLIC	__real@3ff6666666666666
PUBLIC	__xmm@0000dac40000dac30000d8690000d868
PUBLIC	__xmm@0000dac80000dac70000dac60000dac5
EXTRN	??_V@YAXPAX@Z:PROC				; operator delete[]
EXTRN	___report_rangecheckfailure:PROC
EXTRN	__Init_thread_header:PROC
EXTRN	__Init_thread_abort:PROC
EXTRN	__Init_thread_footer:PROC
EXTRN	??_U@YAPAXIHPBDH@Z:PROC				; operator new[]
EXTRN	?TimeGetTime@@YAIXZ:PROC			; TimeGetTime
EXTRN	_strstr:PROC
EXTRN	_strcat_s:PROC
EXTRN	_strncpy_s:PROC
EXTRN	_strlwr:PROC
EXTRN	__imp__GlobalAlloc@8:PROC
EXTRN	__imp__GlobalUnlock@4:PROC
EXTRN	__imp__GlobalLock@4:PROC
EXTRN	__imp__lstrcpynA@12:PROC
EXTRN	__imp__lstrcpyA@8:PROC
EXTRN	__imp__OpenClipboard@4:PROC
EXTRN	__imp__CloseClipboard@0:PROC
EXTRN	__imp__SetClipboardData@8:PROC
EXTRN	__imp__GetClipboardData@4:PROC
EXTRN	__imp__EmptyClipboard@0:PROC
EXTRN	__imp__LCMapStringA@24:PROC
EXTRN	__imp__IsDBCSLeadByte@4:PROC
EXTRN	_fclose:PROC
EXTRN	_fopen:PROC
EXTRN	_fread:PROC
EXTRN	_fseek:PROC
EXTRN	_ftell:PROC
EXTRN	_fwrite:PROC
EXTRN	___stdio_common_vfprintf:PROC
EXTRN	___stdio_common_vsprintf:PROC
EXTRN	___stdio_common_vsprintf_s:PROC
EXTRN	___stdio_common_vsscanf:PROC
EXTRN	?DeathAction@@YAXPAUaction@@@Z:PROC		; DeathAction
EXTRN	?StockDispBuffer@@YAHHHEHH@Z:PROC		; StockDispBuffer
EXTRN	?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z:PROC		; StockDispBuffer??êÈöÇ
EXTRN	?NewStockFontBuffer@@YAXPAU_CHAT_BUFFER@@HEPADHH@Z:PROC ; NewStockFontBuffer
EXTRN	?delFontBuffer@@YAXPAU_CHAT_BUFFER@@@Z:PROC	; delFontBuffer
EXTRN	?StockFontBuffer@@YAHHHDHPADH@Z:PROC		; StockFontBuffer
EXTRN	?StockFontBufferExt@@YAHHHDHPADHH@Z:PROC	; StockFontBufferExt
EXTRN	?StockFontBuffer2@@YAXPAUSTR_BUFFER@@@Z:PROC	; StockFontBuffer2
EXTRN	?GetImeString@@YAPADXZ:PROC			; GetImeString
EXTRN	?GetCharPrev@@YAPADPAD0@Z:PROC			; GetCharPrev
EXTRN	?chatStrSendForServer@@YAXPADH@Z:PROC		; chatStrSendForServer
EXTRN	?getUserChatOption@@YAXXZ:PROC			; getUserChatOption
EXTRN	__localtime64:PROC
EXTRN	__time64:PROC
EXTRN	?MakeHitBox@@YAHHHHHH@Z:PROC			; MakeHitBox
EXTRN	?play_se@@YAHHHH@Z:PROC				; play_se
EXTRN	?lssproto_FS_send@@YAXHH@Z:PROC			; lssproto_FS_send
EXTRN	?lssproto_FT_send@@YAXHPAD@Z:PROC		; lssproto_FT_send
EXTRN	?lssproto_KN_send@@YAXHHPAD@Z:PROC		; lssproto_KN_send
EXTRN	?lssproto_CHATROOM_send@@YAXHPAD@Z:PROC		; lssproto_CHATROOM_send
EXTRN	?old_lssproto_FS_send@@YAXHH@Z:PROC		; old_lssproto_FS_send
EXTRN	?old_lssproto_FT_send@@YAXHPAD@Z:PROC		; old_lssproto_FT_send
EXTRN	?old_lssproto_KN_send@@YAXHHPAD@Z:PROC		; old_lssproto_KN_send
EXTRN	?BIG5ToGB2312@@YAPADPBD@Z:PROC			; BIG5ToGB2312
EXTRN	???ÝÂú¼@@YAPADPADHH@Z:PROC			; ??ÝÂú¼
EXTRN	?ShowBottomLineString@@YAXHPAD@Z:PROC		; ShowBottomLineString
EXTRN	?selGraId@@YAHPAHH@Z:PROC			; selGraId
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	_memset:PROC
EXTRN	__Init_thread_epoch:DWORD
EXTRN	?DISPLACEMENT_Y@@3HA:DWORD			; DISPLACEMENT_Y
EXTRN	?hWnd@@3PAUHWND__@@A:DWORD			; hWnd
EXTRN	?ResoMode@@3HA:DWORD				; ResoMode
EXTRN	?joy_con@@3PAKA:QWORD				; joy_con
EXTRN	?joy_trg@@3PAKA:QWORD				; joy_trg
EXTRN	?joy_auto@@3PAKA:QWORD				; joy_auto
EXTRN	?mouse@@3UMOUSE@@A:BYTE				; mouse
EXTRN	?pc@@3UPC@@A:BYTE				; pc
EXTRN	?partyModeFlag@@3FA:WORD			; partyModeFlag
EXTRN	?MenuToggleFlag@@3IA:DWORD			; MenuToggleFlag
EXTRN	?chatRegistryStr@@3PAUSTR_BUFFER@@A:BYTE	; chatRegistryStr
EXTRN	?MailStr@@3USTR_BUFFER@@A:BYTE			; MailStr
EXTRN	?pActMenuWnd3@@3PAUaction@@A:DWORD		; pActMenuWnd3
EXTRN	?shougouChange@@3USTR_BUFFER@@A:BYTE		; shougouChange
EXTRN	?petNameChange@@3USTR_BUFFER@@A:BYTE		; petNameChange
EXTRN	?AuctionStr@@3USTR_BUFFER@@A:BYTE		; AuctionStr
EXTRN	?petStatusNo@@3HA:DWORD				; petStatusNo
EXTRN	?TalkMode@@3HA:DWORD				; TalkMode
EXTRN	?secretName@@3PADA:BYTE				; secretName
EXTRN	?setRoomFlag@@3_NA:BYTE				; setRoomFlag
EXTRN	?secretFlag@@3_NA:BYTE				; secretFlag
EXTRN	?selChar@@3HA:DWORD				; selChar
EXTRN	?chatRoomName@@3USTR_BUFFER@@A:BYTE		; chatRoomName
EXTRN	?pSetRoomWnd@@3PAUaction@@A:DWORD		; pSetRoomWnd
EXTRN	?bNewServer@@3HA:DWORD				; bNewServer
EXTRN	?sockfd@@3IA:DWORD				; sockfd
EXTRN	???@@3HA:DWORD					; ??
EXTRN	?Ûå???@@3HA:DWORD				; Ûå???
EXTRN	?idPasswordStr@@3PAUSTR_BUFFER@@A:DWORD		; idPasswordStr
EXTRN	?idKeyReturn@@3FA:WORD				; idKeyReturn
EXTRN	?idKey@@3USTR_BUFFER@@A:BYTE			; idKey
EXTRN	?passwd@@3USTR_BUFFER@@A:BYTE			; passwd
EXTRN	?selCharName@@3USTR_BUFFER@@A:BYTE		; selCharName
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
EXTRN	__tls_array:DWORD
EXTRN	__tls_index:DWORD
;	COMDAT ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA
_BSS	SEGMENT
?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA DQ 01H DUP (?) ; `__local_stdio_printf_options'::`2'::_OptionsStorage
_BSS	ENDS
;	COMDAT ?_OptionsStorage@?1??__local_stdio_scanf_options@@9@4_KA
_BSS	SEGMENT
?_OptionsStorage@?1??__local_stdio_scanf_options@@9@4_KA DQ 01H DUP (?) ; `__local_stdio_scanf_options'::`2'::_OptionsStorage
_BSS	ENDS
;	COMDAT ?szWord@?1??LoadReadSayShield@@YAHXZ@4PADA
_BSS	SEGMENT
?szWord@?1??LoadReadSayShield@@YAHXZ@4PADA DB 014H DUP (?) ; `LoadReadSayShield'::`2'::szWord
_BSS	ENDS
;	COMDAT ?szName_@?1??LoadReadNameShield@@YAHXZ@4PADA
_BSS	SEGMENT
?szName_@?1??LoadReadNameShield@@YAHXZ@4PADA DB 014H DUP (?) ; `LoadReadNameShield'::`2'::szName_
_BSS	ENDS
;	COMDAT ?dwChannelChangeTime@?1??KeyboardTab@@YAXXZ@4KA
_BSS	SEGMENT
?dwChannelChangeTime@?1??KeyboardTab@@YAXXZ@4KA DD 01H DUP (?) ; `KeyboardTab'::`2'::dwChannelChangeTime
_BSS	ENDS
;	COMDAT ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA
_BSS	SEGMENT
?$TSS0@?1??KeyboardTab@@YAXXZ@4HA DD 01H DUP (?)	; `KeyboardTab'::`2'::$TSS0
_BSS	ENDS
;	COMDAT ?PreTime@?4??KeyboardReturn@@YAXXZ@4KA
_BSS	SEGMENT
?PreTime@?4??KeyboardReturn@@YAXXZ@4KA DD 01H DUP (?)	; `KeyboardReturn'::`5'::PreTime
_BSS	ENDS
;	COMDAT ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA
_BSS	SEGMENT
?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA DD 01H DUP (?)	; `KeyboardReturn'::`5'::$TSS0
_BSS	ENDS
;	COMDAT ?CurTime@?4??KeyboardReturn@@YAXXZ@4KA
_BSS	SEGMENT
?CurTime@?4??KeyboardReturn@@YAXXZ@4KA DD 01H DUP (?)	; `KeyboardReturn'::`5'::CurTime
_BSS	ENDS
;	COMDAT ?øúï×?ø¸ßãìÚ@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
_BSS	SEGMENT
?øúï×?ø¸ßãìÚ@?1??ChatBufferToFontBuffer@@YAXXZ@4HA DD 01H DUP (?) ; `ChatBufferToFontBuffer'::`2'::øúï×?ø¸ßãìÚ
_BSS	ENDS
;	COMDAT ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
_BSS	SEGMENT
?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA DD 01H DUP (?) ; `ChatBufferToFontBuffer'::`2'::øúï×?Ï¢??
_BSS	ENDS
;	COMDAT ?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
_BSS	SEGMENT
?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA DD 01H DUP (?) ; `ChatBufferToFontBuffer'::`2'::øúï×?îñ?
_BSS	ENDS
;	COMDAT __xmm@0000dac80000dac70000dac60000dac5
CONST	SEGMENT
__xmm@0000dac80000dac70000dac60000dac5 DB 0c5H, 0daH, 00H, 00H, 0c6H, 0daH
	DB	00H, 00H, 0c7H, 0daH, 00H, 00H, 0c8H, 0daH, 00H, 00H
CONST	ENDS
;	COMDAT __xmm@0000dac40000dac30000d8690000d868
CONST	SEGMENT
__xmm@0000dac40000dac30000d8690000d868 DB 'h', 0d8H, 00H, 00H, 'i', 0d8H, 00H
	DB	00H, 0c3H, 0daH, 00H, 00H, 0c4H, 0daH, 00H, 00H
CONST	ENDS
;	COMDAT __real@3ff6666666666666
CONST	SEGMENT
__real@3ff6666666666666 DQ 03ff6666666666666r	; 1.4
CONST	ENDS
;	COMDAT ??_C@_05OLBKMNMB@?$HL?$CD?$CFd?$HN@
CONST	SEGMENT
??_C@_05OLBKMNMB@?$HL?$CD?$CFd?$HN@ DB '{#%d}', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_0CJ@PPAMOMEI@?$LL?s?$LE?k?$LJ?f?$LP?$KB?$LA?T?5?$MA?$PM?$LM?$NL?G?R?5?$MA?L?$LI?p?F?$LM?D?$NM?$MA?$LL?5?$LM?$LB@
CONST	SEGMENT
??_C@_0CJ@PPAMOMEI@?$LL?s?$LE?k?$LJ?f?$LP?$KB?$LA?T?5?$MA?$PM?$LM?$NL?G?R?5?$MA?L?$LI?p?F?$LM?D?$NM?$MA?$LL?5?$LM?$LB@ DB 0bbH
	DB	0f3H, 0b4H, 0ebH, 0b9H, 0e6H, 0bfH, 0a1H, 0b0H, 0d4H, ' ', 0c0H
	DB	0fcH, 0bcH, 0dbH, 0c7H, 0d2H, ' ', 0c0H, 0ccH, 0b8H, 0f0H, 0c6H
	DB	0bcH, 0c4H, 0dcH, 0c0H, 0bbH, ' ', 0bcH, 0b1H, 0c5H, 0c3H, 0c7H
	DB	0d5H, 0b4H, 0cfH, 0b4H, 0d9H, '.', 00H	; `string'
CONST	ENDS
;	COMDAT ?øúï×??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
_DATA	SEGMENT
?øúï×??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA DD 03H	; `ChatBufferToFontBuffer'::`2'::øúï×??
_DATA	ENDS
;	COMDAT ??_C@_03OFAPEBGM@?$CFs?6@
CONST	SEGMENT
??_C@_03OFAPEBGM@?$CFs?6@ DB '%s', 0aH, 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_04DNPDJLGB@C?$HM?$CFs@
CONST	SEGMENT
??_C@_04DNPDJLGB@C?$HM?$CFs@ DB 'C|%s', 00H		; `string'
CONST	ENDS
;	COMDAT ?first_keydown@?1??KeyboardReturn@@YAXXZ@4_NA
_DATA	SEGMENT
?first_keydown@?1??KeyboardReturn@@YAXXZ@4_NA DB 01H	; `KeyboardReturn'::`2'::first_keydown
_DATA	ENDS
;	COMDAT ??_C@_01IDAFKMJL@_@
CONST	SEGMENT
??_C@_01IDAFKMJL@_@ DB '_', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0L@DMHAPCJA@ShieldName@
CONST	SEGMENT
??_C@_0L@DMHAPCJA@ShieldName@ DB 'ShieldName', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_02DKCKIIND@?$CFs@
CONST	SEGMENT
??_C@_02DKCKIIND@?$CFs@ DB '%s', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@GNOANMGB@ShieldWorld@
CONST	SEGMENT
??_C@_0M@GNOANMGB@ShieldWorld@ DB 'ShieldWorld', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_01EEMJAFIK@?6@
CONST	SEGMENT
??_C@_01EEMJAFIK@?6@ DB 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DD@JOCOJABN@?2VBOXSVR?2_stoneage?2repos?2ssm?9sa@
CONST	SEGMENT
??_C@_0DD@JOCOJABN@?2VBOXSVR?2_stoneage?2repos?2ssm?9sa@ DB '\VBOXSVR\_st'
	DB	'oneage\repos\ssm-sacli\system\chat.cpp', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0M@OJFNJGNP@data?1?$CFs?4bin@
CONST	SEGMENT
??_C@_0M@OJFNJGNP@data?1?$CFs?4bin@ DB 'data/%s.bin', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_02GMLFBBN@wb@
CONST	SEGMENT
??_C@_02GMLFBBN@wb@ DB 'wb', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_02JDPG@rb@
CONST	SEGMENT
??_C@_02JDPG@rb@ DB 'rb', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@NBMCCIBO@data?2chathis?4dat@
CONST	SEGMENT
??_C@_0BB@NBMCCIBO@data?2chathis?4dat@ DB 'data\chathis.dat', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_03HMFOOINA@r?$CLb@
CONST	SEGMENT
??_C@_03HMFOOINA@r?$CLb@ DB 'r+b', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DC@OHCCGGLJ@?9?9?9?9?9?5Login?3?5?$CF02d?1?$CF02d?1?$CF02d?5?$CF02@
CONST	SEGMENT
??_C@_0DC@OHCCGGLJ@?9?9?9?9?9?5Login?3?5?$CF02d?1?$CF02d?1?$CF02d?5?$CF02@ DB '-'
	DB	'---- Login: %02d/%02d/%02d %02d:%02d:%02d -----', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01MCMALHOG@a@
CONST	SEGMENT
??_C@_01MCMALHOG@a@ DB 'a', 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BG@FPPMNNCD@CHAT_?$CF02d?$CF02d?$CF02d?4TXT@
CONST	SEGMENT
??_C@_0BG@FPPMNNCD@CHAT_?$CF02d?$CF02d?$CF02d?4TXT@ DB 'CHAT_%02d%02d%02d'
	DB	'.TXT', 00H					; `string'
CONST	ENDS
;	COMDAT ??_C@_02CHHAKFFB@w?$CL@
CONST	SEGMENT
??_C@_02CHHAKFFB@w?$CL@ DB 'w+', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BB@BLGDDDEM@data?2channel?4dat@
CONST	SEGMENT
??_C@_0BB@BLGDDDEM@data?2channel?4dat@ DB 'data\channel.dat', 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r@
CONST	SEGMENT
??_C@_01KDCPPGHE@r@ DB 'r', 00H				; `string'
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?KeyboardTab@@YAXXZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?KeyboardTab@@YAXXZ$0
__ehfuncinfo$?KeyboardTab@@YAXXZ DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?KeyboardTab@@YAXXZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	00H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$?KeyboardReturn@@YAXXZ DD 0ffffffffH
	DD	FLAT:__unwindfunclet$?KeyboardReturn@@YAXXZ$0
__ehfuncinfo$?KeyboardReturn@@YAXXZ DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$?KeyboardReturn@@YAXXZ
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	00H
xdata$x	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\stdio.h
;	COMDAT ??$sprintf_s@$0IA@@@YAHAAY0IA@DPBDZZ
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
??$sprintf_s@$0IA@@@YAHAAY0IA@DPBDZZ PROC		; sprintf_s<128>, COMDAT

; 1840 :         )

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1491 :         int const _Result = __stdio_common_vsprintf_s(

  00003	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  00006	50		 push	 eax
  00007	6a 00		 push	 0
  00009	ff 75 0c	 push	 DWORD PTR __Format$[ebp]
  0000c	68 80 00 00 00	 push	 128			; 00000080H
  00011	ff 75 08	 push	 DWORD PTR __Buffer$[ebp]
  00014	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00019	ff 70 04	 push	 DWORD PTR [eax+4]
  0001c	ff 30		 push	 DWORD PTR [eax]
  0001e	e8 00 00 00 00	 call	 ___stdio_common_vsprintf_s

; 1492 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS,
; 1493 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1494 : 
; 1495 :         return _Result < 0 ? -1 : _Result;

  00023	83 c9 ff	 or	 ecx, -1
  00026	83 c4 1c	 add	 esp, 28			; 0000001cH
  00029	85 c0		 test	 eax, eax
  0002b	0f 48 c1	 cmovs	 eax, ecx

; 1496 :     }
; 1497 :     #endif
; 1498 : 
; 1499 :     #if __STDC_WANT_SECURE_LIB__
; 1500 : 
; 1501 :         _Success_(return >= 0)
; 1502 :         _Check_return_opt_
; 1503 :         _CRT_STDIO_INLINE int __CRTDECL vsprintf_s(
; 1504 :             _Out_writes_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1505 :             _In_                                          size_t      const _BufferCount,
; 1506 :             _In_z_ _Printf_format_string_                 char const* const _Format,
; 1507 :                                                           va_list           _ArgList
; 1508 :             )
; 1509 :     #if defined _NO_CRT_STDIO_INLINE
; 1510 :     ;
; 1511 :     #else
; 1512 :         {
; 1513 :             return _vsprintf_s_l(_Buffer, _BufferCount, _Format, NULL, _ArgList);
; 1514 :         }
; 1515 :     #endif
; 1516 : 
; 1517 :         __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_2(
; 1518 :             _Success_(return >= 0)
; 1519 :             int, vsprintf_s,
; 1520 :             _Always_(_Post_z_)            char,        _Buffer,
; 1521 :             _In_z_ _Printf_format_string_ char const*, _Format,
; 1522 :                                           va_list,     _ArgList
; 1523 :             )
; 1524 : 
; 1525 :     #endif
; 1526 : 
; 1527 :     _Success_(return >= 0)
; 1528 :     _Check_return_opt_
; 1529 :     _CRT_STDIO_INLINE int __CRTDECL _vsprintf_p_l(
; 1530 :         _Out_writes_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1531 :         _In_                                          size_t      const _BufferCount,
; 1532 :         _In_z_ _Printf_format_string_params_(2)       char const* const _Format,
; 1533 :         _In_opt_                                      _locale_t   const _Locale,
; 1534 :                                                       va_list           _ArgList
; 1535 :         )
; 1536 :     #if defined _NO_CRT_STDIO_INLINE
; 1537 :     ;
; 1538 :     #else
; 1539 :     {
; 1540 :         int const _Result = __stdio_common_vsprintf_p(
; 1541 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS,
; 1542 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1543 : 
; 1544 :         return _Result < 0 ? -1 : _Result;
; 1545 :     }
; 1546 :     #endif
; 1547 : 
; 1548 :     _Success_(return >= 0)
; 1549 :     _Check_return_opt_
; 1550 :     _CRT_STDIO_INLINE int __CRTDECL _vsprintf_p(
; 1551 :         _Out_writes_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1552 :         _In_                                          size_t      const _BufferCount,
; 1553 :         _In_z_ _Printf_format_string_                 char const* const _Format,
; 1554 :                                                       va_list           _ArgList
; 1555 :         )
; 1556 :     #if defined _NO_CRT_STDIO_INLINE
; 1557 :     ;
; 1558 :     #else
; 1559 :     {
; 1560 :         return _vsprintf_p_l(_Buffer, _BufferCount, _Format, NULL, _ArgList);
; 1561 :     }
; 1562 :     #endif
; 1563 : 
; 1564 :     _Success_(return >= 0)
; 1565 :     _Check_return_opt_
; 1566 :     _CRT_STDIO_INLINE int __CRTDECL _vsnprintf_s_l(
; 1567 :         _Out_writes_opt_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1568 :         _In_                                              size_t      const _BufferCount,
; 1569 :         _In_                                              size_t      const _MaxCount,
; 1570 :         _In_z_ _Printf_format_string_params_(2)           char const* const _Format,
; 1571 :         _In_opt_                                          _locale_t   const _Locale,
; 1572 :                                                           va_list          _ArgList
; 1573 :         )
; 1574 :     #if defined _NO_CRT_STDIO_INLINE
; 1575 :     ;
; 1576 :     #else
; 1577 :     {
; 1578 :         int const _Result = __stdio_common_vsnprintf_s(
; 1579 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS,
; 1580 :             _Buffer, _BufferCount, _MaxCount, _Format, _Locale, _ArgList);
; 1581 : 
; 1582 :         return _Result < 0 ? -1 : _Result;
; 1583 :     }
; 1584 :     #endif
; 1585 : 
; 1586 :     _Success_(return >= 0)
; 1587 :     _Check_return_opt_
; 1588 :     _CRT_STDIO_INLINE int __CRTDECL _vsnprintf_s(
; 1589 :         _Out_writes_opt_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1590 :         _In_                                              size_t      const _BufferCount,
; 1591 :         _In_                                              size_t      const _MaxCount,
; 1592 :         _In_z_ _Printf_format_string_                     char const* const _Format,
; 1593 :                                                           va_list           _ArgList
; 1594 :         )
; 1595 :     #if defined _NO_CRT_STDIO_INLINE
; 1596 :     ;
; 1597 :     #else
; 1598 :     {
; 1599 :         return _vsnprintf_s_l(_Buffer, _BufferCount, _MaxCount, _Format, NULL, _ArgList);
; 1600 :     }
; 1601 :     #endif
; 1602 : 
; 1603 :     __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_3(
; 1604 :         _Success_(return >= 0)
; 1605 :         int, _vsnprintf_s,
; 1606 :         _Always_(_Post_z_)            char,        _Buffer,
; 1607 :         _In_                          size_t,      _BufferCount,
; 1608 :         _In_z_ _Printf_format_string_ char const*, _Format,
; 1609 :                                       va_list,     _ArgList
; 1610 :         )
; 1611 : 
; 1612 :     #if __STDC_WANT_SECURE_LIB__
; 1613 : 
; 1614 :         _Success_(return >= 0)
; 1615 :         _Check_return_opt_
; 1616 :         _CRT_STDIO_INLINE int __CRTDECL vsnprintf_s(
; 1617 :             _Out_writes_opt_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1618 :             _In_                                              size_t      const _BufferCount,
; 1619 :             _In_                                              size_t      const _MaxCount,
; 1620 :             _In_z_ _Printf_format_string_                     char const* const _Format,
; 1621 :                                                               va_list           _ArgList
; 1622 :             )
; 1623 :     #if defined _NO_CRT_STDIO_INLINE
; 1624 :     ;
; 1625 :     #else
; 1626 :         {
; 1627 :             return _vsnprintf_s_l(_Buffer, _BufferCount, _MaxCount, _Format, NULL, _ArgList);
; 1628 :         }
; 1629 :     #endif
; 1630 : 
; 1631 :         __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_3(
; 1632 :             _Success_(return >= 0)
; 1633 :             int, vsnprintf_s,
; 1634 :             _Always_(_Post_z_)            char,        _Buffer,
; 1635 :             _In_                          size_t,      _BufferCount,
; 1636 :             _In_z_ _Printf_format_string_ char const*, _Format,
; 1637 :                                           va_list,     _ArgList
; 1638 :             )
; 1639 : 
; 1640 :     #endif
; 1641 : 
; 1642 :     _Check_return_opt_
; 1643 :     _CRT_STDIO_INLINE int __CRTDECL _vscprintf_l(
; 1644 :         _In_z_ _Printf_format_string_params_(2) char const* const _Format,
; 1645 :         _In_opt_                                _locale_t   const _Locale,
; 1646 :                                                 va_list           _ArgList
; 1647 :         )
; 1648 :     #if defined _NO_CRT_STDIO_INLINE
; 1649 :     ;
; 1650 :     #else
; 1651 :     {
; 1652 :         int const _Result = __stdio_common_vsprintf(
; 1653 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_STANDARD_SNPRINTF_BEHAVIOR,
; 1654 :             NULL, 0, _Format, _Locale, _ArgList);
; 1655 : 
; 1656 :         return _Result < 0 ? -1 : _Result;
; 1657 :     }
; 1658 :     #endif
; 1659 : 
; 1660 :     _Check_return_
; 1661 :     _CRT_STDIO_INLINE int __CRTDECL _vscprintf(
; 1662 :         _In_z_ _Printf_format_string_ char const* const _Format,
; 1663 :                                       va_list           _ArgList
; 1664 :         )
; 1665 :     #if defined _NO_CRT_STDIO_INLINE
; 1666 :     ;
; 1667 :     #else
; 1668 :     {
; 1669 :         return _vscprintf_l(_Format, NULL, _ArgList);
; 1670 :     }
; 1671 :     #endif
; 1672 : 
; 1673 :     _Check_return_opt_
; 1674 :     _CRT_STDIO_INLINE int __CRTDECL _vscprintf_p_l(
; 1675 :         _In_z_ _Printf_format_string_params_(2) char const* const _Format,
; 1676 :         _In_opt_                                _locale_t   const _Locale,
; 1677 :                                                 va_list           _ArgList
; 1678 :         )
; 1679 :     #if defined _NO_CRT_STDIO_INLINE
; 1680 :     ;
; 1681 :     #else
; 1682 :     {
; 1683 :         int const _Result = __stdio_common_vsprintf_p(
; 1684 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_STANDARD_SNPRINTF_BEHAVIOR,
; 1685 :             NULL, 0, _Format, _Locale, _ArgList);
; 1686 : 
; 1687 :         return _Result < 0 ? -1 : _Result;
; 1688 :     }
; 1689 :     #endif
; 1690 : 
; 1691 :     _Check_return_
; 1692 :     _CRT_STDIO_INLINE int __CRTDECL _vscprintf_p(
; 1693 :         _In_z_ _Printf_format_string_ char const* const _Format,
; 1694 :                                       va_list           _ArgList
; 1695 :         )
; 1696 :     #if defined _NO_CRT_STDIO_INLINE
; 1697 :     ;
; 1698 :     #else
; 1699 :     {
; 1700 :         return _vscprintf_p_l(_Format, NULL, _ArgList);
; 1701 :     }
; 1702 :     #endif
; 1703 : 
; 1704 :     _Check_return_opt_
; 1705 :     _CRT_STDIO_INLINE int __CRTDECL _vsnprintf_c_l(
; 1706 :         _Out_writes_opt_(_BufferCount)          char*       const _Buffer,
; 1707 :         _In_                                    size_t      const _BufferCount,
; 1708 :         _In_z_ _Printf_format_string_params_(2) char const* const _Format,
; 1709 :         _In_opt_                                _locale_t   const _Locale,
; 1710 :                                                 va_list           _ArgList
; 1711 :         )
; 1712 :     #if defined _NO_CRT_STDIO_INLINE
; 1713 :     ;
; 1714 :     #else
; 1715 :     {
; 1716 :         int const _Result = __stdio_common_vsprintf(
; 1717 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS,
; 1718 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1719 : 
; 1720 :         return _Result < 0 ? -1 : _Result;
; 1721 :     }
; 1722 :     #endif
; 1723 : 
; 1724 :     _Success_(return >= 0)
; 1725 :     _Check_return_opt_
; 1726 :     _CRT_STDIO_INLINE int __CRTDECL _vsnprintf_c(
; 1727 :         _Out_writes_opt_(_BufferCount) char*       const _Buffer,
; 1728 :         _In_                           size_t      const _BufferCount,
; 1729 :         _In_z_ _Printf_format_string_  char const* const _Format,
; 1730 :                                        va_list           _ArgList
; 1731 :         )
; 1732 :     #if defined _NO_CRT_STDIO_INLINE
; 1733 :     ;
; 1734 :     #else
; 1735 :     {
; 1736 :         return _vsnprintf_c_l(_Buffer, _BufferCount, _Format, NULL, _ArgList);
; 1737 :     }
; 1738 :     #endif
; 1739 : 
; 1740 :     _Success_(return >= 0)
; 1741 :     _Check_return_opt_ _CRT_INSECURE_DEPRECATE(_sprintf_s_l)
; 1742 :     _CRT_STDIO_INLINE int __CRTDECL _sprintf_l(
; 1743 :         _Pre_notnull_ _Always_(_Post_z_)        char*       const _Buffer,
; 1744 :         _In_z_ _Printf_format_string_params_(0) char const* const _Format,
; 1745 :         _In_opt_                                _locale_t   const _Locale,
; 1746 :         ...)
; 1747 :     #if defined _NO_CRT_STDIO_INLINE
; 1748 :     ;
; 1749 :     #else
; 1750 :     {
; 1751 :         int _Result;
; 1752 :         va_list _ArgList;
; 1753 :         __crt_va_start(_ArgList, _Locale);
; 1754 : 
; 1755 :         _Result = _vsprintf_l(_Buffer, _Format, _Locale, _ArgList);
; 1756 : 
; 1757 :         __crt_va_end(_ArgList);
; 1758 :         return _Result;
; 1759 :     }
; 1760 :     #endif
; 1761 : 
; 1762 :     _Success_(return >= 0)
; 1763 :     _Check_return_opt_
; 1764 :     _CRT_STDIO_INLINE int __CRTDECL sprintf(
; 1765 :         _Pre_notnull_ _Always_(_Post_z_) char*       const _Buffer,
; 1766 :         _In_z_ _Printf_format_string_    char const* const _Format,
; 1767 :         ...)
; 1768 :     #if defined _NO_CRT_STDIO_INLINE
; 1769 :     ;
; 1770 :     #else
; 1771 :     {
; 1772 :         int _Result;
; 1773 :         va_list _ArgList;
; 1774 :         __crt_va_start(_ArgList, _Format);
; 1775 : 
; 1776 :         _Result = _vsprintf_l(_Buffer, _Format, NULL, _ArgList);
; 1777 : 
; 1778 :         __crt_va_end(_ArgList);
; 1779 :         return _Result;
; 1780 :     }
; 1781 :     #endif
; 1782 : 
; 1783 :     __DEFINE_CPP_OVERLOAD_STANDARD_FUNC_0_1_ARGLIST(
; 1784 :         _Success_(return >= 0)
; 1785 :         int, __RETURN_POLICY_SAME, __EMPTY_DECLSPEC, __CRTDECL, sprintf, vsprintf,
; 1786 :         _Pre_notnull_ _Always_(_Post_z_), char,        _Buffer,
; 1787 :         _In_z_ _Printf_format_string_     char const*, _Format
; 1788 :         )
; 1789 : 
; 1790 :     _Success_(return >= 0)
; 1791 :     _Check_return_opt_
; 1792 :     _CRT_STDIO_INLINE int __CRTDECL _sprintf_s_l(
; 1793 :         _Out_writes_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1794 :         _In_                                          size_t      const _BufferCount,
; 1795 :         _In_z_ _Printf_format_string_params_(0)       char const* const _Format,
; 1796 :         _In_opt_                                      _locale_t   const _Locale,
; 1797 :         ...)
; 1798 :     #if defined _NO_CRT_STDIO_INLINE
; 1799 :     ;
; 1800 :     #else
; 1801 :     {
; 1802 :         int _Result;
; 1803 :         va_list _ArgList;
; 1804 :         __crt_va_start(_ArgList, _Locale);
; 1805 :         _Result = _vsprintf_s_l(_Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1806 :         __crt_va_end(_ArgList);
; 1807 :         return _Result;
; 1808 :     }
; 1809 :     #endif
; 1810 : 
; 1811 :     #if __STDC_WANT_SECURE_LIB__
; 1812 : 
; 1813 :         _Success_(return >= 0)
; 1814 :         _Check_return_opt_
; 1815 :         _CRT_STDIO_INLINE int __CRTDECL sprintf_s(
; 1816 :             _Out_writes_(_BufferCount) _Always_(_Post_z_) char*       const _Buffer,
; 1817 :             _In_                                          size_t      const _BufferCount,
; 1818 :             _In_z_ _Printf_format_string_                 char const* const _Format,
; 1819 :             ...)
; 1820 :     #if defined _NO_CRT_STDIO_INLINE
; 1821 :     ;
; 1822 :     #else
; 1823 :         {
; 1824 :             int _Result;
; 1825 :             va_list _ArgList;
; 1826 :             __crt_va_start(_ArgList, _Format);
; 1827 :             _Result = _vsprintf_s_l(_Buffer, _BufferCount, _Format, NULL, _ArgList);
; 1828 :             __crt_va_end(_ArgList);
; 1829 :             return _Result;
; 1830 :         }
; 1831 :     #endif
; 1832 : 
; 1833 :     #endif
; 1834 : 
; 1835 :     __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_1_ARGLIST(

  0002e	5d		 pop	 ebp
  0002f	c3		 ret	 0
??$sprintf_s@$0IA@@@YAHAAY0IA@DPBDZZ ENDP		; sprintf_s<128>
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StrToNowStrBuffer2@@YAHPAD@Z
_TEXT	SEGMENT
_str$ = 8						; size = 4
?StrToNowStrBuffer2@@YAHPAD@Z PROC			; StrToNowStrBuffer2, COMDAT

; 481  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 482  : 	int strLen,i;
; 483  : 	strLen=strlen(str);

  00003	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  00006	57		 push	 edi
  00007	8b f9		 mov	 edi, ecx
  00009	8d 57 01	 lea	 edx, DWORD PTR [edi+1]
  0000c	0f 1f 40 00	 npad	 4
$LL16@StrToNowSt:
  00010	8a 07		 mov	 al, BYTE PTR [edi]
  00012	47		 inc	 edi
  00013	84 c0		 test	 al, al
  00015	75 f9		 jne	 SHORT $LL16@StrToNowSt
  00017	2b fa		 sub	 edi, edx

; 484  : 	if(strLen>70){

  00019	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR __imp__IsDBCSLeadByte@4
  0001f	83 ff 46	 cmp	 edi, 70			; 00000046H
  00022	7e 19		 jle	 SHORT $LN7@StrToNowSt

; 485  : 		if(IsDBCSLeadByte(str[68]))

  00024	0f b6 41 44	 movzx	 eax, BYTE PTR [ecx+68]
  00028	50		 push	 eax
  00029	ff d2		 call	 edx
  0002b	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  0002e	f7 d8		 neg	 eax
  00030	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR __imp__IsDBCSLeadByte@4
  00036	1b ff		 sbb	 edi, edi
  00038	83 c7 46	 add	 edi, 70			; 00000046H
  0003b	eb 04		 jmp	 SHORT $LN15@StrToNowSt
$LN7@StrToNowSt:

; 486  : 			strLen = 69;
; 487  : 		else
; 488  : 			strLen = 70;
; 489  : 	}
; 490  : 	for(i=0;i<strLen;i++){

  0003d	85 ff		 test	 edi, edi
  0003f	7e 3f		 jle	 SHORT $LN17@StrToNowSt
$LN15@StrToNowSt:
  00041	53		 push	 ebx
  00042	56		 push	 esi
  00043	33 f6		 xor	 esi, esi
$LL4@StrToNowSt:

; 491  : 		if(IsDBCSLeadByte(str[i])){

  00045	0f b6 04 0e	 movzx	 eax, BYTE PTR [esi+ecx]
  00049	8d 1c 0e	 lea	 ebx, DWORD PTR [esi+ecx]
  0004c	50		 push	 eax
  0004d	ff d2		 call	 edx
  0004f	85 c0		 test	 eax, eax
  00051	74 0c		 je	 SHORT $LN8@StrToNowSt

; 492  : 			StockStrBufferDBChar(str+i);

  00053	53		 push	 ebx
  00054	e8 00 00 00 00	 call	 ?StockStrBufferDBChar@@YAXPAD@Z ; StockStrBufferDBChar
  00059	83 c4 04	 add	 esp, 4

; 493  : 			i++;

  0005c	46		 inc	 esi

; 494  : 		}else

  0005d	eb 0c		 jmp	 SHORT $LN2@StrToNowSt
$LN8@StrToNowSt:

; 495  : 			StockStrBufferChar(str[i]);

  0005f	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  00062	50		 push	 eax
  00063	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  00068	83 c4 04	 add	 esp, 4
$LN2@StrToNowSt:

; 486  : 			strLen = 69;
; 487  : 		else
; 488  : 			strLen = 70;
; 489  : 	}
; 490  : 	for(i=0;i<strLen;i++){

  0006b	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  0006e	46		 inc	 esi
  0006f	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR __imp__IsDBCSLeadByte@4
  00075	3b f7		 cmp	 esi, edi
  00077	7c cc		 jl	 SHORT $LL4@StrToNowSt

; 496  : 	}
; 497  : 	return i;

  00079	8b c6		 mov	 eax, esi
  0007b	5e		 pop	 esi
  0007c	5b		 pop	 ebx
  0007d	5f		 pop	 edi

; 498  : }

  0007e	5d		 pop	 ebp
  0007f	c3		 ret	 0
$LN17@StrToNowSt:

; 496  : 	}
; 497  : 	return i;

  00080	33 c0		 xor	 eax, eax
  00082	5f		 pop	 edi

; 498  : }

  00083	5d		 pop	 ebp
  00084	c3		 ret	 0
?StrToNowStrBuffer2@@YAHPAD@Z ENDP			; StrToNowStrBuffer2
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StrToNowStrBuffer1@@YAXPAD@Z
_TEXT	SEGMENT
_str$GSCopy$1$ = -1032					; size = 4
_Ûå?$1 = -1028						; size = 1024
__$ArrayPad$ = -4					; size = 4
_str$ = 8						; size = 4
?StrToNowStrBuffer1@@YAXPAD@Z PROC			; StrToNowStrBuffer1, COMDAT

; 449  : void StrToNowStrBuffer1( char *str ){

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 08 04 00
	00		 sub	 esp, 1032		; 00000408H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  00016	53		 push	 ebx
  00017	56		 push	 esi
  00018	57		 push	 edi
  00019	8b f9		 mov	 edi, ecx
  0001b	89 8d f8 fb ff
	ff		 mov	 DWORD PTR _str$GSCopy$1$[ebp], ecx
  00021	8d 57 01	 lea	 edx, DWORD PTR [edi+1]
$LL27@StrToNowSt:
  00024	8a 07		 mov	 al, BYTE PTR [edi]
  00026	47		 inc	 edi
  00027	84 c0		 test	 al, al
  00029	75 f9		 jne	 SHORT $LL27@StrToNowSt
  0002b	2b fa		 sub	 edi, edx

; 450  : 	if(ç¹ä½“å¼€å…³){

  0002d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?Ûå???@@3HA, 0 ; Ûå???
  00034	0f 84 aa 00 00
	00		 je	 $LN8@StrToNowSt

; 451  : 		int strLen,i;
; 452  : 		char ç¹ä½“[1024]={0};

  0003a	68 00 04 00 00	 push	 1024			; 00000400H
  0003f	8d 85 fc fb ff
	ff		 lea	 eax, DWORD PTR _Ûå?$1[ebp]
  00045	6a 00		 push	 0
  00047	50		 push	 eax
  00048	e8 00 00 00 00	 call	 _memset
  0004d	83 c4 0c	 add	 esp, 12			; 0000000cH

; 453  : 		LCMapString (0x804,0x4000000,str, strlen(str),ç¹ä½“,1024);

  00050	8d 85 fc fb ff
	ff		 lea	 eax, DWORD PTR _Ûå?$1[ebp]
  00056	68 00 04 00 00	 push	 1024			; 00000400H
  0005b	50		 push	 eax
  0005c	57		 push	 edi
  0005d	ff b5 f8 fb ff
	ff		 push	 DWORD PTR _str$GSCopy$1$[ebp]
  00063	68 00 00 00 04	 push	 67108864		; 04000000H
  00068	68 04 08 00 00	 push	 2052			; 00000804H
  0006d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LCMapStringA@24

; 454  : 		strLen=strlen(ç¹ä½“);

  00073	8d bd fc fb ff
	ff		 lea	 edi, DWORD PTR _Ûå?$1[ebp]
  00079	8d 4f 01	 lea	 ecx, DWORD PTR [edi+1]
  0007c	0f 1f 40 00	 npad	 4
$LL28@StrToNowSt:
  00080	8a 07		 mov	 al, BYTE PTR [edi]
  00082	47		 inc	 edi
  00083	84 c0		 test	 al, al
  00085	75 f9		 jne	 SHORT $LL28@StrToNowSt
  00087	2b f9		 sub	 edi, ecx

; 455  : 		if(strLen>86)

  00089	83 ff 56	 cmp	 edi, 86			; 00000056H
  0008c	7e 07		 jle	 SHORT $LN10@StrToNowSt

; 456  : 			strLen=86;

  0008e	bf 56 00 00 00	 mov	 edi, 86			; 00000056H
  00093	eb 08		 jmp	 SHORT $LN26@StrToNowSt
$LN10@StrToNowSt:

; 457  : 		for(i=0;i<strLen;i++){

  00095	85 ff		 test	 edi, edi
  00097	0f 8e 8e 00 00
	00		 jle	 $LN6@StrToNowSt
$LN26@StrToNowSt:
  0009d	33 f6		 xor	 esi, esi
  0009f	90		 npad	 1
$LL4@StrToNowSt:

; 458  : 			if(IsDBCSLeadByte(ç¹ä½“[i])){

  000a0	8d 9d fc fb ff
	ff		 lea	 ebx, DWORD PTR _Ûå?$1[ebp]
  000a6	03 de		 add	 ebx, esi
  000a8	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  000ab	50		 push	 eax
  000ac	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsDBCSLeadByte@4
  000b2	85 c0		 test	 eax, eax
  000b4	74 0c		 je	 SHORT $LN11@StrToNowSt

; 459  : 				StockStrBufferDBChar(ç¹ä½“+i);

  000b6	53		 push	 ebx
  000b7	e8 00 00 00 00	 call	 ?StockStrBufferDBChar@@YAXPAD@Z ; StockStrBufferDBChar
  000bc	83 c4 04	 add	 esp, 4

; 460  : 				i++;

  000bf	46		 inc	 esi

; 461  : 			}else

  000c0	eb 0c		 jmp	 SHORT $LN2@StrToNowSt
$LN11@StrToNowSt:

; 462  : 				StockStrBufferChar(ç¹ä½“[i]);

  000c2	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  000c5	50		 push	 eax
  000c6	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  000cb	83 c4 04	 add	 esp, 4
$LN2@StrToNowSt:

; 457  : 		for(i=0;i<strLen;i++){

  000ce	46		 inc	 esi
  000cf	3b f7		 cmp	 esi, edi
  000d1	7c cd		 jl	 SHORT $LL4@StrToNowSt

; 475  : 		}
; 476  : 	}
; 477  : }

  000d3	5f		 pop	 edi
  000d4	5e		 pop	 esi
  000d5	5b		 pop	 ebx
  000d6	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000d9	33 cd		 xor	 ecx, ebp
  000db	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e0	8b e5		 mov	 esp, ebp
  000e2	5d		 pop	 ebp
  000e3	c3		 ret	 0
$LN8@StrToNowSt:

; 463  : 		}
; 464  : 	}else{
; 465  : 		int strLen,i;
; 466  : 		strLen=strlen(str);
; 467  : 		if(strLen>86)

  000e4	83 ff 56	 cmp	 edi, 86			; 00000056H
  000e7	7e 07		 jle	 SHORT $LN13@StrToNowSt

; 468  : 			strLen=86;

  000e9	bf 56 00 00 00	 mov	 edi, 86			; 00000056H
  000ee	eb 04		 jmp	 SHORT $LN25@StrToNowSt
$LN13@StrToNowSt:

; 469  : 		for(i=0;i<strLen;i++){

  000f0	85 ff		 test	 edi, edi
  000f2	7e 37		 jle	 SHORT $LN6@StrToNowSt
$LN25@StrToNowSt:
  000f4	33 f6		 xor	 esi, esi
$LL7@StrToNowSt:

; 470  : 			if(IsDBCSLeadByte(str[i])){

  000f6	0f b6 04 31	 movzx	 eax, BYTE PTR [ecx+esi]
  000fa	8d 1c 31	 lea	 ebx, DWORD PTR [ecx+esi]
  000fd	50		 push	 eax
  000fe	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsDBCSLeadByte@4
  00104	85 c0		 test	 eax, eax
  00106	74 0c		 je	 SHORT $LN14@StrToNowSt

; 471  : 				StockStrBufferDBChar(str+i);

  00108	53		 push	 ebx
  00109	e8 00 00 00 00	 call	 ?StockStrBufferDBChar@@YAXPAD@Z ; StockStrBufferDBChar
  0010e	83 c4 04	 add	 esp, 4

; 472  : 				i++;

  00111	46		 inc	 esi

; 473  : 			}else

  00112	eb 0c		 jmp	 SHORT $LN5@StrToNowSt
$LN14@StrToNowSt:

; 474  : 				StockStrBufferChar(str[i]);

  00114	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  00117	50		 push	 eax
  00118	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  0011d	83 c4 04	 add	 esp, 4
$LN5@StrToNowSt:

; 469  : 		for(i=0;i<strLen;i++){

  00120	8b 8d f8 fb ff
	ff		 mov	 ecx, DWORD PTR _str$GSCopy$1$[ebp]
  00126	46		 inc	 esi
  00127	3b f7		 cmp	 esi, edi
  00129	7c cb		 jl	 SHORT $LL7@StrToNowSt
$LN6@StrToNowSt:

; 475  : 		}
; 476  : 	}
; 477  : }

  0012b	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0012e	5f		 pop	 edi
  0012f	5e		 pop	 esi
  00130	33 cd		 xor	 ecx, ebp
  00132	5b		 pop	 ebx
  00133	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00138	8b e5		 mov	 esp, ebp
  0013a	5d		 pop	 ebp
  0013b	c3		 ret	 0
?StrToNowStrBuffer1@@YAXPAD@Z ENDP			; StrToNowStrBuffer1
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?MoveFilePointInt@@YAHPBDIAAIAAHH@Z
_TEXT	SEGMENT
_pBuffer$ = 8						; size = 4
_nSize$ = 12						; size = 4
_nRead$ = 16						; size = 4
_bRead$ = 20						; size = 4
_nResult$ = 24						; size = 4
?MoveFilePointInt@@YAHPBDIAAIAAHH@Z PROC		; MoveFilePointInt, COMDAT

; 268  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 269  : 	unsigned int nReadCount = nRead;	// è®°å½•ä¸Šæ¬¡æŒ‡é’ˆçš„ä½ç½® [11/28/2007]
; 270  : 	const char* pFind = strstr( pBuffer + nRead,"\n");//find \n

  00004	8b 5d 08	 mov	 ebx, DWORD PTR _pBuffer$[ebp]
  00007	56		 push	 esi
  00008	8b 75 10	 mov	 esi, DWORD PTR _nRead$[ebp]
  0000b	57		 push	 edi
  0000c	68 00 00 00 00	 push	 OFFSET ??_C@_01EEMJAFIK@?6@
  00011	8b 3e		 mov	 edi, DWORD PTR [esi]
  00013	8d 04 1f	 lea	 eax, DWORD PTR [edi+ebx]
  00016	50		 push	 eax
  00017	e8 00 00 00 00	 call	 _strstr
  0001c	83 c4 08	 add	 esp, 8

; 271  : 	if( pFind )

  0001f	85 c0		 test	 eax, eax
  00021	74 07		 je	 SHORT $LN9@MoveFilePo

; 272  : 	{
; 273  : 		nRead = ( pFind - pBuffer + 1 );	// å¾—åˆ°å½“å‰æŒ‡é’ˆçš„ä½ç½® [11/28/2007]  //å¾—åˆ°ç›¸å¯¹ä¸Žæ–‡ä»¶å¼€å§‹ä½ç½®çš„åç§»ä½ç½®// æœ€å…ˆçš„æ³¨é‡Šä¸å‡†ç¡® [æ¨æ–‡é¸½ 2007-12-14]

  00023	2b c3		 sub	 eax, ebx
  00025	40		 inc	 eax
  00026	89 06		 mov	 DWORD PTR [esi], eax
  00028	eb 02		 jmp	 SHORT $LN2@MoveFilePo
$LN9@MoveFilePo:
  0002a	8b 06		 mov	 eax, DWORD PTR [esi]
$LN2@MoveFilePo:

; 274  : 	}
; 275  : 	if ((2 == nRead - nReadCount && nResult !=0)|| nResult == 0)	// /	åˆ¤æ–­è¯»åˆ°çœŸå®žæ•°æ®ï¼ˆ2ä¸ªå­—èŠ‚è¡¨ç¤ºâ€œ\r\nâ€ï¼‰  [11/28/2007]

  0002c	2b c7		 sub	 eax, edi
  0002e	83 f8 02	 cmp	 eax, 2
  00031	74 1d		 je	 SHORT $LN5@MoveFilePo
  00033	83 7d 18 00	 cmp	 DWORD PTR _nResult$[ebp], 0
  00037	74 17		 je	 SHORT $LN5@MoveFilePo

; 276  : 	{
; 277  : 		bRead = FALSE;
; 278  : 	}
; 279  : 	else
; 280  : 	{
; 281  : 		bRead = TRUE;
; 282  : 	}
; 283  : 	if( nRead > nSize )

  00039	8b 45 14	 mov	 eax, DWORD PTR _bRead$[ebp]
  0003c	b9 01 00 00 00	 mov	 ecx, 1
  00041	5f		 pop	 edi
  00042	89 08		 mov	 DWORD PTR [eax], ecx
  00044	8b 45 0c	 mov	 eax, DWORD PTR _nSize$[ebp]
  00047	3b 06		 cmp	 eax, DWORD PTR [esi]
  00049	5e		 pop	 esi
  0004a	1b c0		 sbb	 eax, eax
  0004c	40		 inc	 eax
  0004d	5b		 pop	 ebx

; 284  : 		return false;
; 285  : 	return true;
; 286  : }

  0004e	5d		 pop	 ebp
  0004f	c3		 ret	 0
$LN5@MoveFilePo:

; 276  : 	{
; 277  : 		bRead = FALSE;
; 278  : 	}
; 279  : 	else
; 280  : 	{
; 281  : 		bRead = TRUE;
; 282  : 	}
; 283  : 	if( nRead > nSize )

  00050	8b 45 14	 mov	 eax, DWORD PTR _bRead$[ebp]
  00053	33 c9		 xor	 ecx, ecx
  00055	5f		 pop	 edi
  00056	89 08		 mov	 DWORD PTR [eax], ecx
  00058	8b 45 0c	 mov	 eax, DWORD PTR _nSize$[ebp]
  0005b	3b 06		 cmp	 eax, DWORD PTR [esi]
  0005d	5e		 pop	 esi
  0005e	1b c0		 sbb	 eax, eax
  00060	40		 inc	 eax
  00061	5b		 pop	 ebx

; 284  : 		return false;
; 285  : 	return true;
; 286  : }

  00062	5d		 pop	 ebp
  00063	c3		 ret	 0
?MoveFilePointInt@@YAHPBDIAAIAAHH@Z ENDP		; MoveFilePointInt
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?EncryptFileName@@YAPAXPBDAAI@Z
_TEXT	SEGMENT
_unFileSize$1$ = -1056					; size = 4
_fp$1$ = -1052						; size = 4
_nSize$GSCopy$1$ = -1048				; size = 4
tv432 = -1048						; size = 4
tv427 = -1048						; size = 4
_myConfFileCncryp$ = -1044				; size = 520
_szFile$ = -524						; size = 260
_szResFileTemp$ = -264					; size = 260
__$ArrayPad$ = -4					; size = 4
_pszResFile$ = 8					; size = 4
_nSize$ = 12						; size = 4
?EncryptFileName@@YAPAXPBDAAI@Z PROC			; EncryptFileName, COMDAT

; 226  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 20 04 00
	00		 sub	 esp, 1056		; 00000420H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00013	8b 45 0c	 mov	 eax, DWORD PTR _nSize$[ebp]
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 34   : 				unsigned char	nCode = fst1;

  00016	b1 3c		 mov	 cl, 60			; 0000003cH
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 226  : {

  00018	53		 push	 ebx
  00019	56		 push	 esi
  0001a	57		 push	 edi
  0001b	8b 7d 08	 mov	 edi, DWORD PTR _pszResFile$[ebp]
  0001e	33 f6		 xor	 esi, esi
  00020	89 85 e8 fb ff
	ff		 mov	 DWORD PTR _nSize$GSCopy$1$[ebp], eax
  00026	66 66 0f 1f 84
	00 00 00 00 00	 npad	 10
$LL35@EncryptFil:
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 39   : 					int	nTemp = (a1*nCode) % 256;

  00030	0f b6 d1	 movzx	 edx, cl
  00033	88 8c 35 f4 fb
	ff ff		 mov	 BYTE PTR _myConfFileCncryp$[ebp+esi+8], cl

; 40   : 					nCode = (c1 + nTemp*nCode + b1*nCode) % 256;

  0003a	8b c2		 mov	 eax, edx
  0003c	6b ca 55	 imul	 ecx, edx, 85
  0003f	46		 inc	 esi
  00040	80 c1 68	 add	 cl, 104			; 00000068H
  00043	0f b6 c9	 movzx	 ecx, cl
  00046	0f af c8	 imul	 ecx, eax
  00049	80 e9 37	 sub	 cl, 55			; 00000037H
  0004c	81 fe 00 01 00
	00		 cmp	 esi, 256		; 00000100H
  00052	7c dc		 jl	 SHORT $LL35@EncryptFil

; 41   : 				}
; 42   : 				//@@@	assert(nCode == fst1);
; 43   : 
; 44   : 					nCode = fst2;

  00054	b2 65		 mov	 dl, 101			; 00000065H
  00056	33 f6		 xor	 esi, esi
  00058	0f 1f 84 00 00
	00 00 00	 npad	 8
$LL15@EncryptFil:

; 45   : 				for( i = 0; i < 256; i++)
; 46   : 				{
; 47   : 					m_bufEncrypt2[i] = nCode;
; 48   : 					int	nTemp = a2*nCode;

  00060	0f b6 c2	 movzx	 eax, dl
  00063	6b c8 6b	 imul	 ecx, eax, 107
  00066	88 94 35 f4 fc
	ff ff		 mov	 BYTE PTR _myConfFileCncryp$[ebp+esi+264], dl
  0006d	46		 inc	 esi

; 49   : 					nCode = ((b2 + nTemp)*nCode + c2) & 0xFF;

  0006e	0f b6 c2	 movzx	 eax, dl
  00071	80 c1 49	 add	 cl, 73			; 00000049H
  00074	0f b6 d1	 movzx	 edx, cl
  00077	0f af d0	 imul	 edx, eax
  0007a	80 ea 7f	 sub	 dl, 127			; 0000007fH
  0007d	81 fe 00 01 00
	00		 cmp	 esi, 256		; 00000100H
  00083	7c db		 jl	 SHORT $LL15@EncryptFil
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 230  : 	char szFile[MAX_PATH] = "";

  00085	68 04 01 00 00	 push	 260			; 00000104H
  0008a	8d 85 f4 fd ff
	ff		 lea	 eax, DWORD PTR _szFile$[ebp]
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 21   : 	void Init() { m_nPos1 = m_nPos2 = 0; }

  00090	c7 85 f0 fb ff
	ff 00 00 00 00	 mov	 DWORD PTR _myConfFileCncryp$[ebp+4], 0
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 230  : 	char szFile[MAX_PATH] = "";

  0009a	6a 00		 push	 0
  0009c	50		 push	 eax
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 21   : 	void Init() { m_nPos1 = m_nPos2 = 0; }

  0009d	c7 85 ec fb ff
	ff 00 00 00 00	 mov	 DWORD PTR _myConfFileCncryp$[ebp], 0
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 230  : 	char szFile[MAX_PATH] = "";

  000a7	e8 00 00 00 00	 call	 _memset

; 231  : 	char szResFileTemp[MAX_PATH] = "" ;

  000ac	68 04 01 00 00	 push	 260			; 00000104H
  000b1	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szResFileTemp$[ebp]
  000b7	6a 00		 push	 0
  000b9	50		 push	 eax
  000ba	e8 00 00 00 00	 call	 _memset
  000bf	83 c4 18	 add	 esp, 24			; 00000018H

; 232  : 	lstrcpyn( szResFileTemp , pszResFile , sizeof( szResFileTemp ) ) ;

  000c2	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szResFileTemp$[ebp]
  000c8	68 04 01 00 00	 push	 260			; 00000104H
  000cd	57		 push	 edi
  000ce	50		 push	 eax
  000cf	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__lstrcpynA@12

; 233  : 
; 234  : 	char* pszReadName = strlwr(szResFileTemp); //  [Chancy2008-4-16 21:52]

  000d5	8d 85 f8 fe ff
	ff		 lea	 eax, DWORD PTR _szResFileTemp$[ebp]
  000db	50		 push	 eax
  000dc	e8 00 00 00 00	 call	 _strlwr
  000e1	83 c4 04	 add	 esp, 4

; 235  : 
; 236  : 	if ( !pszReadName )

  000e4	85 c0		 test	 eax, eax
  000e6	0f 84 33 01 00
	00		 je	 $LN43@EncryptFil

; 237  : 		return NULL;
; 238  : 
; 239  : 	sprintf(szFile,"data/%s.bin",pszReadName);

  000ec	50		 push	 eax
  000ed	8d 85 f4 fd ff
	ff		 lea	 eax, DWORD PTR _szFile$[ebp]
  000f3	68 00 00 00 00	 push	 OFFSET ??_C@_0M@OJFNJGNP@data?1?$CFs?4bin@
  000f8	50		 push	 eax
  000f9	e8 00 00 00 00	 call	 _sprintf

; 240  : 
; 241  : 	FILE* fp = fopen(szFile, "rb");

  000fe	8d 85 f4 fd ff
	ff		 lea	 eax, DWORD PTR _szFile$[ebp]
  00104	68 00 00 00 00	 push	 OFFSET ??_C@_02JDPG@rb@
  00109	50		 push	 eax
  0010a	e8 00 00 00 00	 call	 _fopen
  0010f	8b d8		 mov	 ebx, eax
  00111	83 c4 14	 add	 esp, 20			; 00000014H
  00114	89 9d e4 fb ff
	ff		 mov	 DWORD PTR _fp$1$[ebp], ebx

; 242  : 
; 243  : 	if ( !fp )

  0011a	85 db		 test	 ebx, ebx
  0011c	0f 84 fd 00 00
	00		 je	 $LN43@EncryptFil
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 21   : 	void Init() { m_nPos1 = m_nPos2 = 0; }

  00122	33 ff		 xor	 edi, edi
  00124	33 f6		 xor	 esi, esi
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 250  : 	fseek(fp,0,SEEK_END);//move file pointer to file end

  00126	6a 02		 push	 2
  00128	57		 push	 edi
  00129	53		 push	 ebx
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 21   : 	void Init() { m_nPos1 = m_nPos2 = 0; }

  0012a	89 b5 f0 fb ff
	ff		 mov	 DWORD PTR _myConfFileCncryp$[ebp+4], esi
  00130	89 bd ec fb ff
	ff		 mov	 DWORD PTR _myConfFileCncryp$[ebp], edi
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 250  : 	fseek(fp,0,SEEK_END);//move file pointer to file end

  00136	e8 00 00 00 00	 call	 _fseek

; 251  : 	unsigned int unFileSize =  ftell( fp );

  0013b	53		 push	 ebx
  0013c	e8 00 00 00 00	 call	 _ftell

; 252  : 	nSize = ftell( fp );

  00141	ff b5 e4 fb ff
	ff		 push	 DWORD PTR _fp$1$[ebp]
  00147	8b d8		 mov	 ebx, eax
  00149	89 9d e0 fb ff
	ff		 mov	 DWORD PTR _unFileSize$1$[ebp], ebx
  0014f	e8 00 00 00 00	 call	 _ftell
  00154	8b 8d e8 fb ff
	ff		 mov	 ecx, DWORD PTR _nSize$GSCopy$1$[ebp]

; 253  : 	fseek( fp,0,SEEK_SET );// RESTORE

  0015a	57		 push	 edi
  0015b	57		 push	 edi
  0015c	ff b5 e4 fb ff
	ff		 push	 DWORD PTR _fp$1$[ebp]
  00162	89 01		 mov	 DWORD PTR [ecx], eax
  00164	e8 00 00 00 00	 call	 _fseek

; 254  : 
; 255  : 	void* pBuffer = new char[ unFileSize + 1 ]; // apply 1 char memory for '\0' because char pointer

  00169	68 ff 00 00 00	 push	 255			; 000000ffH
  0016e	68 00 00 00 00	 push	 OFFSET ??_C@_0DD@JOCOJABN@?2VBOXSVR?2_stoneage?2repos?2ssm?9sa@
  00173	8d 43 01	 lea	 eax, DWORD PTR [ebx+1]
  00176	6a 01		 push	 1
  00178	50		 push	 eax
  00179	89 85 e8 fb ff
	ff		 mov	 DWORD PTR tv432[ebp], eax
  0017f	e8 00 00 00 00	 call	 ??_U@YAPAXIHPBDH@Z	; operator new[]
  00184	8b d8		 mov	 ebx, eax
  00186	83 c4 30	 add	 esp, 48			; 00000030H

; 256  : 
; 257  : 	if( !pBuffer )

  00189	85 db		 test	 ebx, ebx
  0018b	0f 84 8e 00 00
	00		 je	 $LN43@EncryptFil

; 258  : 		return false;
; 259  : 	memset( pBuffer,0,sizeof( char ) * ( unFileSize + 1 ) );

  00191	ff b5 e8 fb ff
	ff		 push	 DWORD PTR tv432[ebp]
  00197	57		 push	 edi
  00198	53		 push	 ebx
  00199	e8 00 00 00 00	 call	 _memset

; 260  : 	fread( pBuffer,unFileSize,1,fp );

  0019e	ff b5 e4 fb ff
	ff		 push	 DWORD PTR _fp$1$[ebp]
  001a4	6a 01		 push	 1
  001a6	ff b5 e0 fb ff
	ff		 push	 DWORD PTR _unFileSize$1$[ebp]
  001ac	53		 push	 ebx
  001ad	e8 00 00 00 00	 call	 _fread
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 64   : 		for(int i = 0; i < nLen; i++)

  001b2	8b 95 e0 fb ff
	ff		 mov	 edx, DWORD PTR _unFileSize$1$[ebp]
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 260  : 	fread( pBuffer,unFileSize,1,fp );

  001b8	83 c4 1c	 add	 esp, 28			; 0000001cH
  001bb	33 c9		 xor	 ecx, ecx
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\systeminc\EncryptClient.h

; 64   : 		for(int i = 0; i < nLen; i++)

  001bd	85 d2		 test	 edx, edx
  001bf	7e 3d		 jle	 SHORT $LN23@EncryptFil
$LL24@EncryptFil:

; 65   : 		{
; 66   : 			bufMsg[i] ^= m_cGlobalEncrypt.m_bufEncrypt1[m_nPos1];
; 67   : 			bufMsg[i] ^= m_cGlobalEncrypt.m_bufEncrypt2[m_nPos2];

  001c1	8a 84 35 f4 fc
	ff ff		 mov	 al, BYTE PTR _myConfFileCncryp$[ebp+esi+264]
  001c8	32 84 3d f4 fb
	ff ff		 xor	 al, BYTE PTR _myConfFileCncryp$[ebp+edi+8]

; 68   : 			if(++m_nPos1 >= 256)

  001cf	47		 inc	 edi
  001d0	30 04 19	 xor	 BYTE PTR [ecx+ebx], al
  001d3	89 bd ec fb ff
	ff		 mov	 DWORD PTR _myConfFileCncryp$[ebp], edi
  001d9	81 ff 00 01 00
	00		 cmp	 edi, 256		; 00000100H
  001df	7c 18		 jl	 SHORT $LN22@EncryptFil

; 69   : 			{
; 70   : 				m_nPos1 = 0;

  001e1	33 ff		 xor	 edi, edi

; 71   : 				if(++m_nPos2 >= 256)

  001e3	46		 inc	 esi
  001e4	81 fe 00 01 00
	00		 cmp	 esi, 256		; 00000100H
  001ea	89 bd ec fb ff
	ff		 mov	 DWORD PTR _myConfFileCncryp$[ebp], edi
  001f0	0f 4d f7	 cmovge	 esi, edi
  001f3	89 b5 f0 fb ff
	ff		 mov	 DWORD PTR _myConfFileCncryp$[ebp+4], esi
$LN22@EncryptFil:

; 64   : 		for(int i = 0; i < nLen; i++)

  001f9	41		 inc	 ecx
  001fa	3b ca		 cmp	 ecx, edx
  001fc	7c c3		 jl	 SHORT $LL24@EncryptFil
$LN23@EncryptFil:
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 262  : 	fclose(fp);

  001fe	ff b5 e4 fb ff
	ff		 push	 DWORD PTR _fp$1$[ebp]
  00204	e8 00 00 00 00	 call	 _fclose
  00209	83 c4 04	 add	 esp, 4

; 263  : 
; 264  : 	return pBuffer;

  0020c	8b c3		 mov	 eax, ebx
  0020e	5f		 pop	 edi

; 265  : }

  0020f	5e		 pop	 esi
  00210	5b		 pop	 ebx
  00211	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00214	33 cd		 xor	 ecx, ebp
  00216	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0021b	8b e5		 mov	 esp, ebp
  0021d	5d		 pop	 ebp
  0021e	c3		 ret	 0
$LN43@EncryptFil:
  0021f	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  00222	33 c0		 xor	 eax, eax
  00224	5f		 pop	 edi
  00225	5e		 pop	 esi
  00226	33 cd		 xor	 ecx, ebp
  00228	5b		 pop	 ebx
  00229	e8 00 00 00 00	 call	 @__security_check_cookie@4
  0022e	8b e5		 mov	 esp, ebp
  00230	5d		 pop	 ebp
  00231	c3		 ret	 0
?EncryptFileName@@YAPAXPBDAAI@Z ENDP			; EncryptFileName
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\time.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?openChatLogFile@@YAXXZ
_TEXT	SEGMENT
_longTime$1 = -8					; size = 8
?openChatLogFile@@YAXXZ PROC				; openChatLogFile, COMDAT

; 136  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8

; 137  : 	if( chatLogFile == NULL ){

  00006	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?chatLogFile@@3PAU_iobuf@@A, 0 ; chatLogFile
  0000d	75 7e		 jne	 SHORT $LN3@openChatLo
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\time.h

; 522  :             return _time64(_Time);

  0000f	56		 push	 esi
  00010	8d 45 f8	 lea	 eax, DWORD PTR _longTime$1[ebp]
  00013	57		 push	 edi
  00014	50		 push	 eax
  00015	e8 00 00 00 00	 call	 __time64

; 499  :             return _localtime64(_Time);

  0001a	8d 45 f8	 lea	 eax, DWORD PTR _longTime$1[ebp]
  0001d	50		 push	 eax
  0001e	e8 00 00 00 00	 call	 __localtime64
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 144  : 		nowTime = localtime( &longTime );

  00023	8b f0		 mov	 esi, eax

; 145  : 		sprintf( chatLogFileName, "CHAT_%02d%02d%02d.TXT",

  00025	bf 64 00 00 00	 mov	 edi, 100		; 00000064H
  0002a	8b 46 14	 mov	 eax, DWORD PTR [esi+20]
  0002d	99		 cdq
  0002e	f7 ff		 idiv	 edi
  00030	ff 76 0c	 push	 DWORD PTR [esi+12]
  00033	8b 4e 10	 mov	 ecx, DWORD PTR [esi+16]
  00036	41		 inc	 ecx
  00037	51		 push	 ecx
  00038	52		 push	 edx
  00039	68 00 00 00 00	 push	 OFFSET ??_C@_0BG@FPPMNNCD@CHAT_?$CF02d?$CF02d?$CF02d?4TXT@
  0003e	68 00 00 00 00	 push	 OFFSET ?chatLogFileName@@3PADA ; chatLogFileName
  00043	e8 00 00 00 00	 call	 _sprintf

; 146  : 			(nowTime->tm_year % 100), nowTime->tm_mon+1, nowTime->tm_mday );
; 147  : 
; 148  : 		chatLogFile = fopen( chatLogFileName, "a" );

  00048	68 00 00 00 00	 push	 OFFSET ??_C@_01MCMALHOG@a@
  0004d	68 00 00 00 00	 push	 OFFSET ?chatLogFileName@@3PADA ; chatLogFileName
  00052	e8 00 00 00 00	 call	 _fopen
  00057	8b c8		 mov	 ecx, eax
  00059	83 c4 24	 add	 esp, 36			; 00000024H
  0005c	89 0d 00 00 00
	00		 mov	 DWORD PTR ?chatLogFile@@3PAU_iobuf@@A, ecx ; chatLogFile

; 149  : 		if( chatLogFile ){

  00062	85 c9		 test	 ecx, ecx
  00064	74 25		 je	 SHORT $LN9@openChatLo

; 150  : 			fprintf( chatLogFile, "----- Login: %02d/%02d/%02d %02d:%02d:%02d -----\n",

  00066	ff 36		 push	 DWORD PTR [esi]
  00068	8b 46 10	 mov	 eax, DWORD PTR [esi+16]
  0006b	ff 76 04	 push	 DWORD PTR [esi+4]
  0006e	40		 inc	 eax
  0006f	ff 76 08	 push	 DWORD PTR [esi+8]
  00072	ff 76 0c	 push	 DWORD PTR [esi+12]
  00075	50		 push	 eax
  00076	8b 46 14	 mov	 eax, DWORD PTR [esi+20]
  00079	99		 cdq
  0007a	f7 ff		 idiv	 edi
  0007c	52		 push	 edx
  0007d	68 00 00 00 00	 push	 OFFSET ??_C@_0DC@OHCCGGLJ@?9?9?9?9?9?5Login?3?5?$CF02d?1?$CF02d?1?$CF02d?5?$CF02@
  00082	51		 push	 ecx
  00083	e8 00 00 00 00	 call	 _fprintf
  00088	83 c4 20	 add	 esp, 32			; 00000020H
$LN9@openChatLo:
  0008b	5f		 pop	 edi
  0008c	5e		 pop	 esi
$LN3@openChatLo:

; 151  : 				(nowTime->tm_year % 100), nowTime->tm_mon+1, nowTime->tm_mday,
; 152  : 				nowTime->tm_hour, nowTime->tm_min, nowTime->tm_sec );
; 153  : 		}
; 154  : #endif
; 155  : 	}
; 156  : }

  0008d	8b e5		 mov	 esp, ebp
  0008f	5d		 pop	 ebp
  00090	c3		 ret	 0
?openChatLogFile@@YAXXZ ENDP				; openChatLogFile
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?KeyboardTab@@YAXXZ
_TEXT	SEGMENT
__$EHRec$ = -12						; size = 12
?KeyboardTab@@YAXXZ PROC				; KeyboardTab, COMDAT

; 652  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?KeyboardTab@@YAXXZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	56		 push	 esi
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00017	33 c5		 xor	 eax, ebp
  00019	50		 push	 eax
  0001a	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax

; 653  : 	int i,flag = 0;
; 654  : 	
; 655  : 	// îš¼?î¶???????
; 656  : 	if( pNowStrBuffer == NULL ) return;

  00023	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00029	85 f6		 test	 esi, esi
  0002b	0f 84 1d 02 00
	00		 je	 $LN41@KeyboardTa

; 657  : 	
; 658  : 	// îž°?î™‘????? *******************************
; 659  : 	for( i = 0 ; i < MAX_CHAT_REGISTY_STR ; i++ ){

  00031	33 c0		 xor	 eax, eax
  00033	b9 00 00 00 00	 mov	 ecx, OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A ; chatRegistryStr
  00038	33 d2		 xor	 edx, edx
  0003a	66 0f 1f 44 00
	00		 npad	 6
$LL4@KeyboardTa:

; 660  : 		if( pNowStrBuffer == &chatRegistryStr[ i ] ){ 

  00040	3b f1		 cmp	 esi, ecx
  00042	74 17		 je	 SHORT $LN45@KeyboardTa

; 657  : 	
; 658  : 	// îž°?î™‘????? *******************************
; 659  : 	for( i = 0 ; i < MAX_CHAT_REGISTY_STR ; i++ ){

  00044	81 c2 28 01 00
	00		 add	 edx, 296		; 00000128H
  0004a	40		 inc	 eax
  0004b	81 c1 28 01 00
	00		 add	 ecx, 296		; 00000128H
  00051	81 fa 40 09 00
	00		 cmp	 edx, 2368		; 00000940H
  00057	7c e7		 jl	 SHORT $LL4@KeyboardTa

; 660  : 		if( pNowStrBuffer == &chatRegistryStr[ i ] ){ 

  00059	eb 35		 jmp	 SHORT $LN10@KeyboardTa
$LN45@KeyboardTa:
  0005b	f7 05 04 00 00
	00 00 00 00 0c	 test	 DWORD PTR ?joy_con@@3PAKA+4, 201326592 ; 0c000000H

; 661  : 			flag = TRUE;
; 662  : 			break;
; 663  : 		}
; 664  : 	}
; 665  : 	// îž°?î™‘??? *******************************
; 666  : 	if( flag == TRUE ){
; 667  : 		// ???????????
; 668  : 		if( joy_con[ 1 ] & JOY_RSHIFT || joy_con[ 1 ] & JOY_LSHIFT ){

  00065	75 0a		 jne	 SHORT $LN13@KeyboardTa

; 672  : 		}else{
; 673  : 			i++;

  00067	40		 inc	 eax

; 674  : 			// ????????
; 675  : 			if( i >= MAX_CHAT_REGISTY_STR ) i = 0;

  00068	83 f8 08	 cmp	 eax, 8
  0006b	7c 0f		 jl	 SHORT $LN14@KeyboardTa
  0006d	33 c0		 xor	 eax, eax
  0006f	eb 0b		 jmp	 SHORT $LN14@KeyboardTa
$LN13@KeyboardTa:

; 669  : 			i--;

  00071	83 e8 01	 sub	 eax, 1

; 670  : 			// ????????
; 671  : 			if( i < 0 ) i = MAX_CHAT_REGISTY_STR - 1;

  00074	b9 07 00 00 00	 mov	 ecx, 7
  00079	0f 48 c1	 cmovs	 eax, ecx
$LN14@KeyboardTa:

; 676  : 		}
; 677  : 		// îš¼???????î™®
; 678  : 		GetKeyInputFocus( &chatRegistryStr[ i ] );

  0007c	69 c0 28 01 00
	00		 imul	 eax, eax, 296
  00082	05 00 00 00 00	 add	 eax, OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A ; chatRegistryStr
  00087	50		 push	 eax
  00088	e8 00 00 00 00	 call	 ?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z ; GetKeyInputFocus
  0008d	83 c4 04	 add	 esp, 4
$LN10@KeyboardTa:

; 679  : 	}
; 680  : 	
; 681  : 	// ?????????????î™??
; 682  : 	CursorFlashCnt = 20;
; 683  : 	static DWORD dwChannelChangeTime = TimeGetTime();

  00090	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:__tls_array
  00096	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR __tls_index
  0009c	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
  000a6	8b 0c 88	 mov	 ecx, DWORD PTR [eax+ecx*4]
  000a9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA
  000ae	3b 81 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[ecx]
  000b4	0f 8f a4 01 00
	00		 jg	 $LN57@KeyboardTa
$LN5@KeyboardTa:

; 684  : 	if(dwChannelChangeTime + 250 < TimeGetTime()){

  000ba	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  000bf	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?dwChannelChangeTime@?1??KeyboardTab@@YAXXZ@4KA
  000c5	81 c1 fa 00 00
	00		 add	 ecx, 250		; 000000faH
  000cb	3b c8		 cmp	 ecx, eax
  000cd	0f 83 7b 01 00
	00		 jae	 $LN41@KeyboardTa

; 685  : 		dwChannelChangeTime = TimeGetTime();

  000d3	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  000d8	a3 00 00 00 00	 mov	 DWORD PTR ?dwChannelChangeTime@?1??KeyboardTab@@YAXXZ@4KA, eax

; 686  : 
; 687  : 
; 688  : #ifndef _CHATWORLDWIDEPROTOCOL
; 689  : 		TalkMode = (TalkMode + 1) % 6;
; 690  : #else
; 691  : #ifdef _NB_CHANNEL_ALLSERV
; 692  : 		TalkMode = (TalkMode + 1) % 8;

  000dd	a1 00 00 00 00	 mov	 eax, DWORD PTR ?TalkMode@@3HA ; TalkMode
  000e2	40		 inc	 eax
  000e3	25 07 00 00 80	 and	 eax, -2147483641	; 80000007H
  000e8	79 05		 jns	 SHORT $LN53@KeyboardTa
  000ea	48		 dec	 eax
  000eb	83 c8 f8	 or	 eax, -8			; fffffff8H
  000ee	40		 inc	 eax
$LN53@KeyboardTa:
  000ef	a3 00 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, eax ; TalkMode

; 693  : #else
; 694  : 		TalkMode = (TalkMode + 1) % 7;
; 695  : #endif
; 696  : #endif
; 697  : 		switch(TalkMode){

  000f4	83 f8 06	 cmp	 eax, 6
  000f7	0f 87 51 01 00
	00		 ja	 $LN41@KeyboardTa
  000fd	8a 0d a8 00 00
	00		 mov	 cl, BYTE PTR ?pc@@3UPC@@A+168
  00103	ff 24 85 00 00
	00 00		 jmp	 DWORD PTR $LN50@KeyboardTa[eax*4]
$LN17@KeyboardTa:

; 698  : 		case 0:
; 699  : 			strcpy(secretName,"");
; 700  : 			// å·²åœ¨é˜Ÿä¼é¢‘é“åˆ‡å›žä¸€èˆ¬é¢‘é“
; 701  : 			if(pc.etcFlag & PC_ETCFLAG_CHAT_MODE){

  0010a	f6 05 a8 00 00
	00 08		 test	 BYTE PTR ?pc@@3UPC@@A+168, 8
  00111	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?secretName@@3PADA, 0
  00118	0f 84 30 01 00
	00		 je	 $LN41@KeyboardTa

; 702  : 				pc.etcFlag &= ~PC_ETCFLAG_CHAT_MODE;

  0011e	a1 a8 00 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+168
  00123	25 f7 ff 00 00	 and	 eax, 65527		; 0000fff7H
$LN55@KeyboardTa:

; 755  : #else
; 756  : 				TalkMode = 0;	
; 757  : #endif
; 758  : 			break;
; 759  : #endif
; 760  : #ifdef _NB_CHANNEL_ALLSERV
; 761  : 		case 7:
; 762  : 			//TalkMode = 0;
; 763  : 			break;
; 764  : 		}
; 765  : #ifdef _TALK_WINDOW
; 766  : 		if(g_bTalkWindow) TalkWindow.Update();
; 767  : #endif
; 768  : 	}
; 769  : #else
; 770  : 	#ifdef _FRIENDCHANNEL
; 771  : 		TalkMode = (TalkMode + 1) % 3;
; 772  : 		if(TalkMode == 2 ){
; 773  : 			secretFlag = FALSE;
; 774  : 			selChar = -1;
; 775  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 776  : 			pNowStrBuffer->cursor=0;
; 777  : 			pNowStrBuffer->cnt = 0;
; 778  : 			StrToNowStrBuffer("");
; 779  : 			if(strcmp(pc.chatRoomNum, "") == 0)	TalkMode = 0;
; 780  : 		}else	strcpy(secretName,"");
; 781  : 	#else
; 782  : 		#ifdef _TELLCHANNEL
; 783  : 			TalkMode = (TalkMode + 1) % 2;
; 784  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 785  : 			pNowStrBuffer->cursor=0;
; 786  : 			pNowStrBuffer->cnt = 0;
; 787  : 			StrToNowStrBuffer("");
; 788  : 		#endif
; 789  : 	#endif
; 790  : #endif
; 791  : }	

  00128	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bNewServer@@3HA, 0 ; bNewServer
  0012f	0f b7 c8	 movzx	 ecx, ax
  00132	51		 push	 ecx
  00133	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00139	66 a3 a8 00 00
	00		 mov	 WORD PTR ?pc@@3UPC@@A+168, ax
  0013f	74 18		 je	 SHORT $LN19@KeyboardTa
  00141	e8 00 00 00 00	 call	 ?lssproto_FS_send@@YAXHH@Z ; lssproto_FS_send
  00146	83 c4 08	 add	 esp, 8
  00149	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  0014c	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00153	59		 pop	 ecx
  00154	5e		 pop	 esi
  00155	8b e5		 mov	 esp, ebp
  00157	5d		 pop	 ebp
  00158	c3		 ret	 0
$LN19@KeyboardTa:
  00159	e8 00 00 00 00	 call	 ?old_lssproto_FS_send@@YAXHH@Z ; old_lssproto_FS_send
  0015e	83 c4 08	 add	 esp, 8
  00161	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00164	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0016b	59		 pop	 ecx
  0016c	5e		 pop	 esi
  0016d	8b e5		 mov	 esp, ebp
  0016f	5d		 pop	 ebp
  00170	c3		 ret	 0
$LN21@KeyboardTa:

; 703  : 				if(bNewServer) lssproto_FS_send(sockfd,pc.etcFlag);
; 704  : 				else old_lssproto_FS_send(sockfd,pc.etcFlag);
; 705  : 			}
; 706  : 			break;
; 707  : 		case 1:
; 708  : 			// å¯†è¯­é¢‘é“å…³é—­,è·³åˆ°ä¸‹ä¸€ä¸ªé¢‘é“
; 709  : 			if(!(pc.etcFlag & PC_ETCFLAG_CHAT_TELL)) TalkMode++;

  00171	f6 c1 40	 test	 cl, 64			; 00000040H
  00174	0f 85 d4 00 00
	00		 jne	 $LN41@KeyboardTa
  0017a	c7 05 00 00 00
	00 02 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, 2 ; TalkMode
  00184	b8 02 00 00 00	 mov	 eax, 2
$LN23@KeyboardTa:

; 710  : 			else break;
; 711  : 		case 2:
; 712  : 			// æ— é˜Ÿä¼è·³åˆ°ä¸‹ä¸€ä¸ªé¢‘é“
; 713  : 			if(partyModeFlag == 0) TalkMode++;

  00189	66 83 3d 00 00
	00 00 00	 cmp	 WORD PTR ?partyModeFlag@@3FA, 0 ; partyModeFlag
  00191	75 35		 jne	 SHORT $LN25@KeyboardTa
  00193	40		 inc	 eax
  00194	a3 00 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, eax ; TalkMode
$LN26@KeyboardTa:

; 717  : 				else old_lssproto_FS_send(sockfd,pc.etcFlag);
; 718  : 				break;
; 719  : 			}
; 720  : 		case 3:
; 721  : 			// è‹¥é˜Ÿé¢‘æœ‰å¼€,å…³æŽ‰é˜Ÿé¢‘
; 722  : 			if(pc.etcFlag & PC_ETCFLAG_CHAT_MODE){

  00199	f6 c1 08	 test	 cl, 8
  0019c	74 4a		 je	 SHORT $LN32@KeyboardTa

; 723  : 				pc.etcFlag &= ~PC_ETCFLAG_CHAT_MODE;

  0019e	a1 a8 00 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+168
  001a3	25 f7 ff 00 00	 and	 eax, 65527		; 0000fff7H

; 724  : 				if(bNewServer) lssproto_FS_send(sockfd,pc.etcFlag);

  001a8	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bNewServer@@3HA, 0 ; bNewServer
  001af	0f b7 c8	 movzx	 ecx, ax
  001b2	51		 push	 ecx
  001b3	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  001b9	66 a3 a8 00 00
	00		 mov	 WORD PTR ?pc@@3UPC@@A+168, ax
  001bf	74 14		 je	 SHORT $LN31@KeyboardTa
  001c1	e8 00 00 00 00	 call	 ?lssproto_FS_send@@YAXHH@Z ; lssproto_FS_send
  001c6	eb 12		 jmp	 SHORT $LN54@KeyboardTa
$LN25@KeyboardTa:

; 714  : 			else{
; 715  : 				pc.etcFlag |= PC_ETCFLAG_CHAT_MODE;

  001c8	a1 a8 00 00 00	 mov	 eax, DWORD PTR ?pc@@3UPC@@A+168
  001cd	83 c8 08	 or	 eax, 8

; 716  : 				if(bNewServer) lssproto_FS_send(sockfd,pc.etcFlag);

  001d0	e9 53 ff ff ff	 jmp	 $LN55@KeyboardTa
$LN31@KeyboardTa:

; 725  : 				else old_lssproto_FS_send(sockfd,pc.etcFlag);

  001d5	e8 00 00 00 00	 call	 ?old_lssproto_FS_send@@YAXHH@Z ; old_lssproto_FS_send
$LN54@KeyboardTa:

; 726  : 			}
; 727  : 			// å®¶æ—é¢‘é“å…³é—­,è·³åˆ°ä¸‹ä¸€ä¸ªé¢‘é“
; 728  : 			if(!(pc.etcFlag & PC_ETCFLAG_CHAT_FM)) TalkMode++;

  001da	8a 0d a8 00 00
	00		 mov	 cl, BYTE PTR ?pc@@3UPC@@A+168
  001e0	83 c4 08	 add	 esp, 8
  001e3	a1 00 00 00 00	 mov	 eax, DWORD PTR ?TalkMode@@3HA ; TalkMode
$LN32@KeyboardTa:
  001e8	84 c9		 test	 cl, cl
  001ea	78 62		 js	 SHORT $LN41@KeyboardTa
  001ec	40		 inc	 eax
  001ed	a3 00 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, eax ; TalkMode
$LN34@KeyboardTa:

; 729  : 			else break;
; 730  : 		case 4:
; 731  : 			// èŒä¸šé¢‘é“å…³é—­,è·³åˆ°ä¸‹ä¸€ä¸ªé¢‘é“
; 732  : 			if(!(pc.etcFlag & PC_ETCFLAG_CHAT_OCC))

  001f2	8b 0d a8 00 00
	00		 mov	 ecx, DWORD PTR ?pc@@3UPC@@A+168
  001f8	f7 c1 00 01 00
	00		 test	 ecx, 256		; 00000100H
  001fe	75 4e		 jne	 SHORT $LN41@KeyboardTa

; 733  : 				TalkMode++;

  00200	40		 inc	 eax
  00201	a3 00 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, eax ; TalkMode
  00206	eb 06		 jmp	 SHORT $LN37@KeyboardTa
$LN51@KeyboardTa:

; 693  : #else
; 694  : 		TalkMode = (TalkMode + 1) % 7;
; 695  : #endif
; 696  : #endif
; 697  : 		switch(TalkMode){

  00208	8b 0d a8 00 00
	00		 mov	 ecx, DWORD PTR ?pc@@3UPC@@A+168
$LN37@KeyboardTa:

; 734  : 			else break;
; 735  : #ifdef _CHATROOMPROTOCOL
; 736  : 		case 5:
; 737  : 			// èŠå¤©å®¤é¢‘é“
; 738  : 			if(!(pc.etcFlag & PC_ETCFLAG_CHAT_CHAT)){

  0020e	f7 c1 00 04 00
	00		 test	 ecx, 1024		; 00000400H
  00214	75 38		 jne	 SHORT $LN41@KeyboardTa

; 739  : 				secretFlag = FALSE;
; 740  : 				selChar = -1;

  00216	40		 inc	 eax
  00217	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?secretFlag@@3_NA, 0 ; secretFlag
  0021e	c7 05 00 00 00
	00 ff ff ff ff	 mov	 DWORD PTR ?selChar@@3HA, -1 ; selChar

; 741  : #ifdef _CHATWORLDWIDEPROTOCOL
; 742  : 				TalkMode++;

  00228	a3 00 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, eax ; TalkMode

; 743  : #else
; 744  : 				TalkMode = 0;	
; 745  : #endif
; 746  : 				strcpy(secretName,"");

  0022d	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?secretName@@3PADA, 0

; 755  : #else
; 756  : 				TalkMode = 0;	
; 757  : #endif
; 758  : 			break;
; 759  : #endif
; 760  : #ifdef _NB_CHANNEL_ALLSERV
; 761  : 		case 7:
; 762  : 			//TalkMode = 0;
; 763  : 			break;
; 764  : 		}
; 765  : #ifdef _TALK_WINDOW
; 766  : 		if(g_bTalkWindow) TalkWindow.Update();
; 767  : #endif
; 768  : 	}
; 769  : #else
; 770  : 	#ifdef _FRIENDCHANNEL
; 771  : 		TalkMode = (TalkMode + 1) % 3;
; 772  : 		if(TalkMode == 2 ){
; 773  : 			secretFlag = FALSE;
; 774  : 			selChar = -1;
; 775  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 776  : 			pNowStrBuffer->cursor=0;
; 777  : 			pNowStrBuffer->cnt = 0;
; 778  : 			StrToNowStrBuffer("");
; 779  : 			if(strcmp(pc.chatRoomNum, "") == 0)	TalkMode = 0;
; 780  : 		}else	strcpy(secretName,"");
; 781  : 	#else
; 782  : 		#ifdef _TELLCHANNEL
; 783  : 			TalkMode = (TalkMode + 1) % 2;
; 784  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 785  : 			pNowStrBuffer->cursor=0;
; 786  : 			pNowStrBuffer->cnt = 0;
; 787  : 			StrToNowStrBuffer("");
; 788  : 		#endif
; 789  : 	#endif
; 790  : #endif
; 791  : }	

  00234	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00237	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  0023e	59		 pop	 ecx
  0023f	5e		 pop	 esi
  00240	8b e5		 mov	 esp, ebp
  00242	5d		 pop	 ebp
  00243	c3		 ret	 0
$LN40@KeyboardTa:

; 747  : 			}
; 748  : 			break;
; 749  : #endif
; 750  : #ifdef _CHATWORLDWIDEPROTOCOL
; 751  : 		//CC ä¸–ç•Œé¢‘é“
; 752  : 		case 6:
; 753  : #ifdef _NB_CHANNEL_ALLSERV
; 754  : 				TalkMode++;

  00244	c7 05 00 00 00
	00 07 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, 7 ; TalkMode
$LN41@KeyboardTa:

; 755  : #else
; 756  : 				TalkMode = 0;	
; 757  : #endif
; 758  : 			break;
; 759  : #endif
; 760  : #ifdef _NB_CHANNEL_ALLSERV
; 761  : 		case 7:
; 762  : 			//TalkMode = 0;
; 763  : 			break;
; 764  : 		}
; 765  : #ifdef _TALK_WINDOW
; 766  : 		if(g_bTalkWindow) TalkWindow.Update();
; 767  : #endif
; 768  : 	}
; 769  : #else
; 770  : 	#ifdef _FRIENDCHANNEL
; 771  : 		TalkMode = (TalkMode + 1) % 3;
; 772  : 		if(TalkMode == 2 ){
; 773  : 			secretFlag = FALSE;
; 774  : 			selChar = -1;
; 775  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 776  : 			pNowStrBuffer->cursor=0;
; 777  : 			pNowStrBuffer->cnt = 0;
; 778  : 			StrToNowStrBuffer("");
; 779  : 			if(strcmp(pc.chatRoomNum, "") == 0)	TalkMode = 0;
; 780  : 		}else	strcpy(secretName,"");
; 781  : 	#else
; 782  : 		#ifdef _TELLCHANNEL
; 783  : 			TalkMode = (TalkMode + 1) % 2;
; 784  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 785  : 			pNowStrBuffer->cursor=0;
; 786  : 			pNowStrBuffer->cnt = 0;
; 787  : 			StrToNowStrBuffer("");
; 788  : 		#endif
; 789  : 	#endif
; 790  : #endif
; 791  : }	

  0024e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00251	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00258	59		 pop	 ecx
  00259	5e		 pop	 esi
  0025a	8b e5		 mov	 esp, ebp
  0025c	5d		 pop	 ebp
  0025d	c3		 ret	 0
$LN57@KeyboardTa:

; 679  : 	}
; 680  : 	
; 681  : 	// ?????????????î™??
; 682  : 	CursorFlashCnt = 20;
; 683  : 	static DWORD dwChannelChangeTime = TimeGetTime();

  0025e	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA
  00263	e8 00 00 00 00	 call	 __Init_thread_header
  00268	83 c4 04	 add	 esp, 4
  0026b	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA, -1
  00272	0f 85 42 fe ff
	ff		 jne	 $LN5@KeyboardTa
  00278	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  0027f	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  00284	a3 00 00 00 00	 mov	 DWORD PTR ?dwChannelChangeTime@?1??KeyboardTab@@YAXXZ@4KA, eax
  00289	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  00290	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA
  00295	e8 00 00 00 00	 call	 __Init_thread_footer
  0029a	83 c4 04	 add	 esp, 4
  0029d	e9 18 fe ff ff	 jmp	 $LN5@KeyboardTa
  002a2	66 90		 npad	 2
$LN50@KeyboardTa:

; 755  : #else
; 756  : 				TalkMode = 0;	
; 757  : #endif
; 758  : 			break;
; 759  : #endif
; 760  : #ifdef _NB_CHANNEL_ALLSERV
; 761  : 		case 7:
; 762  : 			//TalkMode = 0;
; 763  : 			break;
; 764  : 		}
; 765  : #ifdef _TALK_WINDOW
; 766  : 		if(g_bTalkWindow) TalkWindow.Update();
; 767  : #endif
; 768  : 	}
; 769  : #else
; 770  : 	#ifdef _FRIENDCHANNEL
; 771  : 		TalkMode = (TalkMode + 1) % 3;
; 772  : 		if(TalkMode == 2 ){
; 773  : 			secretFlag = FALSE;
; 774  : 			selChar = -1;
; 775  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 776  : 			pNowStrBuffer->cursor=0;
; 777  : 			pNowStrBuffer->cnt = 0;
; 778  : 			StrToNowStrBuffer("");
; 779  : 			if(strcmp(pc.chatRoomNum, "") == 0)	TalkMode = 0;
; 780  : 		}else	strcpy(secretName,"");
; 781  : 	#else
; 782  : 		#ifdef _TELLCHANNEL
; 783  : 			TalkMode = (TalkMode + 1) % 2;
; 784  : 			pNowStrBuffer->buffer[ 0 ] = NULL;
; 785  : 			pNowStrBuffer->cursor=0;
; 786  : 			pNowStrBuffer->cnt = 0;
; 787  : 			StrToNowStrBuffer("");
; 788  : 		#endif
; 789  : 	#endif
; 790  : #endif
; 791  : }	

  002a4	00 00 00 00	 DD	 $LN17@KeyboardTa
  002a8	00 00 00 00	 DD	 $LN21@KeyboardTa
  002ac	00 00 00 00	 DD	 $LN23@KeyboardTa
  002b0	00 00 00 00	 DD	 $LN26@KeyboardTa
  002b4	00 00 00 00	 DD	 $LN34@KeyboardTa
  002b8	00 00 00 00	 DD	 $LN51@KeyboardTa
  002bc	00 00 00 00	 DD	 $LN40@KeyboardTa
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?KeyboardTab@@YAXXZ$0:
  00000	68 00 00 00 00	 push	 OFFSET ?$TSS0@?1??KeyboardTab@@YAXXZ@4HA
  00005	e8 00 00 00 00	 call	 __Init_thread_abort
  0000a	59		 pop	 ecx
  0000b	c3		 ret	 0
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
  00010	cc		 int	 3
__ehhandler$?KeyboardTab@@YAXXZ:
  00011	90		 npad	 1
  00012	90		 npad	 1
  00013	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00017	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0001a	8b 4a f8	 mov	 ecx, DWORD PTR [edx-8]
  0001d	33 c8		 xor	 ecx, eax
  0001f	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00024	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?KeyboardTab@@YAXXZ
  00029	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?KeyboardTab@@YAXXZ ENDP				; KeyboardTab
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StrToNowStrBuffer@@YAXPAD@Z
_TEXT	SEGMENT
_newstr$1$ = -4						; size = 4
_str$ = 8						; size = 4
?StrToNowStrBuffer@@YAXPAD@Z PROC			; StrToNowStrBuffer, COMDAT

; 401  : void StrToNowStrBuffer( char *str ){

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 402  : #ifdef _NB_CANCEL_FANTI
; 403  : 	if(ç¼–ç  == 950 ){

  00004	81 3d 00 00 00
	00 b6 03 00 00	 cmp	 DWORD PTR ???@@3HA, 950	; ??, 000003b6H
  0000e	53		 push	 ebx
  0000f	56		 push	 esi
  00010	57		 push	 edi
  00011	75 6a		 jne	 SHORT $LN8@StrToNowSt

; 404  : 		extern char* BIG5ToGB2312(const char* szBIG5String);
; 405  : 		char *newstr;
; 406  : 		newstr=BIG5ToGB2312((const char *)str);

  00013	ff 75 08	 push	 DWORD PTR _str$[ebp]
  00016	e8 00 00 00 00	 call	 ?BIG5ToGB2312@@YAPADPBD@Z ; BIG5ToGB2312

; 407  : 		int strLen,i;
; 408  : 		strLen=strlen(newstr);

  0001b	8b f8		 mov	 edi, eax
  0001d	89 45 fc	 mov	 DWORD PTR _newstr$1$[ebp], eax
  00020	83 c4 04	 add	 esp, 4
  00023	8d 57 01	 lea	 edx, DWORD PTR [edi+1]
$LL27@StrToNowSt:
  00026	8a 0f		 mov	 cl, BYTE PTR [edi]
  00028	47		 inc	 edi
  00029	84 c9		 test	 cl, cl
  0002b	75 f9		 jne	 SHORT $LL27@StrToNowSt
  0002d	2b fa		 sub	 edi, edx

; 409  : 		if(strLen>86)

  0002f	83 ff 56	 cmp	 edi, 86			; 00000056H
  00032	7e 07		 jle	 SHORT $LN10@StrToNowSt

; 410  : 			strLen=86;

  00034	bf 56 00 00 00	 mov	 edi, 86			; 00000056H
  00039	eb 08		 jmp	 SHORT $LN26@StrToNowSt
$LN10@StrToNowSt:

; 411  : 		for(i=0;i<strLen;i++){

  0003b	85 ff		 test	 edi, edi
  0003d	0f 8e 8f 00 00
	00		 jle	 $LN6@StrToNowSt
$LN26@StrToNowSt:
  00043	33 f6		 xor	 esi, esi
$LL4@StrToNowSt:

; 412  : 			if(IsDBCSLeadByte(newstr[i])){

  00045	8d 1c 06	 lea	 ebx, DWORD PTR [esi+eax]
  00048	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  0004b	50		 push	 eax
  0004c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsDBCSLeadByte@4
  00052	85 c0		 test	 eax, eax
  00054	74 0c		 je	 SHORT $LN11@StrToNowSt

; 413  : 				StockStrBufferDBChar(newstr+i);

  00056	53		 push	 ebx
  00057	e8 00 00 00 00	 call	 ?StockStrBufferDBChar@@YAXPAD@Z ; StockStrBufferDBChar
  0005c	83 c4 04	 add	 esp, 4

; 414  : 				i++;

  0005f	46		 inc	 esi

; 415  : 			}else

  00060	eb 0c		 jmp	 SHORT $LN2@StrToNowSt
$LN11@StrToNowSt:

; 416  : 				StockStrBufferChar(newstr[i]);

  00062	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  00065	50		 push	 eax
  00066	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  0006b	83 c4 04	 add	 esp, 4
$LN2@StrToNowSt:

; 411  : 		for(i=0;i<strLen;i++){

  0006e	8b 45 fc	 mov	 eax, DWORD PTR _newstr$1$[ebp]
  00071	46		 inc	 esi
  00072	3b f7		 cmp	 esi, edi
  00074	7c cf		 jl	 SHORT $LL4@StrToNowSt

; 429  : 		}
; 430  : 	}
; 431  : #else
; 432  : 	int strLen,i;
; 433  : 	strLen=strlen(str);
; 434  : 	/*if(strLen>=256)
; 435  : 		strLen=255;*/
; 436  : 	if(strLen>86)
; 437  : 		strLen=86;
; 438  : 	for(i=0;i<strLen;i++){
; 439  : 		if(IsDBCSLeadByte(str[i])){
; 440  : 			StockStrBufferDBChar(str+i);
; 441  : 			i++;
; 442  : 		}else
; 443  : 			StockStrBufferChar(str[i]);
; 444  : 	}
; 445  : #endif
; 446  : }

  00076	5f		 pop	 edi
  00077	5e		 pop	 esi
  00078	5b		 pop	 ebx
  00079	8b e5		 mov	 esp, ebp
  0007b	5d		 pop	 ebp
  0007c	c3		 ret	 0
$LN8@StrToNowSt:

; 417  : 		}
; 418  : 	}else{
; 419  : 		int strLen,i;
; 420  : 		strLen=strlen(str);

  0007d	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  00080	8b f9		 mov	 edi, ecx
  00082	8d 57 01	 lea	 edx, DWORD PTR [edi+1]
$LL28@StrToNowSt:
  00085	8a 07		 mov	 al, BYTE PTR [edi]
  00087	47		 inc	 edi
  00088	84 c0		 test	 al, al
  0008a	75 f9		 jne	 SHORT $LL28@StrToNowSt
  0008c	2b fa		 sub	 edi, edx

; 421  : 		if(strLen>86)

  0008e	83 ff 56	 cmp	 edi, 86			; 00000056H
  00091	7e 07		 jle	 SHORT $LN13@StrToNowSt

; 422  : 			strLen=86;

  00093	bf 56 00 00 00	 mov	 edi, 86			; 00000056H
  00098	eb 04		 jmp	 SHORT $LN25@StrToNowSt
$LN13@StrToNowSt:

; 423  : 		for(i=0;i<strLen;i++){

  0009a	85 ff		 test	 edi, edi
  0009c	7e 34		 jle	 SHORT $LN6@StrToNowSt
$LN25@StrToNowSt:
  0009e	33 f6		 xor	 esi, esi
$LL7@StrToNowSt:

; 424  : 			if(IsDBCSLeadByte(str[i])){

  000a0	0f b6 04 0e	 movzx	 eax, BYTE PTR [esi+ecx]
  000a4	8d 1c 0e	 lea	 ebx, DWORD PTR [esi+ecx]
  000a7	50		 push	 eax
  000a8	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsDBCSLeadByte@4
  000ae	85 c0		 test	 eax, eax
  000b0	74 0c		 je	 SHORT $LN14@StrToNowSt

; 425  : 				StockStrBufferDBChar(str+i);

  000b2	53		 push	 ebx
  000b3	e8 00 00 00 00	 call	 ?StockStrBufferDBChar@@YAXPAD@Z ; StockStrBufferDBChar
  000b8	83 c4 04	 add	 esp, 4

; 426  : 				i++;

  000bb	46		 inc	 esi

; 427  : 			}else

  000bc	eb 0c		 jmp	 SHORT $LN5@StrToNowSt
$LN14@StrToNowSt:

; 428  : 				StockStrBufferChar(str[i]);

  000be	0f b6 03	 movzx	 eax, BYTE PTR [ebx]
  000c1	50		 push	 eax
  000c2	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  000c7	83 c4 04	 add	 esp, 4
$LN5@StrToNowSt:

; 423  : 		for(i=0;i<strLen;i++){

  000ca	8b 4d 08	 mov	 ecx, DWORD PTR _str$[ebp]
  000cd	46		 inc	 esi
  000ce	3b f7		 cmp	 esi, edi
  000d0	7c ce		 jl	 SHORT $LL7@StrToNowSt
$LN6@StrToNowSt:
  000d2	5f		 pop	 edi

; 429  : 		}
; 430  : 	}
; 431  : #else
; 432  : 	int strLen,i;
; 433  : 	strLen=strlen(str);
; 434  : 	/*if(strLen>=256)
; 435  : 		strLen=255;*/
; 436  : 	if(strLen>86)
; 437  : 		strLen=86;
; 438  : 	for(i=0;i<strLen;i++){
; 439  : 		if(IsDBCSLeadByte(str[i])){
; 440  : 			StockStrBufferDBChar(str+i);
; 441  : 			i++;
; 442  : 		}else
; 443  : 			StockStrBufferChar(str[i]);
; 444  : 	}
; 445  : #endif
; 446  : }

  000d3	5e		 pop	 esi
  000d4	5b		 pop	 ebx
  000d5	8b e5		 mov	 esp, ebp
  000d7	5d		 pop	 ebp
  000d8	c3		 ret	 0
?StrToNowStrBuffer@@YAXPAD@Z ENDP			; StrToNowStrBuffer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?SetClipboad@@YAXXZ
_TEXT	SEGMENT
?SetClipboad@@YAXXZ PROC				; SetClipboad, COMDAT

; 1555 : 	HGLOBAL hMem;
; 1556 : 	LPTSTR lpMem;
; 1557 : 
; 1558 : 	// îš¼?î¶???????
; 1559 : 	if( pNowStrBuffer == NULL ) return;

  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00005	85 c0		 test	 eax, eax
  00007	74 52		 je	 SHORT $LN1@SetClipboa

; 1560 : 	// îž°??î¡Š?????
; 1561 : 	if( pNowStrBuffer->buffer[ 0 ] == NULL ) return;

  00009	80 38 00	 cmp	 BYTE PTR [eax], 0
  0000c	74 4d		 je	 SHORT $LN1@SetClipboa

; 1562 : 	
; 1563 : 	/* ??????????îŸ• */
; 1564 : 	hMem = GlobalAlloc( GHND, 512 );

  0000e	56		 push	 esi
  0000f	68 00 02 00 00	 push	 512			; 00000200H
  00014	6a 42		 push	 66			; 00000042H
  00016	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GlobalAlloc@8
  0001c	8b f0		 mov	 esi, eax

; 1565 : 	/* ????????????????????îŽ•î™¾ */
; 1566 : 	lpMem = ( LPTSTR )GlobalLock( hMem );

  0001e	56		 push	 esi
  0001f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GlobalLock@4

; 1567 : //	lstrcpy( lpMem, chat_input_buf );
; 1568 : 	/* ??????????îž°??????? */
; 1569 : 	lstrcpy( lpMem, pNowStrBuffer->buffer );

  00025	ff 35 00 00 00
	00		 push	 DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0002b	50		 push	 eax
  0002c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__lstrcpyA@8

; 1570 : 	/* ??????????????? */
; 1571 : 	GlobalUnlock( hMem );

  00032	56		 push	 esi
  00033	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GlobalUnlock@4

; 1572 : 	/* ???????????? */
; 1573 : 	OpenClipboard( hWnd );

  00039	ff 35 00 00 00
	00		 push	 DWORD PTR ?hWnd@@3PAUHWND__@@A ; hWnd
  0003f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__OpenClipboard@4

; 1574 : 	/* ??????????? */
; 1575 : 	EmptyClipboard();

  00045	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__EmptyClipboard@0

; 1576 : 	/* ??????????????????îž°?????? */
; 1577 : 	SetClipboardData( CF_TEXT, hMem );

  0004b	56		 push	 esi
  0004c	6a 01		 push	 1
  0004e	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__SetClipboardData@8

; 1578 : 	/* ???????????? */
; 1579 : 	CloseClipboard();

  00054	5e		 pop	 esi
  00055	ff 25 00 00 00
	00		 jmp	 DWORD PTR __imp__CloseClipboard@0
$LN1@SetClipboa:

; 1580 : 	/* ??????????îŸ´ */
; 1581 : 	//GlobalFree( hMem );
; 1582 : }

  0005b	c3		 ret	 0
?SetClipboad@@YAXXZ ENDP				; SetClipboad
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?GetClipboad@@YAXXZ
_TEXT	SEGMENT
?GetClipboad@@YAXXZ PROC				; GetClipboad, COMDAT

; 1525 : {

  00000	56		 push	 esi

; 1526 : 	HGLOBAL hMem;
; 1527 : 	LPTSTR lpMem;
; 1528 : 
; 1529 : 	/* ???????????? */
; 1530 : 	OpenClipboard( hWnd );

  00001	ff 35 00 00 00
	00		 push	 DWORD PTR ?hWnd@@3PAUHWND__@@A ; hWnd
  00007	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__OpenClipboard@4

; 1531 : 	/* ?????????îž°????????????îŽ•î™¾ */
; 1532 : 	hMem = GetClipboardData( CF_TEXT );

  0000d	6a 01		 push	 1
  0000f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GetClipboardData@4
  00015	8b f0		 mov	 esi, eax

; 1533 : 	/* ??????????î */
; 1534 : 	if( hMem == NULL ){

  00017	85 f6		 test	 esi, esi
  00019	75 07		 jne	 SHORT $LN2@GetClipboa
  0001b	5e		 pop	 esi

; 1535 : 		CloseClipboard();

  0001c	ff 25 00 00 00
	00		 jmp	 DWORD PTR __imp__CloseClipboard@0
$LN2@GetClipboa:

; 1536 : 		return;
; 1537 : 	}
; 1538 : 	/* ????????????? */
; 1539 : 	lpMem = (LPTSTR)GlobalLock( hMem );

  00022	56		 push	 esi
  00023	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GlobalLock@4

; 1540 : 	/* ???????????????îš ??î“†î˜‹ */
; 1541 : //	SetWindowText( hwStrE, lpMem );
; 1542 : //	lstrcpy( chat_input_buf, lpMem );
; 1543 : 
; 1544 : 	// îž°??????îš¼?îž°?????
; 1545 : 	StrToNowStrBuffer( lpMem );

  00029	50		 push	 eax
  0002a	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  0002f	83 c4 04	 add	 esp, 4

; 1546 : 	
; 1547 : 	/* ?????????? */
; 1548 : 	GlobalUnlock( hMem );

  00032	56		 push	 esi
  00033	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__GlobalUnlock@4
  00039	5e		 pop	 esi

; 1549 : 	CloseClipboard();

  0003a	ff 25 00 00 00
	00		 jmp	 DWORD PTR __imp__CloseClipboard@0
?GetClipboad@@YAXXZ ENDP				; GetClipboad
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?CheckName@@YA_NPBD@Z
_TEXT	SEGMENT
tv67 = 8						; size = 4
_strSay$ = 8						; size = 4
?CheckName@@YA_NPBD@Z PROC				; CheckName, COMDAT

; 380  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 381  : 	if ( NULL==strSay ) return true;

  00004	8b 5d 08	 mov	 ebx, DWORD PTR _strSay$[ebp]
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	85 db		 test	 ebx, ebx
  0000b	74 33		 je	 SHORT $LN3@CheckName

; 382  : 	if ( strlen(strSay)==0 ) return true;

  0000d	8b cb		 mov	 ecx, ebx
  0000f	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
$LL14@CheckName:
  00012	8a 01		 mov	 al, BYTE PTR [ecx]
  00014	41		 inc	 ecx
  00015	84 c0		 test	 al, al
  00017	75 f9		 jne	 SHORT $LL14@CheckName
  00019	2b ca		 sub	 ecx, edx
  0001b	74 23		 je	 SHORT $LN3@CheckName

; 383  : 
; 384  : 	for ( size_t i=0;i<MAX_SHIELD_SIZE;i++ )

  0001d	bf 00 00 00 00	 mov	 edi, OFFSET ?NameShieldList@@3PAY0BI@DA ; NameShieldList
  00022	33 f6		 xor	 esi, esi
$LL4@CheckName:

; 385  : 	{
; 386  : 		if ( const char *szRe = strstr( strSay,NameShieldList[i] ) )

  00024	57		 push	 edi
  00025	53		 push	 ebx
  00026	e8 00 00 00 00	 call	 _strstr
  0002b	83 c4 08	 add	 esp, 8
  0002e	85 c0		 test	 eax, eax
  00030	75 15		 jne	 SHORT $LN10@CheckName

; 383  : 
; 384  : 	for ( size_t i=0;i<MAX_SHIELD_SIZE;i++ )

  00032	83 c6 18	 add	 esi, 24			; 00000018H
  00035	83 c7 18	 add	 edi, 24			; 00000018H
  00038	81 fe c0 d4 01
	00		 cmp	 esi, 120000		; 0001d4c0H
  0003e	72 e4		 jb	 SHORT $LL4@CheckName
$LN3@CheckName:
  00040	5f		 pop	 edi

; 387  : 		{
; 388  : 			//	g_objGameMsg.AddMsg( SayShieldList[i].c_str() );             // æµ‹è¯•æ—¶æ˜¾ç¤ºå‡ºæ¥ 
; 389  : 			//	memset( (void*)szRe,szReplace,NameShieldList[i].length() );
; 390  : 			//word = NameShieldList[i];
; 391  : 			return false;
; 392  : 		}
; 393  : 	}
; 394  : 	return true;
; 395  : }

  00041	5e		 pop	 esi
  00042	b0 01		 mov	 al, 1
  00044	5b		 pop	 ebx
  00045	5d		 pop	 ebp
  00046	c3		 ret	 0
$LN10@CheckName:
  00047	5f		 pop	 edi
  00048	5e		 pop	 esi
  00049	32 c0		 xor	 al, al
  0004b	5b		 pop	 ebx
  0004c	5d		 pop	 ebp
  0004d	c3		 ret	 0
?CheckName@@YA_NPBD@Z ENDP				; CheckName
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?CheckSay@@YA_NPBDD@Z
_TEXT	SEGMENT
tv67 = 8						; size = 4
_strSay$ = 8						; size = 4
_szReplace$ = 12					; size = 1
?CheckSay@@YA_NPBDD@Z PROC				; CheckSay, COMDAT

; 363  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 364  : 	if ( NULL==strSay ) return true;

  00004	8b 5d 08	 mov	 ebx, DWORD PTR _strSay$[ebp]
  00007	56		 push	 esi
  00008	57		 push	 edi
  00009	85 db		 test	 ebx, ebx
  0000b	74 33		 je	 SHORT $LN3@CheckSay

; 365  : 	if ( strlen(strSay)==0 ) return true;

  0000d	8b cb		 mov	 ecx, ebx
  0000f	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
$LL14@CheckSay:
  00012	8a 01		 mov	 al, BYTE PTR [ecx]
  00014	41		 inc	 ecx
  00015	84 c0		 test	 al, al
  00017	75 f9		 jne	 SHORT $LL14@CheckSay
  00019	2b ca		 sub	 ecx, edx
  0001b	74 23		 je	 SHORT $LN3@CheckSay

; 366  : 
; 367  : 	for ( size_t i=0;i<MAX_SHIELD_SIZE;i++ )

  0001d	bf 00 00 00 00	 mov	 edi, OFFSET ?SayShieldList@@3PAY0BI@DA ; SayShieldList
  00022	33 f6		 xor	 esi, esi
$LL4@CheckSay:

; 368  : 	{
; 369  : 		if ( const char *szRe = strstr( strSay,SayShieldList[i] ) )

  00024	57		 push	 edi
  00025	53		 push	 ebx
  00026	e8 00 00 00 00	 call	 _strstr
  0002b	83 c4 08	 add	 esp, 8
  0002e	85 c0		 test	 eax, eax
  00030	75 15		 jne	 SHORT $LN10@CheckSay

; 366  : 
; 367  : 	for ( size_t i=0;i<MAX_SHIELD_SIZE;i++ )

  00032	83 c6 18	 add	 esi, 24			; 00000018H
  00035	83 c7 18	 add	 edi, 24			; 00000018H
  00038	81 fe c0 d4 01
	00		 cmp	 esi, 120000		; 0001d4c0H
  0003e	72 e4		 jb	 SHORT $LL4@CheckSay
$LN3@CheckSay:
  00040	5f		 pop	 edi

; 370  : 		{
; 371  : 			//	g_objGameMsg.AddMsg( SayShieldList[i].c_str() );             // æµ‹è¯•æ—¶æ˜¾ç¤ºå‡ºæ¥ 
; 372  : 			//memset( (void*)szRe,szReplace,strlen(SayShieldList[i]) );
; 373  : 			return false;
; 374  : 		}
; 375  : 	}
; 376  : 	return true;
; 377  : }

  00041	5e		 pop	 esi
  00042	b0 01		 mov	 al, 1
  00044	5b		 pop	 ebx
  00045	5d		 pop	 ebp
  00046	c3		 ret	 0
$LN10@CheckSay:
  00047	5f		 pop	 edi
  00048	5e		 pop	 esi
  00049	32 c0		 xor	 al, al
  0004b	5b		 pop	 ebx
  0004c	5d		 pop	 ebp
  0004d	c3		 ret	 0
?CheckSay@@YA_NPBDD@Z ENDP				; CheckSay
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?LoadReadNameShield@@YAHXZ
_TEXT	SEGMENT
_nRead$ = -32						; size = 4
_bRead$ = -28						; size = 4
_pBuffer$1$ = -24					; size = 4
_nSize$ = -20						; size = 4
_szName$ = -16						; size = 11
__$ArrayPad$ = -4					; size = 4
?LoadReadNameShield@@YAHXZ PROC				; LoadReadNameShield, COMDAT

; 325  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 326  : 	char szName[]="ShieldName";

  00010	66 a1 08 00 00
	00		 mov	 ax, WORD PTR ??_C@_0L@DMHAPCJA@ShieldName@+8
  00016	f3 0f 7e 05 00
	00 00 00	 movq	 xmm0, QWORD PTR ??_C@_0L@DMHAPCJA@ShieldName@
  0001e	66 89 45 f8	 mov	 WORD PTR _szName$[ebp+8], ax
  00022	a0 0a 00 00 00	 mov	 al, BYTE PTR ??_C@_0L@DMHAPCJA@ShieldName@+10
  00027	88 45 fa	 mov	 BYTE PTR _szName$[ebp+10], al

; 327  : 	unsigned int nSize;
; 328  : 	char* pBuffer =	(char*)EncryptFileName((char*)szName,nSize);

  0002a	8d 45 ec	 lea	 eax, DWORD PTR _nSize$[ebp]
  0002d	50		 push	 eax
  0002e	8d 45 f0	 lea	 eax, DWORD PTR _szName$[ebp]
  00031	66 0f d6 45 f0	 movq	 QWORD PTR _szName$[ebp], xmm0
  00036	50		 push	 eax
  00037	e8 00 00 00 00	 call	 ?EncryptFileName@@YAPAXPBDAAI@Z ; EncryptFileName
  0003c	8b c8		 mov	 ecx, eax
  0003e	83 c4 08	 add	 esp, 8

; 329  : 	if( !pBuffer )

  00041	33 c0		 xor	 eax, eax
  00043	89 4d e8	 mov	 DWORD PTR _pBuffer$1$[ebp], ecx
  00046	85 c9		 test	 ecx, ecx
  00048	0f 84 99 00 00
	00		 je	 $LN1@LoadReadNa

; 333  : 	BOOL bRead = FALSE;
; 334  : 	int i = 0;

  0004e	57		 push	 edi
  0004f	33 ff		 xor	 edi, edi
  00051	89 45 e0	 mov	 DWORD PTR _nRead$[ebp], eax
  00054	89 45 e4	 mov	 DWORD PTR _bRead$[ebp], eax
  00057	39 45 ec	 cmp	 DWORD PTR _nSize$[ebp], eax

; 335  : 	static char szName_[20] = "";
; 336  : 
; 337  : 	while(nRead < nSize)

  0005a	0f 86 78 00 00
	00		 jbe	 $LN15@LoadReadNa

; 330  : 		return FALSE;
; 331  : 
; 332  : 	unsigned int nRead = 0;		//å·²ç»è¯»äº†çš„

  00060	53		 push	 ebx
  00061	56		 push	 esi
  00062	be 00 00 00 00	 mov	 esi, OFFSET ?NameShieldList@@3PAY0BI@DA ; NameShieldList
  00067	81 ee 00 00 00
	00		 sub	 esi, OFFSET ?szName_@?1??LoadReadNameShield@@YAHXZ@4PADA
  0006d	0f 1f 00	 npad	 3
$LL2@LoadReadNa:

; 338  : 	{
; 339  : 		
; 340  : 		int nResult = sscanf(pBuffer + nRead , "%s", &szName_);

  00070	68 00 00 00 00	 push	 OFFSET ?szName_@?1??LoadReadNameShield@@YAHXZ@4PADA
  00075	03 c1		 add	 eax, ecx
  00077	68 00 00 00 00	 push	 OFFSET ??_C@_02DKCKIIND@?$CFs@
  0007c	50		 push	 eax
  0007d	e8 00 00 00 00	 call	 _sscanf
  00082	8b d8		 mov	 ebx, eax

; 341  : 		if ( !MoveFilePointInt(pBuffer,nSize,nRead,bRead,nResult))

  00084	8d 45 e4	 lea	 eax, DWORD PTR _bRead$[ebp]
  00087	53		 push	 ebx
  00088	50		 push	 eax
  00089	8d 45 e0	 lea	 eax, DWORD PTR _nRead$[ebp]
  0008c	50		 push	 eax
  0008d	ff 75 ec	 push	 DWORD PTR _nSize$[ebp]
  00090	ff 75 e8	 push	 DWORD PTR _pBuffer$1$[ebp]
  00093	e8 00 00 00 00	 call	 ?MoveFilePointInt@@YAHPBDIAAIAAHH@Z ; MoveFilePointInt
  00098	83 c4 20	 add	 esp, 32			; 00000020H
  0009b	85 c0		 test	 eax, eax
  0009d	74 34		 je	 SHORT $LN21@LoadReadNa

; 342  : 			break;
; 343  : 		if ( bRead == FALSE )

  0009f	83 7d e4 00	 cmp	 DWORD PTR _bRead$[ebp], 0
  000a3	74 23		 je	 SHORT $LN8@LoadReadNa

; 344  : 			continue;
; 345  : 		if ( 1 == nResult )

  000a5	83 fb 01	 cmp	 ebx, 1
  000a8	75 29		 jne	 SHORT $LN21@LoadReadNa

; 346  : 		{	
; 347  : 			if(i >= MAX_SHIELD_SIZE)

  000aa	81 ff 88 13 00
	00		 cmp	 edi, 5000		; 00001388H
  000b0	7d 21		 jge	 SHORT $LN21@LoadReadNa

; 348  : 			{
; 349  : 				break;
; 350  : 			}
; 351  : 			strcpy(NameShieldList[i], szName_ );

  000b2	b8 00 00 00 00	 mov	 eax, OFFSET ?szName_@?1??LoadReadNameShield@@YAHXZ@4PADA
$LL11@LoadReadNa:
  000b7	8a 08		 mov	 cl, BYTE PTR [eax]
  000b9	8d 40 01	 lea	 eax, DWORD PTR [eax+1]
  000bc	88 4c 06 ff	 mov	 BYTE PTR [esi+eax-1], cl
  000c0	84 c9		 test	 cl, cl
  000c2	75 f3		 jne	 SHORT $LL11@LoadReadNa

; 352  : 			i++;

  000c4	47		 inc	 edi
  000c5	83 c6 18	 add	 esi, 24			; 00000018H
$LN8@LoadReadNa:

; 335  : 	static char szName_[20] = "";
; 336  : 
; 337  : 	while(nRead < nSize)

  000c8	8b 45 e0	 mov	 eax, DWORD PTR _nRead$[ebp]
  000cb	8b 4d e8	 mov	 ecx, DWORD PTR _pBuffer$1$[ebp]
  000ce	3b 45 ec	 cmp	 eax, DWORD PTR _nSize$[ebp]
  000d1	72 9d		 jb	 SHORT $LL2@LoadReadNa
$LN21@LoadReadNa:
  000d3	8b 4d e8	 mov	 ecx, DWORD PTR _pBuffer$1$[ebp]
  000d6	5e		 pop	 esi
  000d7	5b		 pop	 ebx
$LN15@LoadReadNa:

; 353  : 		}
; 354  : 		else
; 355  : 			break;
; 356  : 	}
; 357  : 	delete[] pBuffer;

  000d8	51		 push	 ecx
  000d9	e8 00 00 00 00	 call	 ??_V@YAXPAX@Z		; operator delete[]
  000de	83 c4 04	 add	 esp, 4

; 358  : 	pBuffer = NULL;
; 359  : 	return TRUE;

  000e1	b8 01 00 00 00	 mov	 eax, 1
  000e6	5f		 pop	 edi
$LN1@LoadReadNa:

; 360  : 
; 361  : }

  000e7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000ea	33 cd		 xor	 ecx, ebp
  000ec	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000f1	8b e5		 mov	 esp, ebp
  000f3	5d		 pop	 ebp
  000f4	c3		 ret	 0
?LoadReadNameShield@@YAHXZ ENDP				; LoadReadNameShield
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?LoadReadSayShield@@YAHXZ
_TEXT	SEGMENT
_nRead$ = -32						; size = 4
_bRead$ = -28						; size = 4
_pBuffer$1$ = -24					; size = 4
_nSize$ = -20						; size = 4
_szName$ = -16						; size = 12
__$ArrayPad$ = -4					; size = 4
?LoadReadSayShield@@YAHXZ PROC				; LoadReadSayShield, COMDAT

; 289  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000b	33 c5		 xor	 eax, ebp
  0000d	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 290  : 	char szName[]="ShieldWorld";

  00010	a1 08 00 00 00	 mov	 eax, DWORD PTR ??_C@_0M@GNOANMGB@ShieldWorld@+8
  00015	f3 0f 7e 05 00
	00 00 00	 movq	 xmm0, QWORD PTR ??_C@_0M@GNOANMGB@ShieldWorld@
  0001d	89 45 f8	 mov	 DWORD PTR _szName$[ebp+8], eax

; 291  : 	unsigned int nSize;
; 292  : 	char* pBuffer =	(char*)EncryptFileName((char*)szName,nSize);

  00020	8d 45 ec	 lea	 eax, DWORD PTR _nSize$[ebp]
  00023	50		 push	 eax
  00024	8d 45 f0	 lea	 eax, DWORD PTR _szName$[ebp]
  00027	66 0f d6 45 f0	 movq	 QWORD PTR _szName$[ebp], xmm0
  0002c	50		 push	 eax
  0002d	e8 00 00 00 00	 call	 ?EncryptFileName@@YAPAXPBDAAI@Z ; EncryptFileName
  00032	8b c8		 mov	 ecx, eax
  00034	83 c4 08	 add	 esp, 8

; 293  : 	if( !pBuffer )

  00037	33 c0		 xor	 eax, eax
  00039	89 4d e8	 mov	 DWORD PTR _pBuffer$1$[ebp], ecx
  0003c	85 c9		 test	 ecx, ecx
  0003e	0f 84 93 00 00
	00		 je	 $LN1@LoadReadSa

; 297  : 	BOOL bRead = FALSE;
; 298  : 	int i = 0;

  00044	57		 push	 edi
  00045	33 ff		 xor	 edi, edi
  00047	89 45 e0	 mov	 DWORD PTR _nRead$[ebp], eax
  0004a	89 45 e4	 mov	 DWORD PTR _bRead$[ebp], eax
  0004d	39 45 ec	 cmp	 DWORD PTR _nSize$[ebp], eax

; 299  : 	static char szWord[20] = "";
; 300  : 	while(nRead < nSize)

  00050	76 76		 jbe	 SHORT $LN15@LoadReadSa

; 294  : 		return FALSE;
; 295  : 
; 296  : 	unsigned int nRead = 0;		//å·²ç»è¯»äº†çš„

  00052	53		 push	 ebx
  00053	56		 push	 esi
  00054	be 00 00 00 00	 mov	 esi, OFFSET ?SayShieldList@@3PAY0BI@DA ; SayShieldList
  00059	81 ee 00 00 00
	00		 sub	 esi, OFFSET ?szWord@?1??LoadReadSayShield@@YAHXZ@4PADA
  0005f	90		 npad	 1
$LL2@LoadReadSa:

; 301  : 	{
; 302  : 			int nResult = sscanf(pBuffer + nRead , "%s", &szWord);

  00060	68 00 00 00 00	 push	 OFFSET ?szWord@?1??LoadReadSayShield@@YAHXZ@4PADA
  00065	03 c1		 add	 eax, ecx
  00067	68 00 00 00 00	 push	 OFFSET ??_C@_02DKCKIIND@?$CFs@
  0006c	50		 push	 eax
  0006d	e8 00 00 00 00	 call	 _sscanf
  00072	8b d8		 mov	 ebx, eax

; 303  : 			if ( !MoveFilePointInt(pBuffer,nSize,nRead,bRead,nResult))

  00074	8d 45 e4	 lea	 eax, DWORD PTR _bRead$[ebp]
  00077	53		 push	 ebx
  00078	50		 push	 eax
  00079	8d 45 e0	 lea	 eax, DWORD PTR _nRead$[ebp]
  0007c	50		 push	 eax
  0007d	ff 75 ec	 push	 DWORD PTR _nSize$[ebp]
  00080	ff 75 e8	 push	 DWORD PTR _pBuffer$1$[ebp]
  00083	e8 00 00 00 00	 call	 ?MoveFilePointInt@@YAHPBDIAAIAAHH@Z ; MoveFilePointInt
  00088	83 c4 20	 add	 esp, 32			; 00000020H
  0008b	85 c0		 test	 eax, eax
  0008d	74 34		 je	 SHORT $LN21@LoadReadSa

; 304  : 				break;
; 305  : 			if ( bRead == FALSE )

  0008f	83 7d e4 00	 cmp	 DWORD PTR _bRead$[ebp], 0
  00093	74 23		 je	 SHORT $LN8@LoadReadSa

; 306  : 				continue;
; 307  : 			if ( 1 == nResult )

  00095	83 fb 01	 cmp	 ebx, 1
  00098	75 29		 jne	 SHORT $LN21@LoadReadSa

; 308  : 			{	
; 309  : 				if(i >= MAX_SHIELD_SIZE)

  0009a	81 ff 88 13 00
	00		 cmp	 edi, 5000		; 00001388H
  000a0	7d 21		 jge	 SHORT $LN21@LoadReadSa

; 310  : 				{
; 311  : 					break;
; 312  : 				}
; 313  : 				strcpy(SayShieldList[i], szWord );

  000a2	b8 00 00 00 00	 mov	 eax, OFFSET ?szWord@?1??LoadReadSayShield@@YAHXZ@4PADA
$LL11@LoadReadSa:
  000a7	8a 08		 mov	 cl, BYTE PTR [eax]
  000a9	8d 40 01	 lea	 eax, DWORD PTR [eax+1]
  000ac	88 4c 06 ff	 mov	 BYTE PTR [esi+eax-1], cl
  000b0	84 c9		 test	 cl, cl
  000b2	75 f3		 jne	 SHORT $LL11@LoadReadSa

; 314  : 				i++;

  000b4	47		 inc	 edi
  000b5	83 c6 18	 add	 esi, 24			; 00000018H
$LN8@LoadReadSa:

; 299  : 	static char szWord[20] = "";
; 300  : 	while(nRead < nSize)

  000b8	8b 45 e0	 mov	 eax, DWORD PTR _nRead$[ebp]
  000bb	8b 4d e8	 mov	 ecx, DWORD PTR _pBuffer$1$[ebp]
  000be	3b 45 ec	 cmp	 eax, DWORD PTR _nSize$[ebp]
  000c1	72 9d		 jb	 SHORT $LL2@LoadReadSa
$LN21@LoadReadSa:
  000c3	8b 4d e8	 mov	 ecx, DWORD PTR _pBuffer$1$[ebp]
  000c6	5e		 pop	 esi
  000c7	5b		 pop	 ebx
$LN15@LoadReadSa:

; 315  : 			}
; 316  : 			else
; 317  : 				break;
; 318  : 	}
; 319  : 	delete[] pBuffer;

  000c8	51		 push	 ecx
  000c9	e8 00 00 00 00	 call	 ??_V@YAXPAX@Z		; operator delete[]
  000ce	83 c4 04	 add	 esp, 4

; 320  : 	pBuffer = NULL;
; 321  : 	return TRUE;

  000d1	b8 01 00 00 00	 mov	 eax, 1
  000d6	5f		 pop	 edi
$LN1@LoadReadSa:

; 322  : }

  000d7	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  000da	33 cd		 xor	 ecx, ebp
  000dc	e8 00 00 00 00	 call	 @__security_check_cookie@4
  000e1	8b e5		 mov	 esp, ebp
  000e3	5d		 pop	 ebp
  000e4	c3		 ret	 0
?LoadReadSayShield@@YAHXZ ENDP				; LoadReadSayShield
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?LoadChatHistoryStr@@YAHXZ
_TEXT	SEGMENT
?LoadChatHistoryStr@@YAHXZ PROC				; LoadChatHistoryStr, COMDAT

; 190  : {

  00000	56		 push	 esi

; 191  : 	FILE *fp;
; 192  : 
; 193  : 	// ?????????îœ±?????
; 194  : 	ChatHistory.nowNo = -1;
; 195  : 
; 196  : 	// îš‡???????????
; 197  : 	if( ( fp = fopen( CAHT_HISTORY_STR_FILE_NAME, "rb" ) ) == NULL ){

  00001	68 00 00 00 00	 push	 OFFSET ??_C@_02JDPG@rb@
  00006	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@NBMCCIBO@data?2chathis?4dat@
  0000b	c7 05 44 41 00
	00 ff ff ff ff	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, -1
  00015	e8 00 00 00 00	 call	 _fopen
  0001a	8b f0		 mov	 esi, eax
  0001c	83 c4 08	 add	 esp, 8
  0001f	85 f6		 test	 esi, esi
  00021	75 41		 jne	 SHORT $LN2@LoadChatHi

; 198  : 		// ?????î’î˜«??î’•
; 199  : 		if( ( fp = fopen( CAHT_HISTORY_STR_FILE_NAME, "wb" ) ) != NULL ){

  00023	68 00 00 00 00	 push	 OFFSET ??_C@_02GMLFBBN@wb@
  00028	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@NBMCCIBO@data?2chathis?4dat@
  0002d	e8 00 00 00 00	 call	 _fopen
  00032	8b f0		 mov	 esi, eax
  00034	83 c4 08	 add	 esp, 8
  00037	85 f6		 test	 esi, esi
  00039	74 1b		 je	 SHORT $LN3@LoadChatHi

; 200  : 			// ???????
; 201  : 			fwrite( &ChatHistory, sizeof( CHAT_HISTORY ) - sizeof( int ), 1, fp );

  0003b	56		 push	 esi
  0003c	6a 01		 push	 1
  0003e	68 44 41 00 00	 push	 16708			; 00004144H
  00043	68 00 00 00 00	 push	 OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
  00048	e8 00 00 00 00	 call	 _fwrite

; 202  : 			fclose( fp );	// ????????

  0004d	56		 push	 esi
  0004e	e8 00 00 00 00	 call	 _fclose
  00053	83 c4 14	 add	 esp, 20			; 00000014H
$LN3@LoadChatHi:

; 203  : 		}
; 204  : 		
; 205  : 		// ?î‘¡???????îœ±?????
; 206  : 		ChatHistory.nowNo = MAX_CHAT_HISTORY - 1;

  00056	c7 05 44 41 00
	00 3f 00 00 00	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, 63 ; 0000003fH

; 207  : 		
; 208  : 		return FALSE;

  00060	33 c0		 xor	 eax, eax
  00062	5e		 pop	 esi

; 221  : }

  00063	c3		 ret	 0
$LN2@LoadChatHi:

; 209  : 	}
; 210  : 	
; 211  : 	// ???îš‡???
; 212  : 	if( fread( &ChatHistory, sizeof( CHAT_HISTORY ) - sizeof( int ), 1, fp ) < 1 ){

  00064	56		 push	 esi
  00065	6a 01		 push	 1
  00067	68 44 41 00 00	 push	 16708			; 00004144H
  0006c	68 00 00 00 00	 push	 OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
  00071	e8 00 00 00 00	 call	 _fread
  00076	83 c4 10	 add	 esp, 16			; 00000010H
  00079	56		 push	 esi
  0007a	83 f8 01	 cmp	 eax, 1
  0007d	73 0c		 jae	 SHORT $LN4@LoadChatHi

; 213  : 		
; 214  : 		fclose( fp );	// ????????

  0007f	e8 00 00 00 00	 call	 _fclose
  00084	83 c4 04	 add	 esp, 4

; 215  : 		return FALSE;

  00087	33 c0		 xor	 eax, eax
  00089	5e		 pop	 esi

; 221  : }

  0008a	c3		 ret	 0
$LN4@LoadChatHi:

; 216  : 	}
; 217  : 	// ????????
; 218  : 	fclose( fp );

  0008b	e8 00 00 00 00	 call	 _fclose
  00090	83 c4 04	 add	 esp, 4

; 219  : 	
; 220  : 	return TRUE;

  00093	b8 01 00 00 00	 mov	 eax, 1
  00098	5e		 pop	 esi

; 221  : }

  00099	c3		 ret	 0
?LoadChatHistoryStr@@YAHXZ ENDP				; LoadChatHistoryStr
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?SaveChatHistoryStr@@YAHH@Z
_TEXT	SEGMENT
_no$ = 8						; size = 4
?SaveChatHistoryStr@@YAHH@Z PROC			; SaveChatHistoryStr, COMDAT

; 159  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 160  : 	FILE *fp; 
; 161  : 	// ????????????
; 162  : 	if( ( fp = fopen( CAHT_HISTORY_STR_FILE_NAME, "r+b" ) ) == NULL )

  00004	68 00 00 00 00	 push	 OFFSET ??_C@_03HMFOOINA@r?$CLb@
  00009	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@NBMCCIBO@data?2chathis?4dat@
  0000e	e8 00 00 00 00	 call	 _fopen
  00013	8b f0		 mov	 esi, eax
  00015	83 c4 08	 add	 esp, 8
  00018	85 f6		 test	 esi, esi
  0001a	74 6f		 je	 SHORT $LN7@SaveChatHi

; 163  : 		return FALSE;
; 164  : 	// ??????î¶????????????î‘´???
; 165  : 	fseek( fp, sizeof( ChatHistory.str[ 0 ] ) * no, SEEK_SET );

  0001c	69 45 08 05 01
	00 00		 imul	 eax, DWORD PTR _no$[ebp], 261
  00023	6a 00		 push	 0
  00025	50		 push	 eax
  00026	56		 push	 esi
  00027	e8 00 00 00 00	 call	 _fseek

; 166  : 	// îž°?????????
; 167  : 	if( fwrite( &ChatHistory.str[ no ], sizeof( ChatHistory.str[ 0 ] ), 1, fp ) < 1 ){

  0002c	69 45 08 05 01
	00 00		 imul	 eax, DWORD PTR _no$[ebp], 261
  00033	56		 push	 esi
  00034	6a 01		 push	 1
  00036	68 05 01 00 00	 push	 261			; 00000105H
  0003b	05 00 00 00 00	 add	 eax, OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
  00040	50		 push	 eax
  00041	e8 00 00 00 00	 call	 _fwrite
  00046	83 c4 1c	 add	 esp, 28			; 0000001cH
  00049	83 f8 01	 cmp	 eax, 1
  0004c	72 34		 jb	 SHORT $LN6@SaveChatHi

; 168  : 	
; 169  : 		fclose( fp );// ????????
; 170  : 		return FALSE;
; 171  : 	}
; 172  : 	
; 173  : 	// ?î‘¡???îœ±??î¶???????????î‘´???
; 174  : 	fseek( fp, sizeof( ChatHistory.str[ 0 ] ) * MAX_CHAT_HISTORY, SEEK_SET );

  0004e	6a 00		 push	 0
  00050	68 40 41 00 00	 push	 16704			; 00004140H
  00055	56		 push	 esi
  00056	e8 00 00 00 00	 call	 _fseek

; 175  : 	// ?î‘¡???îœ±??îŸ•î”¼
; 176  : 	if( fwrite( &no, sizeof( int ), 1, fp ) < 1 ){

  0005b	56		 push	 esi
  0005c	6a 01		 push	 1
  0005e	8d 45 08	 lea	 eax, DWORD PTR _no$[ebp]
  00061	6a 04		 push	 4
  00063	50		 push	 eax
  00064	e8 00 00 00 00	 call	 _fwrite
  00069	83 c4 1c	 add	 esp, 28			; 0000001cH
  0006c	83 f8 01	 cmp	 eax, 1
  0006f	72 11		 jb	 SHORT $LN6@SaveChatHi

; 179  : 		return FALSE;
; 180  : 	}
; 181  : 	
; 182  : 	// ????????
; 183  : 	fclose( fp );

  00071	56		 push	 esi
  00072	e8 00 00 00 00	 call	 _fclose
  00077	83 c4 04	 add	 esp, 4

; 184  : 	
; 185  : 	return TRUE;

  0007a	b8 01 00 00 00	 mov	 eax, 1
  0007f	5e		 pop	 esi

; 186  : }

  00080	5d		 pop	 ebp
  00081	c3		 ret	 0
$LN6@SaveChatHi:

; 177  : 	
; 178  : 		fclose( fp );// ????????

  00082	56		 push	 esi
  00083	e8 00 00 00 00	 call	 _fclose
  00088	83 c4 04	 add	 esp, 4
$LN7@SaveChatHi:

; 186  : }

  0008b	33 c0		 xor	 eax, eax
  0008d	5e		 pop	 esi
  0008e	5d		 pop	 ebp
  0008f	c3		 ret	 0
?SaveChatHistoryStr@@YAHH@Z ENDP			; SaveChatHistoryStr
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?KeyboardBackSpace@@YAXXZ
_TEXT	SEGMENT
tv236 = -4						; size = 4
_cursor$1$ = -4						; size = 4
?KeyboardBackSpace@@YAXXZ PROC				; KeyboardBackSpace, COMDAT

; 633  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	57		 push	 edi

; 634  : 	int byte,cursor;
; 635  : 	if(pNowStrBuffer==NULL) return;

  00005	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0000b	85 ff		 test	 edi, edi
  0000d	74 7a		 je	 SHORT $LN6@KeyboardBa

; 636  : 
; 637  : 	if((cursor=pNowStrBuffer->cursor) > 0){

  0000f	0f b6 87 09 01
	00 00		 movzx	 eax, BYTE PTR [edi+265]
  00016	89 45 fc	 mov	 DWORD PTR _cursor$1$[ebp], eax
  00019	85 c0		 test	 eax, eax
  0001b	74 6c		 je	 SHORT $LN6@KeyboardBa

; 638  : 		char *lpstr=pNowStrBuffer->buffer;
; 639  : 		char *lpstr1=lpstr+cursor;

  0001d	53		 push	 ebx
  0001e	56		 push	 esi
  0001f	8d 1c 07	 lea	 ebx, DWORD PTR [edi+eax]

; 640  : 		byte=lpstr1-GetCharPrev(lpstr,lpstr1);

  00022	53		 push	 ebx
  00023	57		 push	 edi
  00024	e8 00 00 00 00	 call	 ?GetCharPrev@@YAPADPAD0@Z ; GetCharPrev

; 641  : 		for(;cursor<=pNowStrBuffer->cnt;cursor++){

  00029	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0002f	2b d8		 sub	 ebx, eax
  00031	8b 4d fc	 mov	 ecx, DWORD PTR _cursor$1$[ebp]
  00034	83 c4 08	 add	 esp, 8
  00037	0f b6 86 07 01
	00 00		 movzx	 eax, BYTE PTR [esi+263]
  0003e	3b c8		 cmp	 ecx, eax
  00040	77 2a		 ja	 SHORT $LN3@KeyboardBa

; 638  : 		char *lpstr=pNowStrBuffer->buffer;
; 639  : 		char *lpstr1=lpstr+cursor;

  00042	8b c7		 mov	 eax, edi
  00044	8b d3		 mov	 edx, ebx
  00046	2b c3		 sub	 eax, ebx
  00048	03 c1		 add	 eax, ecx
  0004a	2b d7		 sub	 edx, edi
  0004c	89 55 fc	 mov	 DWORD PTR tv236[ebp], edx
  0004f	90		 npad	 1
$LL4@KeyboardBa:

; 642  : 			lpstr[cursor-byte]=lpstr[cursor];

  00050	8a 0c 18	 mov	 cl, BYTE PTR [eax+ebx]
  00053	88 08		 mov	 BYTE PTR [eax], cl
  00055	40		 inc	 eax
  00056	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0005c	03 d0		 add	 edx, eax
  0005e	0f b6 8e 07 01
	00 00		 movzx	 ecx, BYTE PTR [esi+263]
  00065	3b d1		 cmp	 edx, ecx
  00067	8b 55 fc	 mov	 edx, DWORD PTR tv236[ebp]
  0006a	7e e4		 jle	 SHORT $LL4@KeyboardBa
$LN3@KeyboardBa:

; 643  : 		}
; 644  : 		pNowStrBuffer->cnt-=byte;

  0006c	28 9e 07 01 00
	00		 sub	 BYTE PTR [esi+263], bl

; 645  : 		pNowStrBuffer->cursor-=byte;

  00072	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer

; 646  : 		CursorFlashCnt=20;

  00077	5e		 pop	 esi
  00078	28 98 09 01 00
	00		 sub	 BYTE PTR [eax+265], bl
  0007e	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
  00088	5b		 pop	 ebx
$LN6@KeyboardBa:
  00089	5f		 pop	 edi

; 647  : 	}
; 648  : }	

  0008a	8b e5		 mov	 esp, ebp
  0008c	5d		 pop	 ebp
  0008d	c3		 ret	 0
?KeyboardBackSpace@@YAXXZ ENDP				; KeyboardBackSpace
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?KeyboardReturn@@YAXXZ
_TEXT	SEGMENT
_temp$ = -276						; size = 260
__$ArrayPad$ = -16					; size = 4
__$EHRec$ = -12						; size = 12
?KeyboardReturn@@YAXXZ PROC				; KeyboardReturn, COMDAT

; 823  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$?KeyboardReturn@@YAXXZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	81 ec 08 01 00
	00		 sub	 esp, 264		; 00000108H
  00017	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0001c	33 c5		 xor	 eax, ebp
  0001e	89 45 f0	 mov	 DWORD PTR __$ArrayPad$[ebp], eax
  00021	53		 push	 ebx
  00022	56		 push	 esi
  00023	57		 push	 edi
  00024	50		 push	 eax
  00025	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  00028	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax

; 824  : 	//ttom
; 825  : 	static bool first_keydown=true;
; 826  : 	if(!first_keydown) {

  0002e	80 3d 00 00 00
	00 00		 cmp	 BYTE PTR ?first_keydown@?1??KeyboardReturn@@YAXXZ@4_NA, 0
  00035	75 43		 jne	 SHORT $LN7@KeyboardRe

; 827  : 		//cary åä¸ƒ
; 828  : 		static DWORD PreTime=TimeGetTime(),CurTime;

  00037	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:__tls_array
  0003d	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR __tls_index
  00043	8b 0c 88	 mov	 ecx, DWORD PTR [eax+ecx*4]
  00046	a1 00 00 00 00	 mov	 eax, DWORD PTR ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA
  0004b	3b 81 00 00 00
	00		 cmp	 eax, DWORD PTR __Init_thread_epoch[ecx]
  00051	0f 8f c2 03 00
	00		 jg	 $LN59@KeyboardRe
$LN2@KeyboardRe:

; 829  : 		if(((CurTime=TimeGetTime())-PreTime)<500)

  00057	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  0005c	8b c8		 mov	 ecx, eax
  0005e	a3 00 00 00 00	 mov	 DWORD PTR ?CurTime@?4??KeyboardReturn@@YAXXZ@4KA, eax
  00063	2b 0d 00 00 00
	00		 sub	 ecx, DWORD PTR ?PreTime@?4??KeyboardReturn@@YAXXZ@4KA
  00069	81 f9 f4 01 00
	00		 cmp	 ecx, 500		; 000001f4H
  0006f	0f 82 88 03 00
	00		 jb	 $LN1@KeyboardRe

; 830  : 		return;
; 831  : 		PreTime=CurTime;

  00075	a3 00 00 00 00	 mov	 DWORD PTR ?PreTime@?4??KeyboardReturn@@YAXXZ@4KA, eax
$LN7@KeyboardRe:

; 832  : 	}
; 833  : 
; 834  : 	first_keydown=false;

  0007a	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?first_keydown@?1??KeyboardReturn@@YAXXZ@4_NA, 0

; 835  : 	//end
; 836  : 	//ttom
; 837  : 	char bakNo;
; 838  : 	// ?????????îž°????????
; 839  : 	if( GetImeString() != NULL )

  00081	e8 00 00 00 00	 call	 ?GetImeString@@YAPADXZ	; GetImeString
  00086	85 c0		 test	 eax, eax
  00088	0f 85 6f 03 00
	00		 jne	 $LN1@KeyboardRe

; 840  : 		return;
; 841  : 	// ????îš¼??? *******************************
; 842  : 	if( pNowStrBuffer == &MyChatBuffer ){

  0008e	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00094	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  0009a	0f 85 17 01 00
	00		 jne	 $LN10@KeyboardRe

; 843  : 		if( pNowStrBuffer->cnt == 0 )

  000a0	8a 86 07 01 00
	00		 mov	 al, BYTE PTR [esi+263]
  000a6	84 c0		 test	 al, al
  000a8	0f 84 4f 03 00
	00		 je	 $LN1@KeyboardRe

; 844  : 			return;
; 845  : 		pNowStrBuffer->buffer[ pNowStrBuffer->cnt ] = '\0';

  000ae	0f b6 c0	 movzx	 eax, al
  000b1	c6 04 30 00	 mov	 BYTE PTR [eax+esi], 0

; 846  : #ifdef  _STONDEBUG_
; 847  : 		// ????????
; 848  : 		if( strstr( pNowStrBuffer->buffer, "[battlein]" ) )
; 849  : 			EncountFlag = TRUE;
; 850  : 		if( strstr( pNowStrBuffer->buffer, "[battleout]" ) ){
; 851  : 			ChangeProc( PROC_GAME, 1 );
; 852  : 			DeathAllAction();	// ????????
; 853  : 		}
; 854  : 	
; 855  : 		if( strstr( pNowStrBuffer->buffer, "[cary encountoff]" ) ){
; 856  : 			EncountOffFlag = TRUE;
; 857  : 			pNowStrBuffer->cnt = 0;
; 858  : 			pNowStrBuffer->cursor=0;
; 859  : 			*( pNowStrBuffer->buffer )= '\0';
; 860  : 			return;
; 861  : 		}
; 862  : 		if( strstr( pNowStrBuffer->buffer, "[cary encounton]" ) ){
; 863  : 			EncountOffFlag = FALSE;
; 864  : 			pNowStrBuffer->cnt = 0;
; 865  : 			pNowStrBuffer->cursor=0;
; 866  : 			*( pNowStrBuffer->buffer )= '\0';
; 867  : 			return;
; 868  : 		}
; 869  : #endif
; 870  : 		// ??????
; 871  : 		bakNo = ChatHistory.newNo;
; 872  : 		// ??????îœ±??
; 873  : 		ChatHistory.newNo++;
; 874  : 		// ????????
; 875  : 		if( ChatHistory.newNo >= MAX_CHAT_HISTORY )

  000b5	33 f6		 xor	 esi, esi
  000b7	8b 15 40 41 00
	00		 mov	 edx, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704
  000bd	8d 4a 01	 lea	 ecx, DWORD PTR [edx+1]
  000c0	83 f9 40	 cmp	 ecx, 64			; 00000040H
  000c3	8b c1		 mov	 eax, ecx
  000c5	0f 4d c6	 cmovge	 eax, esi
  000c8	a3 40 41 00 00	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704, eax

; 876  : 			ChatHistory.newNo = 0;
; 877  : //cary
; 878  : 		BOOL bSave=TRUE;

  000cd	33 c0		 xor	 eax, eax
  000cf	83 f9 40	 cmp	 ecx, 64			; 00000040H
  000d2	0f 4c c1	 cmovl	 eax, ecx
  000d5	33 ff		 xor	 edi, edi
  000d7	83 f9 40	 cmp	 ecx, 64			; 00000040H
  000da	0f 4c f9	 cmovl	 edi, ecx

; 879  : 		/*
; 880  : 		BOOL bH=FALSE;
; 881  : 		for(int i=0;i<pNowStrBuffer->cnt;i++){
; 882  : 			if(!bH){
; 883  : 				if('['==pNowStrBuffer->buffer[i])
; 884  : 					bH=TRUE;
; 885  : 			}else{
; 886  : 			}
; 887  : 		}
; 888  : 		*/
; 889  : 		/*
; 890  : 		for(int i=0;i<pNowStrBuffer->cnt;i++){
; 891  : 			if('['==pNowStrBuffer->buffer[i]){
; 892  : 				if(strstr( pNowStrBuffer->buffer+i, "debug on]" ) != 0){
; 893  : 					bSave=FALSE;
; 894  : 					break;
; 895  : 				}
; 896  : 			}
; 897  : 		}
; 898  : 		*/
; 899  : 		if(('['==pNowStrBuffer->buffer[0])&&(']'==pNowStrBuffer->buffer[pNowStrBuffer->cnt-1]))

  000dd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  000e3	80 39 5b	 cmp	 BYTE PTR [ecx], 91	; 0000005bH
  000e6	75 1a		 jne	 SHORT $LN14@KeyboardRe
  000e8	8b f8		 mov	 edi, eax
  000ea	0f b6 81 07 01
	00 00		 movzx	 eax, BYTE PTR [ecx+263]
  000f1	80 7c 08 ff 5d	 cmp	 BYTE PTR [eax+ecx-1], 93 ; 0000005dH
  000f6	75 0a		 jne	 SHORT $LN14@KeyboardRe

; 900  : 			bSave=FALSE;

  000f8	0f be c2	 movsx	 eax, dl

; 902  : 			ChatHistory.newNo = bakNo;

  000fb	a3 40 41 00 00	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704, eax

; 903  : 		}else{

  00100	eb 6f		 jmp	 SHORT $LN18@KeyboardRe
$LN14@KeyboardRe:

; 901  : 		if(!bSave){

  00102	0f be f2	 movsx	 esi, dl

; 904  : //end
; 905  : 			// î“·????îž°????
; 906  : 			if( strcmp( pNowStrBuffer->buffer, ChatHistory.str[ bakNo ] ) != 0 ){

  00105	8b d1		 mov	 edx, ecx
  00107	69 c6 05 01 00
	00		 imul	 eax, esi, 261
  0010d	05 00 00 00 00	 add	 eax, OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
$LL53@KeyboardRe:
  00112	8a 1a		 mov	 bl, BYTE PTR [edx]
  00114	3a 18		 cmp	 bl, BYTE PTR [eax]
  00116	75 1a		 jne	 SHORT $LN54@KeyboardRe
  00118	84 db		 test	 bl, bl
  0011a	74 12		 je	 SHORT $LN55@KeyboardRe
  0011c	8a 5a 01	 mov	 bl, BYTE PTR [edx+1]
  0011f	3a 58 01	 cmp	 bl, BYTE PTR [eax+1]
  00122	75 0e		 jne	 SHORT $LN54@KeyboardRe
  00124	83 c2 02	 add	 edx, 2
  00127	83 c0 02	 add	 eax, 2
  0012a	84 db		 test	 bl, bl
  0012c	75 e4		 jne	 SHORT $LL53@KeyboardRe
$LN55@KeyboardRe:
  0012e	33 c0		 xor	 eax, eax
  00130	eb 05		 jmp	 SHORT $LN56@KeyboardRe
$LN54@KeyboardRe:
  00132	1b c0		 sbb	 eax, eax
  00134	83 c8 01	 or	 eax, 1
$LN56@KeyboardRe:
  00137	85 c0		 test	 eax, eax
  00139	74 30		 je	 SHORT $LN17@KeyboardRe

; 907  : 				// ???îž°??????
; 908  : 				strcpy( ChatHistory.str[ ChatHistory.newNo ], pNowStrBuffer->buffer );

  0013b	69 d7 05 01 00
	00		 imul	 edx, edi, 261
  00141	81 c2 00 00 00
	00		 add	 edx, OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
$LL39@KeyboardRe:
  00147	8a 01		 mov	 al, BYTE PTR [ecx]
  00149	8d 49 01	 lea	 ecx, DWORD PTR [ecx+1]
  0014c	88 02		 mov	 BYTE PTR [edx], al
  0014e	8d 52 01	 lea	 edx, DWORD PTR [edx+1]
  00151	84 c0		 test	 al, al
  00153	75 f2		 jne	 SHORT $LL39@KeyboardRe

; 909  : 				// ???????îž°??îŸ•î”¼
; 910  : 				SaveChatHistoryStr( ChatHistory.newNo );

  00155	ff 35 40 41 00
	00		 push	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704
  0015b	e8 00 00 00 00	 call	 ?SaveChatHistoryStr@@YAHH@Z ; SaveChatHistoryStr

; 911  : 			}else{

  00160	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00166	83 c4 04	 add	 esp, 4
  00169	eb 06		 jmp	 SHORT $LN18@KeyboardRe
$LN17@KeyboardRe:

; 912  : 				// ??????????
; 913  : 				ChatHistory.newNo = bakNo;

  0016b	89 35 40 41 00
	00		 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704, esi
$LN18@KeyboardRe:

; 914  : 			}
; 915  : //cary
; 916  : 		}
; 917  : //end
; 918  : 		// ?????îœ±????
; 919  : 		ChatHistory.nowNo = -1;
; 920  : #ifdef  _STONDEBUG_
; 921  : 		if( offlineFlag == FALSE )
; 922  : #endif
; 923  : 
; 924  : 		/*if(!CheckSay(pNowStrBuffer->buffer))
; 925  : 		{
; 926  : 			#ifdef _FONT_SIZE
; 927  : 						StockChatBufferLineExt( "æ‚¨è¾“å…¥å†…å®¹æœ‰ä¸å…è®¸å­—ç¬¦", MyChatBuffer.color, 0 );
; 928  : 			#else
; 929  : 						StockChatBufferLine( "è¾“å…¥å†…å®¹æœ‰ä¸å…è®¸å­—ç¬¦", MyChatBuffer.color );
; 930  : 			#endif
; 931  : 
; 932  : 			return;
; 933  : 		}*/
; 934  : 		chatStrSendForServer( pNowStrBuffer->buffer, MyChatBuffer.color );

  00171	0f b6 05 08 01
	00 00		 movzx	 eax, BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+264
  00178	50		 push	 eax
  00179	51		 push	 ecx
  0017a	c7 05 44 41 00
	00 ff ff ff ff	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, -1
  00184	e8 00 00 00 00	 call	 ?chatStrSendForServer@@YAXPADH@Z ; chatStrSendForServer

; 935  : 		pNowStrBuffer->cnt = 0;

  00189	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0018e	83 c4 08	 add	 esp, 8
  00191	c6 80 07 01 00
	00 00		 mov	 BYTE PTR [eax+263], 0

; 936  : 		pNowStrBuffer->cursor=0;

  00198	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0019d	c6 80 09 01 00
	00 00		 mov	 BYTE PTR [eax+265], 0

; 937  : 		*( pNowStrBuffer->buffer )= '\0';

  001a4	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  001a9	c6 00 00	 mov	 BYTE PTR [eax], 0

; 938  : 	}else

  001ac	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  001b2	e9 7f 01 00 00	 jmp	 $LN4@KeyboardRe
$LN10@KeyboardRe:

; 939  : 	
; 940  : 	// î˜?îŸ‰??? **********************************
; 941  : 	if( pNowStrBuffer == &shougouChange ){

  001b7	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?shougouChange@@3USTR_BUFFER@@A ; shougouChange
  001bd	75 70		 jne	 SHORT $LN19@KeyboardRe

; 942  : 		// ??????îŒ–
; 943  : 		DeathAction( pActMenuWnd3 );

  001bf	ff 35 00 00 00
	00		 push	 DWORD PTR ?pActMenuWnd3@@3PAUaction@@A ; pActMenuWnd3
  001c5	e8 00 00 00 00	 call	 ?DeathAction@@YAXPAUaction@@@Z ; DeathAction

; 944  : 		pActMenuWnd3 = NULL;
; 945  : 		// îš¼????????
; 946  : 		GetKeyInputFocus( &MyChatBuffer );

  001ca	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  001cf	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?pActMenuWnd3@@3PAUaction@@A, 0 ; pActMenuWnd3
  001d9	e8 00 00 00 00	 call	 ?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z ; GetKeyInputFocus

; 947  : 		// ?????îž¼???
; 948  : 		play_se( 203, 320, 240 );

  001de	68 f0 00 00 00	 push	 240			; 000000f0H
  001e3	68 40 01 00 00	 push	 320			; 00000140H
  001e8	68 cb 00 00 00	 push	 203			; 000000cbH
  001ed	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se
  001f2	83 c4 14	 add	 esp, 20			; 00000014H

; 949  : 		// î¡“î“·îŸ‰??î‘˜
; 950  : 		if( bNewServer)

  001f5	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bNewServer@@3HA, 0 ; bNewServer
  001fc	68 00 00 00 00	 push	 OFFSET ?shougouChange@@3USTR_BUFFER@@A ; shougouChange
  00201	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00207	74 13		 je	 SHORT $LN21@KeyboardRe

; 951  : 			lssproto_FT_send( sockfd, shougouChange.buffer ) ; /* ../doc/lssproto.html line 1792 */

  00209	e8 00 00 00 00	 call	 ?lssproto_FT_send@@YAXHPAD@Z ; lssproto_FT_send
  0020e	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00214	83 c4 08	 add	 esp, 8
  00217	e9 1a 01 00 00	 jmp	 $LN4@KeyboardRe
$LN21@KeyboardRe:

; 952  : 		else
; 953  : 			old_lssproto_FT_send( sockfd, shougouChange.buffer ) ; /* ../doc/lssproto.html line 1792 */

  0021c	e8 00 00 00 00	 call	 ?old_lssproto_FT_send@@YAXHPAD@Z ; old_lssproto_FT_send

; 954  : 	}else

  00221	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00227	83 c4 08	 add	 esp, 8
  0022a	e9 07 01 00 00	 jmp	 $LN4@KeyboardRe
$LN19@KeyboardRe:

; 955  : 	
; 956  : 	// î¡“î“·îŸ‰??? **********************************
; 957  : 	if( pNowStrBuffer == &petNameChange ){

  0022f	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?petNameChange@@3USTR_BUFFER@@A ; petNameChange
  00235	75 76		 jne	 SHORT $LN23@KeyboardRe

; 958  : 		// ??????îŒ–
; 959  : 		DeathAction( pActMenuWnd3 );

  00237	ff 35 00 00 00
	00		 push	 DWORD PTR ?pActMenuWnd3@@3PAUaction@@A ; pActMenuWnd3
  0023d	e8 00 00 00 00	 call	 ?DeathAction@@YAXPAUaction@@@Z ; DeathAction

; 960  : 		pActMenuWnd3 = NULL;
; 961  : 		// îš¼????????
; 962  : 		GetKeyInputFocus( &MyChatBuffer );

  00242	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  00247	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?pActMenuWnd3@@3PAUaction@@A, 0 ; pActMenuWnd3
  00251	e8 00 00 00 00	 call	 ?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z ; GetKeyInputFocus

; 963  : 		// ?????îž¼???
; 964  : 		play_se( 203, 320, 240 );

  00256	68 f0 00 00 00	 push	 240			; 000000f0H
  0025b	68 40 01 00 00	 push	 320			; 00000140H
  00260	68 cb 00 00 00	 push	 203			; 000000cbH
  00265	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se
  0026a	83 c4 14	 add	 esp, 20			; 00000014H

; 965  : 		// î¡“î“·îŸ‰??î‘˜
; 966  : 		if( bNewServer)

  0026d	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bNewServer@@3HA, 0 ; bNewServer
  00274	68 00 00 00 00	 push	 OFFSET ?petNameChange@@3USTR_BUFFER@@A ; petNameChange
  00279	ff 35 00 00 00
	00		 push	 DWORD PTR ?petStatusNo@@3HA ; petStatusNo
  0027f	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00285	74 13		 je	 SHORT $LN25@KeyboardRe

; 967  : 			lssproto_KN_send( sockfd, petStatusNo, petNameChange.buffer ) ; /* ../doc/lssproto.html line 1792 */

  00287	e8 00 00 00 00	 call	 ?lssproto_KN_send@@YAXHHPAD@Z ; lssproto_KN_send
  0028c	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00292	83 c4 0c	 add	 esp, 12			; 0000000cH
  00295	e9 9c 00 00 00	 jmp	 $LN4@KeyboardRe
$LN25@KeyboardRe:

; 968  : 		else
; 969  : 			old_lssproto_KN_send( sockfd, petStatusNo, petNameChange.buffer ) ; /* ../doc/lssproto.html line 1792 */

  0029a	e8 00 00 00 00	 call	 ?old_lssproto_KN_send@@YAXHHPAD@Z ; old_lssproto_KN_send

; 970  : 	}else

  0029f	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  002a5	83 c4 0c	 add	 esp, 12			; 0000000cH
  002a8	e9 89 00 00 00	 jmp	 $LN4@KeyboardRe
$LN23@KeyboardRe:

; 971  : 	
; 972  : 	// ????? **********************************
; 973  : 	if( pNowStrBuffer == &MailStr
; 974  : #ifdef __EDEN_AUCTION
; 975  : 		|| pNowStrBuffer == &AuctionStr){

  002ad	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?MailStr@@3USTR_BUFFER@@A ; MailStr
  002b3	74 0b		 je	 SHORT $LL5@KeyboardRe
  002b5	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?AuctionStr@@3USTR_BUFFER@@A ; AuctionStr
  002bb	75 79		 jne	 SHORT $LN4@KeyboardRe
  002bd	0f 1f 00	 npad	 3
$LL5@KeyboardRe:

; 976  : #else
; 977  : 		){
; 978  : #endif
; 979  : 
; 980  : 		char *buffer=pNowStrBuffer->buffer;
; 981  : 		//å°šå¯æ”¾å…¥æ–°è¡Œæ—¶
; 982  : 		if(pNowStrBuffer->cnt < pNowStrBuffer->len-pNowStrBuffer->lineLen){

  002c0	0f b6 be 05 01
	00 00		 movzx	 edi, BYTE PTR [esi+261]
  002c7	0f b6 8e 04 01
	00 00		 movzx	 ecx, BYTE PTR [esi+260]
  002ce	0f b6 86 07 01
	00 00		 movzx	 eax, BYTE PTR [esi+263]
  002d5	2b cf		 sub	 ecx, edi
  002d7	3b c1		 cmp	 eax, ecx
  002d9	7d 5b		 jge	 SHORT $LN4@KeyboardRe

; 983  : 			//æ”¾å…¥ä¸€è¡Œå…¨éƒ¨ä¸ºspaceçš„æ–°è¡Œ
; 984  : 			if((pNowStrBuffer->cursor)%pNowStrBuffer->lineLen == 0)

  002db	0f b6 86 09 01
	00 00		 movzx	 eax, BYTE PTR [esi+265]
  002e2	33 d2		 xor	 edx, edx
  002e4	f7 f7		 div	 edi
  002e6	85 d2		 test	 edx, edx
  002e8	75 10		 jne	 SHORT $LN43@KeyboardRe

; 985  : 				StockStrBufferChar(' ');

  002ea	6a 20		 push	 32			; 00000020H
  002ec	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  002f1	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  002f7	83 c4 04	 add	 esp, 4
$LN43@KeyboardRe:

; 986  : 			while((pNowStrBuffer->cursor)%pNowStrBuffer->lineLen)

  002fa	0f b6 86 09 01
	00 00		 movzx	 eax, BYTE PTR [esi+265]
  00301	33 d2		 xor	 edx, edx
  00303	0f b6 8e 05 01
	00 00		 movzx	 ecx, BYTE PTR [esi+261]
  0030a	f7 f1		 div	 ecx
  0030c	85 d2		 test	 edx, edx
  0030e	74 26		 je	 SHORT $LN4@KeyboardRe
$LL3@KeyboardRe:

; 987  : 				StockStrBufferChar(' ');

  00310	6a 20		 push	 32			; 00000020H
  00312	e8 00 00 00 00	 call	 ?StockStrBufferChar@@YAXD@Z ; StockStrBufferChar
  00317	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0031d	33 d2		 xor	 edx, edx
  0031f	83 c4 04	 add	 esp, 4
  00322	0f b6 86 09 01
	00 00		 movzx	 eax, BYTE PTR [esi+265]
  00329	0f b6 8e 05 01
	00 00		 movzx	 ecx, BYTE PTR [esi+261]
  00330	f7 f1		 div	 ecx
  00332	85 d2		 test	 edx, edx
  00334	75 da		 jne	 SHORT $LL3@KeyboardRe
$LN4@KeyboardRe:

; 988  : 		}
; 989  : 	}else
; 990  : 	
; 991  : 	// ????? **********************************
; 992  : 	if( pNowStrBuffer == &MailStr ){
; 993  : 		// ????????????
; 994  : 		if( MailStr.cnt < MailStr.len - MailStr.lineLen ){
; 995  : 			// ?î– ??
; 996  : 			if( MailStr.cnt % MailStr.lineLen == 0 )
; 997  : 				StockStrBufferChar( ' ' );
; 998  : 			// ??î– ???????îš¼??
; 999  : 			while( MailStr.cnt % MailStr.lineLen )
; 1000 : 				StockStrBufferChar( ' ' );
; 1001 : 		}
; 1002 : 	}
; 1003 : 
; 1004 : 	// ????îš¼??? ****************************
; 1005 : #ifdef _FRIENDCHANNEL       //èŠå¤©å®¤å‘½å
; 1006 : 	char temp[STR_BUFFER_SIZE];
; 1007 : 	if( pNowStrBuffer == &chatRoomName ){

  00336	81 fe 00 00 00
	00		 cmp	 esi, OFFSET ?chatRoomName@@3USTR_BUFFER@@A ; chatRoomName
  0033c	75 6b		 jne	 SHORT $LN35@KeyboardRe

; 1008 : 		GetKeyInputFocus( &MyChatBuffer );

  0033e	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  00343	e8 00 00 00 00	 call	 ?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z ; GetKeyInputFocus

; 1009 : 		play_se( 203, 320, 240 );

  00348	68 f0 00 00 00	 push	 240			; 000000f0H
  0034d	68 40 01 00 00	 push	 320			; 00000140H
  00352	68 cb 00 00 00	 push	 203			; 000000cbH
  00357	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se

; 1010 : 		sprintf(temp,"C|%s",chatRoomName.buffer);

  0035c	68 00 00 00 00	 push	 OFFSET ?chatRoomName@@3USTR_BUFFER@@A ; chatRoomName
  00361	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _temp$[ebp]
  00367	68 00 00 00 00	 push	 OFFSET ??_C@_04DNPDJLGB@C?$HM?$CFs@
  0036c	50		 push	 eax
  0036d	e8 00 00 00 00	 call	 _sprintf

; 1011 : 		lssproto_CHATROOM_send ( sockfd , temp ) ; 

  00372	8d 85 ec fe ff
	ff		 lea	 eax, DWORD PTR _temp$[ebp]
  00378	50		 push	 eax
  00379	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  0037f	e8 00 00 00 00	 call	 ?lssproto_CHATROOM_send@@YAXHPAD@Z ; lssproto_CHATROOM_send

; 1012 : 	 	DeathAction(pSetRoomWnd);

  00384	ff 35 00 00 00
	00		 push	 DWORD PTR ?pSetRoomWnd@@3PAUaction@@A ; pSetRoomWnd
  0038a	e8 00 00 00 00	 call	 ?DeathAction@@YAXPAUaction@@@Z ; DeathAction

; 1013 : 		pSetRoomWnd = NULL;
; 1014 : 		setRoomFlag = FALSE;

  0038f	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00395	83 c4 28	 add	 esp, 40			; 00000028H
  00398	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?pSetRoomWnd@@3PAUaction@@A, 0 ; pSetRoomWnd
  003a2	c6 05 00 00 00
	00 00		 mov	 BYTE PTR ?setRoomFlag@@3_NA, 0 ; setRoomFlag
$LN35@KeyboardRe:

; 1015 : 	}
; 1016 : #endif
; 1017 : 
; 1018 : #ifdef _TELLCHANNEL
; 1019 : 	if(TalkMode == 1){               //èŠå¤©å¯†è¯­æ˜¾ç¤ºäººå

  003a9	83 3d 00 00 00
	00 01		 cmp	 DWORD PTR ?TalkMode@@3HA, 1 ; TalkMode
  003b0	75 2e		 jne	 SHORT $LN36@KeyboardRe

; 1020 : 		pNowStrBuffer->buffer[ 0 ] = NULL;

  003b2	c6 06 00	 mov	 BYTE PTR [esi], 0

; 1021 : 		pNowStrBuffer->cursor=0;

  003b5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer

; 1022 : 		pNowStrBuffer->cnt = 0;
; 1023 : 		StrToNowStrBuffer(secretName);

  003ba	68 00 00 00 00	 push	 OFFSET ?secretName@@3PADA ; secretName
  003bf	c6 80 09 01 00
	00 00		 mov	 BYTE PTR [eax+265], 0
  003c6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  003cb	c6 80 07 01 00
	00 00		 mov	 BYTE PTR [eax+263], 0
  003d2	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  003d7	8b 35 00 00 00
	00		 mov	 esi, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  003dd	83 c4 04	 add	 esp, 4
$LN36@KeyboardRe:

; 1024 : 	}
; 1025 : #endif
; 1026 : 
; 1027 : 	extern STR_BUFFER *idPasswordStr;
; 1028 : 	extern short idKeyReturn;
; 1029 : 	if( pNowStrBuffer == idPasswordStr )

  003e0	3b 35 00 00 00
	00		 cmp	 esi, DWORD PTR ?idPasswordStr@@3PAUSTR_BUFFER@@A ; idPasswordStr
  003e6	75 0b		 jne	 SHORT $LN37@KeyboardRe

; 1030 : 	{
; 1031 : 		idKeyReturn = 1;

  003e8	b8 01 00 00 00	 mov	 eax, 1
  003ed	66 a3 00 00 00
	00		 mov	 WORD PTR ?idKeyReturn@@3FA, ax ; idKeyReturn
$LN37@KeyboardRe:

; 1032 : 	}
; 1033 : 	
; 1034 : 	// ?????????????î™??
; 1035 : 	CursorFlashCnt = 20;

  003f3	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
$LN1@KeyboardRe:

; 1036 : 	
; 1037 : }

  003fd	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00400	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00407	59		 pop	 ecx
  00408	5f		 pop	 edi
  00409	5e		 pop	 esi
  0040a	5b		 pop	 ebx
  0040b	8b 4d f0	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  0040e	33 cd		 xor	 ecx, ebp
  00410	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00415	8b e5		 mov	 esp, ebp
  00417	5d		 pop	 ebp
  00418	c3		 ret	 0
$LN59@KeyboardRe:

; 827  : 		//cary åä¸ƒ
; 828  : 		static DWORD PreTime=TimeGetTime(),CurTime;

  00419	68 00 00 00 00	 push	 OFFSET ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA
  0041e	e8 00 00 00 00	 call	 __Init_thread_header
  00423	83 c4 04	 add	 esp, 4
  00426	83 3d 00 00 00
	00 ff		 cmp	 DWORD PTR ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA, -1
  0042d	0f 85 24 fc ff
	ff		 jne	 $LN2@KeyboardRe
  00433	c7 45 fc 00 00
	00 00		 mov	 DWORD PTR __$EHRec$[ebp+8], 0
  0043a	e8 00 00 00 00	 call	 ?TimeGetTime@@YAIXZ	; TimeGetTime
  0043f	a3 00 00 00 00	 mov	 DWORD PTR ?PreTime@?4??KeyboardReturn@@YAXXZ@4KA, eax
  00444	c7 45 fc ff ff
	ff ff		 mov	 DWORD PTR __$EHRec$[ebp+8], -1
  0044b	68 00 00 00 00	 push	 OFFSET ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA
  00450	e8 00 00 00 00	 call	 __Init_thread_footer
  00455	83 c4 04	 add	 esp, 4
  00458	e9 fa fb ff ff	 jmp	 $LN2@KeyboardRe
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$?KeyboardReturn@@YAXXZ$0:
  00000	68 00 00 00 00	 push	 OFFSET ?$TSS0@?4??KeyboardReturn@@YAXXZ@4HA
  00005	e8 00 00 00 00	 call	 __Init_thread_abort
  0000a	59		 pop	 ecx
  0000b	c3		 ret	 0
  0000c	cc		 int	 3
  0000d	cc		 int	 3
  0000e	cc		 int	 3
  0000f	cc		 int	 3
  00010	cc		 int	 3
__ehhandler$?KeyboardReturn@@YAXXZ:
  00011	90		 npad	 1
  00012	90		 npad	 1
  00013	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00017	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  0001a	8b 8a e8 fe ff
	ff		 mov	 ecx, DWORD PTR [edx-280]
  00020	33 c8		 xor	 ecx, eax
  00022	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00027	8b 4a fc	 mov	 ecx, DWORD PTR [edx-4]
  0002a	33 c8		 xor	 ecx, eax
  0002c	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00031	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$?KeyboardReturn@@YAXXZ
  00036	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
?KeyboardReturn@@YAXXZ ENDP				; KeyboardReturn
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?KeyboardRight@@YAXXZ
_TEXT	SEGMENT
?KeyboardRight@@YAXXZ PROC				; KeyboardRight, COMDAT

; 808  : 	int byte=1,cursor;
; 809  : 	if(pNowStrBuffer==NULL) return;

  00000	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00006	53		 push	 ebx
  00007	bb 01 00 00 00	 mov	 ebx, 1
  0000c	85 c9		 test	 ecx, ecx
  0000e	74 40		 je	 SHORT $LN1@KeyboardRi

; 810  : 	if((cursor=pNowStrBuffer->cursor) < (pNowStrBuffer->cnt)){

  00010	0f b6 91 09 01
	00 00		 movzx	 edx, BYTE PTR [ecx+265]
  00017	0f b6 81 07 01
	00 00		 movzx	 eax, BYTE PTR [ecx+263]
  0001e	3b d0		 cmp	 edx, eax
  00020	73 24		 jae	 SHORT $LN3@KeyboardRi

; 811  : 		char *lpstr=pNowStrBuffer->buffer;
; 812  : 		lpstr+=cursor;
; 813  : 		if(*lpstr && IsDBCSLeadByte(*lpstr))

  00022	8a 04 0a	 mov	 al, BYTE PTR [edx+ecx]
  00025	84 c0		 test	 al, al
  00027	74 17		 je	 SHORT $LN4@KeyboardRi
  00029	50		 push	 eax
  0002a	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__IsDBCSLeadByte@4
  00030	b9 02 00 00 00	 mov	 ecx, 2
  00035	85 c0		 test	 eax, eax
  00037	0f 45 d9	 cmovne	 ebx, ecx
  0003a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
$LN4@KeyboardRi:

; 814  : 			byte=2;
; 815  : 		pNowStrBuffer->cursor+=byte;

  00040	00 99 09 01 00
	00		 add	 BYTE PTR [ecx+265], bl
$LN3@KeyboardRi:

; 816  : 	}
; 817  : 	CursorFlashCnt=20;

  00046	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
$LN1@KeyboardRi:
  00050	5b		 pop	 ebx

; 818  : }

  00051	c3		 ret	 0
?KeyboardRight@@YAXXZ ENDP				; KeyboardRight
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?KeyboardLeft@@YAXXZ
_TEXT	SEGMENT
?KeyboardLeft@@YAXXZ PROC				; KeyboardLeft, COMDAT

; 795  : 	int byte,cursor;
; 796  : 	if(pNowStrBuffer==NULL) return;

  00000	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00005	85 c0		 test	 eax, eax
  00007	74 31		 je	 SHORT $LN3@KeyboardLe

; 797  : 	if((cursor=pNowStrBuffer->cursor) > 0){

  00009	0f b6 88 09 01
	00 00		 movzx	 ecx, BYTE PTR [eax+265]
  00010	85 c9		 test	 ecx, ecx
  00012	74 26		 je	 SHORT $LN3@KeyboardLe

; 798  : 		char *lpstr=pNowStrBuffer->buffer;
; 799  : 		char *lpstr1=lpstr+cursor;

  00014	53		 push	 ebx
  00015	8d 1c 01	 lea	 ebx, DWORD PTR [ecx+eax]

; 800  : 		byte=lpstr1-GetCharPrev(lpstr,lpstr1);

  00018	53		 push	 ebx
  00019	50		 push	 eax
  0001a	e8 00 00 00 00	 call	 ?GetCharPrev@@YAPADPAD0@Z ; GetCharPrev
  0001f	2b d8		 sub	 ebx, eax
  00021	83 c4 08	 add	 esp, 8

; 801  : 		pNowStrBuffer->cursor-=byte;

  00024	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00029	28 98 09 01 00
	00		 sub	 BYTE PTR [eax+265], bl

; 802  : 		CursorFlashCnt=20;

  0002f	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
  00039	5b		 pop	 ebx
$LN3@KeyboardLe:

; 803  : 	}
; 804  : }

  0003a	c3		 ret	 0
?KeyboardLeft@@YAXXZ ENDP				; KeyboardLeft
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?FlashKeyboardCursor@@YAXXZ
_TEXT	SEGMENT
?FlashKeyboardCursor@@YAXXZ PROC			; FlashKeyboardCursor, COMDAT

; 623  : 	if(pNowStrBuffer==NULL) return;

  00000	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00006	85 c9		 test	 ecx, ecx
  00008	74 48		 je	 SHORT $LN4@FlashKeybo

; 624  : 	if(CursorFlashCnt >= 20){

  0000a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CursorFlashCnt@@3HA ; CursorFlashCnt
  0000f	83 f8 14	 cmp	 eax, 20			; 00000014H
  00012	7c 30		 jl	 SHORT $LN3@FlashKeybo

; 625  : 		StockFontBuffer(pNowStrBuffer->imeX, pNowStrBuffer->imeY , pNowStrBuffer->fontPrio, pNowStrBuffer->color, "_" , 0 );

  00014	0f b6 81 08 01
	00 00		 movzx	 eax, BYTE PTR [ecx+264]
  0001b	6a 00		 push	 0
  0001d	68 00 00 00 00	 push	 OFFSET ??_C@_01IDAFKMJL@_@
  00022	50		 push	 eax
  00023	0f b6 81 1c 01
	00 00		 movzx	 eax, BYTE PTR [ecx+284]
  0002a	50		 push	 eax
  0002b	ff b1 18 01 00
	00		 push	 DWORD PTR [ecx+280]
  00031	ff b1 14 01 00
	00		 push	 DWORD PTR [ecx+276]
  00037	e8 00 00 00 00	 call	 ?StockFontBuffer@@YAHHHDHPADH@Z ; StockFontBuffer
  0003c	a1 00 00 00 00	 mov	 eax, DWORD PTR ?CursorFlashCnt@@3HA ; CursorFlashCnt
  00041	83 c4 18	 add	 esp, 24			; 00000018H
$LN3@FlashKeybo:

; 626  : 	}
; 627  : 	CursorFlashCnt++;

  00044	40		 inc	 eax

; 628  : 	if( CursorFlashCnt >= 40 ) CursorFlashCnt = 0;

  00045	33 c9		 xor	 ecx, ecx
  00047	83 f8 28	 cmp	 eax, 40			; 00000028H
  0004a	0f 4d c1	 cmovge	 eax, ecx
  0004d	a3 00 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, eax ; CursorFlashCnt
$LN4@FlashKeybo:

; 629  : }

  00052	c3		 ret	 0
?FlashKeyboardCursor@@YAXXZ ENDP			; FlashKeyboardCursor
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?InitChat@@YAXXZ
_TEXT	SEGMENT
_buf$1 = -8						; size = 3
_buf$ = -1						; size = 1
?InitChat@@YAXXZ PROC					; InitChat, COMDAT

; 75   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 08	 sub	 esp, 8
  00006	56		 push	 esi

; 76   : 	memset(ChatBuffer, 0, sizeof(CHAT_BUFFER) * MAX_CHAT_LINE);

  00007	68 e8 26 00 00	 push	 9960			; 000026e8H
  0000c	6a 00		 push	 0
  0000e	68 00 00 00 00	 push	 OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A ; ChatBuffer
  00013	e8 00 00 00 00	 call	 _memset

; 77   : 	memset(&MyChatBuffer, 0, sizeof(STR_BUFFER));

  00018	68 28 01 00 00	 push	 296			; 00000128H
  0001d	6a 00		 push	 0
  0001f	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  00024	e8 00 00 00 00	 call	 _memset

; 78   : 	MyChatBuffer.len = _FONTDATALEN_ - 10;
; 79   : #ifndef _CHANNEL_MODIFY
; 80   : 	MyChatBuffer.fontPrio = FONT_PRIO_BACK;
; 81   : #else
; 82   : 	MyChatBuffer.fontPrio = FONT_PRIO_CHATBUFFER;
; 83   : #endif
; 84   : #ifdef èŠå¤©è¡¨æƒ…
; 85   : 	MyChatBuffer.x = 24 + 26;	//ì´ëª¨í‹°ì½˜ ë²„íŠ¼ ì˜† ì±„íŒ… ì‹œìž‘ì§€ì 
; 86   : #else
; 87   : 	MyChatBuffer.x = 8;
; 88   : #endif
; 89   : 	MyChatBuffer.y = 434 + DISPLACEMENT_Y;

  00029	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DISPLACEMENT_Y@@3HA ; DISPLACEMENT_Y
  0002e	05 b2 01 00 00	 add	 eax, 434		; 000001b2H
  00033	c6 05 04 01 00
	00 5a		 mov	 BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+260, 90 ; 0000005aH
  0003a	c7 05 1c 01 00
	00 03 00 00 00	 mov	 DWORD PTR ?MyChatBuffer@@3USTR_BUFFER@@A+284, 3
  00044	c7 05 0c 01 00
	00 32 00 00 00	 mov	 DWORD PTR ?MyChatBuffer@@3USTR_BUFFER@@A+268, 50 ; 00000032H
  0004e	a3 10 01 00 00	 mov	 DWORD PTR ?MyChatBuffer@@3USTR_BUFFER@@A+272, eax

; 90   : 	getUserChatOption();

  00053	e8 00 00 00 00	 call	 ?getUserChatOption@@YAXXZ ; getUserChatOption

; 91   : 	//JL fix
; 92   : //	openChatLogFile();
; 93   : #ifdef _CHANNEL_MODIFY
; 94   : 	FILE *pf;
; 95   : 	char buf;
; 96   : 
; 97   : 	if ((pf = fopen("data\\channel.dat","r")) == NULL){

  00058	68 00 00 00 00	 push	 OFFSET ??_C@_01KDCPPGHE@r@
  0005d	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@BLGDDDEM@data?2channel?4dat@
  00062	e8 00 00 00 00	 call	 _fopen
  00067	8b f0		 mov	 esi, eax
  00069	83 c4 20	 add	 esp, 32			; 00000020H
  0006c	85 f6		 test	 esi, esi
  0006e	75 65		 jne	 SHORT $LN2@InitChat

; 98   : 		pc.etcFlag |= PC_ETCFLAG_CHAT_TELL;

  00070	66 83 0d a8 00
	00 00 40	 or	 WORD PTR ?pc@@3UPC@@A+168, 64 ; 00000040H

; 99   : 		if ((pf = fopen("data\\channel.dat", "w+")) == NULL)

  00078	68 00 00 00 00	 push	 OFFSET ??_C@_02CHHAKFFB@w?$CL@
  0007d	68 00 00 00 00	 push	 OFFSET ??_C@_0BB@BLGDDDEM@data?2channel?4dat@
  00082	e8 00 00 00 00	 call	 _fopen
  00087	8b f0		 mov	 esi, eax
  00089	83 c4 08	 add	 esp, 8
  0008c	85 f6		 test	 esi, esi
  0008e	0f 84 15 01 00
	00		 je	 $LN13@InitChat

; 100  : 			return;
; 101  : 		else{
; 102  : 			char buf[3];
; 103  : 
; 104  : 			buf[0] = (pc.etcFlag & PC_ETCFLAG_CHAT_TELL) ? 1:0;

  00094	8a 0d a8 00 00
	00		 mov	 cl, BYTE PTR ?pc@@3UPC@@A+168

; 105  : 			buf[1] = (pc.etcFlag & PC_ETCFLAG_CHAT_SAVE) ? 1:0;
; 106  : 			buf[2] = (pc.etcFlag & PC_ETCFLAG_CHAT_OCC) ? 1:0;

  0009a	a0 a9 00 00 00	 mov	 al, BYTE PTR ?pc@@3UPC@@A+169
  0009f	c0 e9 06	 shr	 cl, 6
  000a2	24 01		 and	 al, 1
  000a4	80 e1 01	 and	 cl, 1
  000a7	88 45 fa	 mov	 BYTE PTR _buf$1[ebp+2], al
  000aa	88 4d f8	 mov	 BYTE PTR _buf$1[ebp], cl

; 107  : 			fwrite(buf, 1, sizeof(buf), pf);

  000ad	8d 45 f8	 lea	 eax, DWORD PTR _buf$1[ebp]
  000b0	8b 0d a8 00 00
	00		 mov	 ecx, DWORD PTR ?pc@@3UPC@@A+168
  000b6	56		 push	 esi
  000b7	6a 03		 push	 3
  000b9	c1 e9 09	 shr	 ecx, 9
  000bc	80 e1 01	 and	 cl, 1
  000bf	6a 01		 push	 1
  000c1	50		 push	 eax
  000c2	88 4d f9	 mov	 BYTE PTR _buf$1[ebp+1], cl
  000c5	e8 00 00 00 00	 call	 _fwrite

; 108  : 			fclose(pf);

  000ca	56		 push	 esi
  000cb	e8 00 00 00 00	 call	 _fclose
  000d0	83 c4 14	 add	 esp, 20			; 00000014H

; 109  : 		}
; 110  : 	}else{

  000d3	eb 6e		 jmp	 SHORT $LN3@InitChat
$LN2@InitChat:

; 111  : 		fread(&buf,1,sizeof(char),pf);

  000d5	56		 push	 esi
  000d6	6a 01		 push	 1
  000d8	8d 45 ff	 lea	 eax, DWORD PTR _buf$[ebp]
  000db	6a 01		 push	 1
  000dd	50		 push	 eax
  000de	e8 00 00 00 00	 call	 _fread
  000e3	83 c4 10	 add	 esp, 16			; 00000010H

; 112  : 		if (buf)

  000e6	80 7d ff 00	 cmp	 BYTE PTR _buf$[ebp], 0
  000ea	74 08		 je	 SHORT $LN6@InitChat

; 113  : 			pc.etcFlag |= PC_ETCFLAG_CHAT_TELL;

  000ec	66 83 0d a8 00
	00 00 40	 or	 WORD PTR ?pc@@3UPC@@A+168, 64 ; 00000040H
$LN6@InitChat:

; 114  : 		fread(&buf,1,sizeof(char),pf);

  000f4	56		 push	 esi
  000f5	6a 01		 push	 1
  000f7	8d 45 ff	 lea	 eax, DWORD PTR _buf$[ebp]
  000fa	6a 01		 push	 1
  000fc	50		 push	 eax
  000fd	e8 00 00 00 00	 call	 _fread
  00102	83 c4 10	 add	 esp, 16			; 00000010H

; 115  : 		if (buf)

  00105	80 7d ff 00	 cmp	 BYTE PTR _buf$[ebp], 0
  00109	74 0c		 je	 SHORT $LN7@InitChat

; 116  : 			pc.etcFlag |= PC_ETCFLAG_CHAT_SAVE;

  0010b	b8 00 02 00 00	 mov	 eax, 512		; 00000200H
  00110	66 09 05 a8 00
	00 00		 or	 WORD PTR ?pc@@3UPC@@A+168, ax
$LN7@InitChat:

; 117  : 		fread(&buf,1,sizeof(char),pf);

  00117	56		 push	 esi
  00118	6a 01		 push	 1
  0011a	8d 45 ff	 lea	 eax, DWORD PTR _buf$[ebp]
  0011d	6a 01		 push	 1
  0011f	50		 push	 eax
  00120	e8 00 00 00 00	 call	 _fread
  00125	83 c4 10	 add	 esp, 16			; 00000010H

; 118  : 		if (buf)

  00128	80 7d ff 00	 cmp	 BYTE PTR _buf$[ebp], 0
  0012c	74 0c		 je	 SHORT $LN8@InitChat

; 119  : 			pc.etcFlag |= PC_ETCFLAG_CHAT_OCC;

  0012e	b8 00 01 00 00	 mov	 eax, 256		; 00000100H
  00133	66 09 05 a8 00
	00 00		 or	 WORD PTR ?pc@@3UPC@@A+168, ax
$LN8@InitChat:

; 120  : 		fclose(pf);

  0013a	56		 push	 esi
  0013b	e8 00 00 00 00	 call	 _fclose
  00140	83 c4 04	 add	 esp, 4
$LN3@InitChat:

; 121  : 	}
; 122  : 
; 123  : 	if (pc.familyleader <= 0) pc.etcFlag &= ~PC_ETCFLAG_CHAT_FM;

  00143	83 3d 08 51 00
	00 00		 cmp	 DWORD PTR ?pc@@3UPC@@A+20744, 0
  0014a	66 a1 a8 00 00
	00		 mov	 ax, WORD PTR ?pc@@3UPC@@A+168
  00150	7f 0a		 jg	 SHORT $LN9@InitChat
  00152	b9 7f ff 00 00	 mov	 ecx, 65407		; 0000ff7fH
  00157	66 23 c1	 and	 ax, cx
  0015a	eb 08		 jmp	 SHORT $LN15@InitChat
$LN9@InitChat:

; 124  : 	else pc.etcFlag |= PC_ETCFLAG_CHAT_FM;

  0015c	b9 80 00 00 00	 mov	 ecx, 128		; 00000080H
  00161	66 0b c1	 or	 ax, cx
$LN15@InitChat:

; 125  : 
; 126  : 	if (pc.profession_class == 0) pc.etcFlag &= ~PC_ETCFLAG_CHAT_OCC;

  00164	83 3d 84 a1 00
	00 00		 cmp	 DWORD PTR ?pc@@3UPC@@A+41348, 0
  0016b	66 a3 a8 00 00
	00		 mov	 WORD PTR ?pc@@3UPC@@A+168, ax
  00171	75 0e		 jne	 SHORT $LN11@InitChat
  00173	b9 ff fe 00 00	 mov	 ecx, 65279		; 0000feffH
  00178	66 23 c1	 and	 ax, cx
  0017b	66 a3 a8 00 00
	00		 mov	 WORD PTR ?pc@@3UPC@@A+168, ax
$LN11@InitChat:

; 127  : 
; 128  : 	//else pc.etcFlag |= PC_ETCFLAG_CHAT_OCC;
; 129  : 
; 130  : 	if (bNewServer) lssproto_FS_send(sockfd,pc.etcFlag);

  00181	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?bNewServer@@3HA, 0 ; bNewServer
  00188	0f b7 c0	 movzx	 eax, ax
  0018b	50		 push	 eax
  0018c	ff 35 00 00 00
	00		 push	 DWORD PTR ?sockfd@@3IA	; sockfd
  00192	74 0d		 je	 SHORT $LN12@InitChat
  00194	e8 00 00 00 00	 call	 ?lssproto_FS_send@@YAXHH@Z ; lssproto_FS_send

; 132  : #endif
; 133  : }

  00199	83 c4 08	 add	 esp, 8
  0019c	5e		 pop	 esi
  0019d	8b e5		 mov	 esp, ebp
  0019f	5d		 pop	 ebp
  001a0	c3		 ret	 0
$LN12@InitChat:

; 131  : 	else old_lssproto_FS_send(sockfd,pc.etcFlag);

  001a1	e8 00 00 00 00	 call	 ?old_lssproto_FS_send@@YAXHH@Z ; old_lssproto_FS_send

; 132  : #endif
; 133  : }

  001a6	83 c4 08	 add	 esp, 8
$LN13@InitChat:
  001a9	5e		 pop	 esi
  001aa	8b e5		 mov	 esp, ebp
  001ac	5d		 pop	 ebp
  001ad	c3		 ret	 0
?InitChat@@YAXXZ ENDP					; InitChat
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z
_TEXT	SEGMENT
_pStrBuffer$ = 8					; size = 4
?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z PROC		; GetKeyInputFocus, COMDAT

; 1507 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1508 : 	
; 1509 : 	// îš¼?î¶?????
; 1510 : 	//if( pNowStrBuffer != NULL ){
; 1511 : 		// ?????îŒ´?????
; 1512 : 	//	if(	pNowStrBuffer->buffer[ pNowStrBuffer->cnt ] != '\0' ){
; 1513 : 			// îŽ·î– ???îš¼??
; 1514 : 	//		pNowStrBuffer->buffer[ pNowStrBuffer->cnt ] = '\0';
; 1515 : 	//	}
; 1516 : 	//}
; 1517 : 	// ????????????
; 1518 : 	//*ImeBuffer = '\0';
; 1519 : 	// îš¼??????????îŸ‰?
; 1520 : 	pNowStrBuffer = pStrBuffer;

  00003	8b 45 08	 mov	 eax, DWORD PTR _pStrBuffer$[ebp]
  00006	a3 00 00 00 00	 mov	 DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A, eax ; pNowStrBuffer

; 1521 : }

  0000b	5d		 pop	 ebp
  0000c	c3		 ret	 0
?GetKeyInputFocus@@YAXPAUSTR_BUFFER@@@Z ENDP		; GetKeyInputFocus
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?GetStrWidth@@YAHPAD@Z
_TEXT	SEGMENT
$T1 = 8							; size = 1
_str$ = 8						; size = 4
?GetStrWidth@@YAHPAD@Z PROC				; GetStrWidth, COMDAT

; 1487 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi

; 1488 : 	int width = 0;
; 1489 : 	// îž°??????????
; 1490 : 	while(!( *str == '\0' ) ){

  00004	8b 75 08	 mov	 esi, DWORD PTR _str$[ebp]
  00007	57		 push	 edi
  00008	33 ff		 xor	 edi, edi
  0000a	8a 06		 mov	 al, BYTE PTR [esi]
  0000c	84 c0		 test	 al, al
  0000e	74 3b		 je	 SHORT $LN10@GetStrWidt
  00010	53		 push	 ebx
  00011	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR __imp__IsDBCSLeadByte@4
  00017	88 45 08	 mov	 BYTE PTR $T1[ebp], al
  0001a	66 0f 1f 44 00
	00		 npad	 6
$LL2@GetStrWidt:

; 1491 : 		if(IsDBCSLeadByte(*str)){

  00020	ff 75 08	 push	 DWORD PTR $T1[ebp]
  00023	ff d3		 call	 ebx
  00025	85 c0		 test	 eax, eax
  00027	74 0a		 je	 SHORT $LN4@GetStrWidt

; 1492 : 			str += 2;
; 1493 : 			width += FONT_SIZE; // å…¨å½¢çš„size

  00029	b8 02 00 00 00	 mov	 eax, 2
  0002e	8d 48 0c	 lea	 ecx, DWORD PTR [eax+12]

; 1494 : 		}else{

  00031	eb 0a		 jmp	 SHORT $LN5@GetStrWidt
$LN4@GetStrWidt:

; 1495 : 			str ++;
; 1496 : 			width += FONT_SIZE>>1; // åŠå½¢çš„size

  00033	b8 01 00 00 00	 mov	 eax, 1
  00038	b9 07 00 00 00	 mov	 ecx, 7
$LN5@GetStrWidt:

; 1488 : 	int width = 0;
; 1489 : 	// îž°??????????
; 1490 : 	while(!( *str == '\0' ) ){

  0003d	03 f0		 add	 esi, eax
  0003f	03 f9		 add	 edi, ecx
  00041	8a 0e		 mov	 cl, BYTE PTR [esi]
  00043	88 4d 08	 mov	 BYTE PTR $T1[ebp], cl
  00046	84 c9		 test	 cl, cl
  00048	75 d6		 jne	 SHORT $LL2@GetStrWidt

; 1497 : 		}
; 1498 : 	}
; 1499 : 	return width;

  0004a	5b		 pop	 ebx
$LN10@GetStrWidt:

; 1500 : }

  0004b	8b c7		 mov	 eax, edi
  0004d	5f		 pop	 edi
  0004e	5e		 pop	 esi
  0004f	5d		 pop	 ebp
  00050	c3		 ret	 0
?GetStrWidth@@YAHPAD@Z ENDP				; GetStrWidth
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?GetStrLastByte@@YAHPAD@Z
_TEXT	SEGMENT
$T1 = 8							; size = 1
_str$ = 8						; size = 4
?GetStrLastByte@@YAHPAD@Z PROC				; GetStrLastByte, COMDAT

; 1440 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx
  00004	56		 push	 esi

; 1441 : 	int byte = 0;
; 1442 : 	
; 1443 : 	// îž°??????????
; 1444 : 	while( !( *str == '\0' ) ){

  00005	8b 75 08	 mov	 esi, DWORD PTR _str$[ebp]
  00008	33 c9		 xor	 ecx, ecx
  0000a	57		 push	 edi
  0000b	8a 06		 mov	 al, BYTE PTR [esi]
  0000d	84 c0		 test	 al, al
  0000f	74 37		 je	 SHORT $LN12@GetStrLast
  00011	8b 1d 00 00 00
	00		 mov	 ebx, DWORD PTR __imp__IsDBCSLeadByte@4
  00017	88 45 08	 mov	 BYTE PTR $T1[ebp], al
  0001a	66 0f 1f 44 00
	00		 npad	 6
$LL2@GetStrLast:

; 1445 : 	//		( *str == ( char )0x81 && *( str + 1 ) == ( char )0x51 ) ) ){
; 1446 : 	
; 1447 : 		// î“»????
; 1448 : 		if(IsDBCSLeadByte(*str)){

  00020	ff 75 08	 push	 DWORD PTR $T1[ebp]
  00023	ff d3		 call	 ebx
  00025	85 c0		 test	 eax, eax
  00027	74 10		 je	 SHORT $LN4@GetStrLast

; 1449 : 		
; 1450 : 			// î“»??îž°??îž¤???????
; 1451 : 			if( *( str + 1 ) == NULL ) return 3; // ??

  00029	80 7e 01 00	 cmp	 BYTE PTR [esi+1], 0
  0002d	74 20		 je	 SHORT $LN9@GetStrLast

; 1452 : 			
; 1453 : 			str += 2; 	// ????î??

  0002f	83 c6 02	 add	 esi, 2

; 1454 : 			byte = 2;	// î“»???

  00032	b9 02 00 00 00	 mov	 ecx, 2

; 1455 : 			
; 1456 : 		}else{	// îœ™????

  00037	eb 06		 jmp	 SHORT $LN5@GetStrLast
$LN4@GetStrLast:

; 1457 : 		
; 1458 : 			str ++; 	// ????î??

  00039	46		 inc	 esi

; 1459 : 			byte = 1;	// îœ™???

  0003a	b9 01 00 00 00	 mov	 ecx, 1
$LN5@GetStrLast:

; 1441 : 	int byte = 0;
; 1442 : 	
; 1443 : 	// îž°??????????
; 1444 : 	while( !( *str == '\0' ) ){

  0003f	8a 06		 mov	 al, BYTE PTR [esi]
  00041	88 45 08	 mov	 BYTE PTR $T1[ebp], al
  00044	84 c0		 test	 al, al
  00046	75 d8		 jne	 SHORT $LL2@GetStrLast
$LN12@GetStrLast:
  00048	5f		 pop	 edi

; 1460 : 		}
; 1461 : 	}
; 1462 : 	return byte;
; 1463 : }

  00049	5e		 pop	 esi
  0004a	8b c1		 mov	 eax, ecx
  0004c	5b		 pop	 ebx
  0004d	5d		 pop	 ebp
  0004e	c3		 ret	 0
$LN9@GetStrLast:
  0004f	5f		 pop	 edi
  00050	5e		 pop	 esi
  00051	b8 03 00 00 00	 mov	 eax, 3
  00056	5b		 pop	 ebx
  00057	5d		 pop	 ebp
  00058	c3		 ret	 0
?GetStrLastByte@@YAHPAD@Z ENDP				; GetStrLastByte
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?ClearChatBuffer@@YAXXZ
_TEXT	SEGMENT
?ClearChatBuffer@@YAXXZ PROC				; ClearChatBuffer, COMDAT

; 1259 : 	int i;
; 1260 : 	for( i = 0 ; i < MAX_CHAT_LINE ; i++ ){

  00000	b8 00 00 00 00	 mov	 eax, OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A ; ChatBuffer
  00005	66 66 66 0f 1f
	84 00 00 00 00
	00		 npad	 11
$LL4@ClearChatB:

; 1261 : 		ChatBuffer[ i ].buffer[ 0 ] = '\0';

  00010	c6 00 00	 mov	 BYTE PTR [eax], 0
  00013	05 4c 01 00 00	 add	 eax, 332		; 0000014cH
  00018	3d e8 26 00 00	 cmp	 eax, OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A+9960
  0001d	7c f1		 jl	 SHORT $LL4@ClearChatB

; 1262 : 	}
; 1263 : #ifdef _TALK_WINDOW
; 1264 : 	NowChatLine = 0;
; 1265 : #endif
; 1266 : #ifdef _NB_SA_LIAOTIAN
; 1267 : 	NowChatLine_Bak=0;
; 1268 : #endif
; 1269 : }

  0001f	c3		 ret	 0
?ClearChatBuffer@@YAXXZ ENDP				; ClearChatBuffer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StockChatBufferLineExt@@YAXPADEHH@Z
_TEXT	SEGMENT
_strtemp$ = -2316					; size = 1024
_Ûå?$1 = -1292						; size = 1024
_splitStr$ = -268					; size = 261
__$ArrayPad$ = -4					; size = 4
_str_$ = 8						; size = 4
_color$ = 12						; size = 1
_fontsize$ = 16						; size = 4
_id$ = 20						; size = 4
?StockChatBufferLineExt@@YAXPADEHH@Z PROC		; StockChatBufferLineExt, COMDAT

; 1106 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec 0c 09 00
	00		 sub	 esp, 2316		; 0000090cH
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 1107 : 	char *str = str_;
; 1108 : 	extern int ç¼–ç ;
; 1109 : 	extern int ç¹ä½“å¼€å…³;
; 1110 : 	if (ç¹ä½“å¼€å…³) {

  00013	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?Ûå???@@3HA, 0 ; Ûå???
  0001a	53		 push	 ebx
  0001b	56		 push	 esi
  0001c	57		 push	 edi
  0001d	8b 7d 08	 mov	 edi, DWORD PTR _str_$[ebp]
  00020	74 4b		 je	 SHORT $LN4@StockChatB

; 1111 : 		char ç¹ä½“[1024] = { 0 };

  00022	68 00 04 00 00	 push	 1024			; 00000400H
  00027	8d 85 f4 fa ff
	ff		 lea	 eax, DWORD PTR _Ûå?$1[ebp]
  0002d	6a 00		 push	 0
  0002f	50		 push	 eax
  00030	e8 00 00 00 00	 call	 _memset

; 1112 : 		LCMapString(0x804, 0x4000000, str_, strlen(str_), ç¹ä½“, 1024);

  00035	8b cf		 mov	 ecx, edi
  00037	83 c4 0c	 add	 esp, 12			; 0000000cH
  0003a	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
  0003d	0f 1f 00	 npad	 3
$LL22@StockChatB:
  00040	8a 01		 mov	 al, BYTE PTR [ecx]
  00042	41		 inc	 ecx
  00043	84 c0		 test	 al, al
  00045	75 f9		 jne	 SHORT $LL22@StockChatB
  00047	68 00 04 00 00	 push	 1024			; 00000400H
  0004c	8d 85 f4 fa ff
	ff		 lea	 eax, DWORD PTR _Ûå?$1[ebp]
  00052	2b ca		 sub	 ecx, edx
  00054	50		 push	 eax
  00055	51		 push	 ecx
  00056	57		 push	 edi
  00057	68 00 00 00 04	 push	 67108864		; 04000000H
  0005c	68 04 08 00 00	 push	 2052			; 00000804H
  00061	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__LCMapStringA@24

; 1113 : 		str = ç¹ä½“;

  00067	8d bd f4 fa ff
	ff		 lea	 edi, DWORD PTR _Ûå?$1[ebp]
$LN4@StockChatB:

; 1114 : 	}else {
; 1115 : 		str = str_;
; 1116 : 	}
; 1117 : #ifdef _NB_SA_LIAOTIAN
; 1118 : 	if (NowChatLine_Bak != NowChatLine) NowChatLine = NowChatLine_Bak;
; 1119 : #endif
; 1120 : #ifdef èŠå¤©è¡¨æƒ…
; 1121 : 	char strtemp[1024];
; 1122 : 	delFontBuffer(&ChatBuffer[NowChatLine]);

  0006d	69 05 00 00 00
	00 4c 01 00 00	 imul	 eax, DWORD PTR ?NowChatLine@@3HA, 332 ; NowChatLine
  00077	05 00 00 00 00	 add	 eax, OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A ; ChatBuffer
  0007c	50		 push	 eax
  0007d	e8 00 00 00 00	 call	 ?delFontBuffer@@YAXPAU_CHAT_BUFFER@@@Z ; delFontBuffer

; 1123 : 	int splitPoint = 0;
; 1124 : 	char splitStr[STR_BUFFER_SIZE + 1];
; 1125 : 	//648*480  90
; 1126 : 	//800*600  112
; 1127 : 	//1024*768 144
; 1128 : 	unsigned int MyChatBufferLen = _FONTDATALEN_;
; 1129 : 
; 1130 : 	switch (ResoMode)

  00082	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ResoMode@@3HA ; ResoMode
  00087	83 c4 04	 add	 esp, 4
  0008a	33 f6		 xor	 esi, esi
  0008c	83 e8 03	 sub	 eax, 3
  0008f	74 11		 je	 SHORT $LN7@StockChatB
  00091	83 e8 01	 sub	 eax, 1
  00094	74 05		 je	 SHORT $LN6@StockChatB

; 1137 : 		break;
; 1138 : 	default:
; 1139 : 		MyChatBufferLen = 86; //640*480 åŽŸæ¥å¯èƒ½87?

  00096	8d 46 56	 lea	 eax, DWORD PTR [esi+86]
  00099	eb 0c		 jmp	 SHORT $LN2@StockChatB
$LN6@StockChatB:

; 1131 : 	{
; 1132 : 	case åˆ†è¾¨çŽ‡::mode1024:
; 1133 : 		MyChatBufferLen = 144;

  0009b	b8 90 00 00 00	 mov	 eax, 144		; 00000090H

; 1134 : 		break;

  000a0	eb 05		 jmp	 SHORT $LN2@StockChatB
$LN7@StockChatB:

; 1135 : 	case  åˆ†è¾¨çŽ‡::mode800:
; 1136 : 		MyChatBufferLen = 112;

  000a2	b8 70 00 00 00	 mov	 eax, 112		; 00000070H
$LN2@StockChatB:

; 1140 : 		break;
; 1141 : 	}
; 1142 : 
; 1143 : 	//TODO åˆ†å‰²{}é‡æ–°è®¡ç®—åˆ†å‰²è¡Œ
; 1144 : 	char* è¯´è¯åˆ†è¡Œ(char* str, int curLen, int maxLen);
; 1145 : 	char* pTemp = è¯´è¯åˆ†è¡Œ(str,0, MyChatBufferLen);

  000a7	50		 push	 eax
  000a8	6a 00		 push	 0
  000aa	57		 push	 edi
  000ab	e8 00 00 00 00	 call	 ???ÝÂú¼@@YAPADPADHH@Z	; ??ÝÂú¼
  000b0	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1146 : 	if (pTemp){

  000b3	85 c0		 test	 eax, eax
  000b5	0f 84 84 00 00
	00		 je	 $LN9@StockChatB

; 1147 : 		splitPoint = pTemp - str;

  000bb	8b f0		 mov	 esi, eax
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 327  : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_2(

  000bd	8d 85 f4 fe ff
	ff		 lea	 eax, DWORD PTR _splitStr$[ebp]
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 1147 : 		splitPoint = pTemp - str;

  000c3	2b f7		 sub	 esi, edi
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 327  : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_2(

  000c5	56		 push	 esi
  000c6	57		 push	 edi
  000c7	68 05 01 00 00	 push	 261			; 00000105H
  000cc	50		 push	 eax
  000cd	e8 00 00 00 00	 call	 _strncpy_s
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 1149 : 		if (GetStrLastByte(splitStr) == 3){

  000d2	8d 85 f4 fe ff
	ff		 lea	 eax, DWORD PTR _splitStr$[ebp]
  000d8	50		 push	 eax
  000d9	e8 00 00 00 00	 call	 ?GetStrLastByte@@YAHPAD@Z ; GetStrLastByte
  000de	83 c4 14	 add	 esp, 20			; 00000014H
  000e1	83 f8 03	 cmp	 eax, 3
  000e4	75 01		 jne	 SHORT $LN11@StockChatB

; 1150 : 			splitPoint -= 1;

  000e6	4e		 dec	 esi
$LN11@StockChatB:
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 327  : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_2(

  000e7	56		 push	 esi
  000e8	57		 push	 edi
  000e9	8d 85 f4 f6 ff
	ff		 lea	 eax, DWORD PTR _strtemp$[ebp]
  000ef	68 00 04 00 00	 push	 1024			; 00000400H
  000f4	50		 push	 eax
  000f5	e8 00 00 00 00	 call	 _strncpy_s
  000fa	83 c4 10	 add	 esp, 16			; 00000010H
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 1153 : 		strtemp[splitPoint] = 0;

  000fd	81 fe 00 04 00
	00		 cmp	 esi, 1024		; 00000400H
  00103	0f 83 b8 00 00
	00		 jae	 $LN16@StockChatB

; 1154 : 		NewStockFontBuffer(&ChatBuffer[NowChatLine], 0, color, strtemp, fontsize, id);

  00109	8b 5d 14	 mov	 ebx, DWORD PTR _id$[ebp]
  0010c	8d 85 f4 f6 ff
	ff		 lea	 eax, DWORD PTR _strtemp$[ebp]
  00112	53		 push	 ebx
  00113	ff 75 10	 push	 DWORD PTR _fontsize$[ebp]
  00116	c6 84 35 f4 f6
	ff ff 00	 mov	 BYTE PTR _strtemp$[ebp+esi], 0
  0011e	50		 push	 eax
  0011f	69 05 00 00 00
	00 4c 01 00 00	 imul	 eax, DWORD PTR ?NowChatLine@@3HA, 332 ; NowChatLine
  00129	ff 75 0c	 push	 DWORD PTR _color$[ebp]
  0012c	6a 00		 push	 0
  0012e	05 00 00 00 00	 add	 eax, OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A ; ChatBuffer
  00133	50		 push	 eax
  00134	e8 00 00 00 00	 call	 ?NewStockFontBuffer@@YAXPAU_CHAT_BUFFER@@HEPADHH@Z ; NewStockFontBuffer
  00139	83 c4 18	 add	 esp, 24			; 00000018H

; 1155 : 		__asm nop;

  0013c	90		 npad	 1
  0013d	eb 25		 jmp	 SHORT $LN10@StockChatB
$LN9@StockChatB:

; 1156 : 	}else{
; 1157 : 		NewStockFontBuffer(&ChatBuffer[NowChatLine], 0, color, str, fontsize, id);

  0013f	8b 5d 14	 mov	 ebx, DWORD PTR _id$[ebp]
  00142	69 05 00 00 00
	00 4c 01 00 00	 imul	 eax, DWORD PTR ?NowChatLine@@3HA, 332 ; NowChatLine
  0014c	53		 push	 ebx
  0014d	ff 75 10	 push	 DWORD PTR _fontsize$[ebp]
  00150	57		 push	 edi
  00151	ff 75 0c	 push	 DWORD PTR _color$[ebp]
  00154	05 00 00 00 00	 add	 eax, OFFSET ?ChatBuffer@@3PAU_CHAT_BUFFER@@A ; ChatBuffer
  00159	6a 00		 push	 0
  0015b	50		 push	 eax
  0015c	e8 00 00 00 00	 call	 ?NewStockFontBuffer@@YAXPAU_CHAT_BUFFER@@HEPADHH@Z ; NewStockFontBuffer
  00161	83 c4 18	 add	 esp, 24			; 00000018H
$LN10@StockChatB:

; 1158 : 	}
; 1159 : 
; 1160 : 	//if (strlen(str) > MyChatBufferLen) {
; 1161 : 	//	strncpy_s(splitStr, str, MyChatBufferLen);
; 1162 : 	//	*(splitStr + MyChatBufferLen) = NULL;
; 1163 : 	//	if (GetStrLastByte(splitStr) == 3) {
; 1164 : 	//		splitPoint = MyChatBufferLen - 1;
; 1165 : 	//		*(splitStr + MyChatBufferLen - 1) = NULL;
; 1166 : 	//	}
; 1167 : 	//	else
; 1168 : 	//		splitPoint = MyChatBufferLen;
; 1169 : 	//	strncpy_s(strtemp, str, splitPoint);
; 1170 : 	//	strtemp[splitPoint] = 0;
; 1171 : 	//	NewStockFontBuffer(&ChatBuffer[NowChatLine], 0, color, strtemp, fontsize,id);
; 1172 : 	//}
; 1173 : 	//else NewStockFontBuffer(&ChatBuffer[NowChatLine], 0, color, str, fontsize,id);
; 1174 : #ifdef _NB_SA_LIAOTIAN
; 1175 : 	NowChatLine_Bak++;
; 1176 : #endif
; 1177 : 	NowChatLine++;

  00164	a1 00 00 00 00	 mov	 eax, DWORD PTR ?NowChatLine@@3HA ; NowChatLine

; 1178 : 	if (NowChatLine >= MAX_CHAT_LINE) {

  00169	33 c9		 xor	 ecx, ecx
  0016b	40		 inc	 eax
  0016c	83 f8 1e	 cmp	 eax, 30			; 0000001eH
  0016f	0f 4d c1	 cmovge	 eax, ecx
  00172	a3 00 00 00 00	 mov	 DWORD PTR ?NowChatLine@@3HA, eax ; NowChatLine

; 1179 : 		NowChatLine = 0;
; 1180 : #ifdef _NB_SA_LIAOTIAN
; 1181 : 		NowChatLine_Bak = 0;
; 1182 : #endif
; 1183 : 	}
; 1184 : 	if (chatLogFile) {

  00177	a1 00 00 00 00	 mov	 eax, DWORD PTR ?chatLogFile@@3PAU_iobuf@@A ; chatLogFile
  0017c	85 c0		 test	 eax, eax
  0017e	74 0f		 je	 SHORT $LN13@StockChatB

; 1185 : 		fprintf(chatLogFile, "%s\n", str);

  00180	57		 push	 edi
  00181	68 00 00 00 00	 push	 OFFSET ??_C@_03OFAPEBGM@?$CFs?6@
  00186	50		 push	 eax
  00187	e8 00 00 00 00	 call	 _fprintf
  0018c	83 c4 0c	 add	 esp, 12			; 0000000cH
$LN13@StockChatB:

; 1186 : }
; 1187 : 	ChatLineSmoothY = 20;

  0018f	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?ChatLineSmoothY@@3HA, 20 ; ChatLineSmoothY, 00000014H

; 1188 : 	if (splitPoint != 0) {

  00199	85 f6		 test	 esi, esi
  0019b	74 13		 je	 SHORT $LN14@StockChatB

; 1189 : #ifdef _FONT_SIZE
; 1190 : 		StockChatBufferLineExt(str + splitPoint, color, fontsize,id);

  0019d	53		 push	 ebx
  0019e	ff 75 10	 push	 DWORD PTR _fontsize$[ebp]
  001a1	8d 04 3e	 lea	 eax, DWORD PTR [esi+edi]
  001a4	ff 75 0c	 push	 DWORD PTR _color$[ebp]
  001a7	50		 push	 eax
  001a8	e8 00 00 00 00	 call	 ?StockChatBufferLineExt@@YAXPADEHH@Z ; StockChatBufferLineExt
  001ad	83 c4 10	 add	 esp, 16			; 00000010H
$LN14@StockChatB:

; 1191 : #else
; 1192 : 		StockChatBufferLine(str + splitPoint, color);
; 1193 : #endif
; 1194 : 	}
; 1195 : #else
; 1196 : 
; 1197 : 	int splitPoint = 0;
; 1198 : 	char splitStr[STR_BUFFER_SIZE + 1];
; 1199 : #ifdef _NEWFONT_
; 1200 : 	unsigned int MyChatBufferLen = 87;
; 1201 : #else
; 1202 : 	unsigned int MyChatBufferLen = 112;
; 1203 : #endif
; 1204 : #ifdef _FONT_SIZE
; 1205 : 	if (fontsize > 0) {
; 1206 : 		MyChatBufferLen = (int)(MyChatBufferLen*((float)FONT_SIZE / (float)fontsize));
; 1207 : 	}
; 1208 : #endif
; 1209 : 
; 1210 : 	if (strlen(str) > MyChatBufferLen) {
; 1211 : 		strncpy_s(splitStr, str, MyChatBufferLen);
; 1212 : 		*(splitStr + MyChatBufferLen) = NULL;
; 1213 : 		if (GetStrLastByte(splitStr) == 3) {
; 1214 : 			splitPoint = MyChatBufferLen - 1;
; 1215 : 			*(splitStr + MyChatBufferLen - 1) = NULL;
; 1216 : 		}
; 1217 : 		else
; 1218 : 			splitPoint = MyChatBufferLen;
; 1219 : 		strncpy_s(ChatBuffer[NowChatLine].buffer, str, splitPoint);
; 1220 : 
; 1221 : 		*(ChatBuffer[NowChatLine].buffer + splitPoint) = NULL;
; 1222 : #ifdef _TALK_WINDOW
; 1223 : 		TalkWindow.AddString(ChatBuffer[NowChatLine].buffer, color);
; 1224 : #endif	
; 1225 : 	}
; 1226 : 	else {
; 1227 : 		strcpy(ChatBuffer[NowChatLine].buffer, str);
; 1228 : #ifdef _TALK_WINDOW
; 1229 : 		TalkWindow.AddString(str, color);
; 1230 : #endif	
; 1231 : 	}
; 1232 : 	if (chatLogFile) {
; 1233 : 		fprintf(chatLogFile, "%s\n", ChatBuffer[NowChatLine].buffer);
; 1234 : 	}
; 1235 : 	ChatBuffer[NowChatLine].color = color;
; 1236 : #ifdef _FONT_SIZE
; 1237 : 	ChatBuffer[NowChatLine].fontsize = fontsize;
; 1238 : #endif
; 1239 : 	NowChatLine++;
; 1240 : 	if (NowChatLine >= MAX_CHAT_LINE) NowChatLine = 0;
; 1241 : 	if (splitPoint != 0) {
; 1242 : #ifdef _FONT_SIZE
; 1243 : 		StockChatBufferLineExt(str + splitPoint, color, fontsize);
; 1244 : #else
; 1245 : 		StockChatBufferLine(str + splitPoint, color);
; 1246 : #endif
; 1247 : 	}
; 1248 : 
; 1249 : 	ChatLineSmoothY = 20;
; 1250 : 	//ChatLineSmoothY = 20 - ChatBuffer[ NowChatLine-1 ].fontsize;
; 1251 : 
; 1252 : #ifdef _TALK_WINDOW
; 1253 : 	if (g_bTalkWindow) TalkWindow.Update();
; 1254 : #endif
; 1255 : #endif
; 1256 : }

  001b0	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  001b3	5f		 pop	 edi
  001b4	5e		 pop	 esi
  001b5	33 cd		 xor	 ecx, ebp
  001b7	5b		 pop	 ebx
  001b8	e8 00 00 00 00	 call	 @__security_check_cookie@4
  001bd	8b e5		 mov	 esp, ebp
  001bf	5d		 pop	 ebp
  001c0	c3		 ret	 0
$LN16@StockChatB:

; 1153 : 		strtemp[splitPoint] = 0;

  001c1	e8 00 00 00 00	 call	 ___report_rangecheckfailure
$LN23@StockChatB:
  001c6	cc		 int	 3
?StockChatBufferLineExt@@YAXPADEHH@Z ENDP		; StockChatBufferLineExt
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StockChatBufferLine@@YAXPADEH@Z
_TEXT	SEGMENT
_str$ = 8						; size = 4
_color$ = 12						; size = 1
_id$ = 16						; size = 4
?StockChatBufferLine@@YAXPADEH@Z PROC			; StockChatBufferLine, COMDAT

; 1099 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1100 : 	StockChatBufferLineExt(str, color, 0,id);

  00003	ff 75 10	 push	 DWORD PTR _id$[ebp]
  00006	6a 00		 push	 0
  00008	ff 75 0c	 push	 DWORD PTR _color$[ebp]
  0000b	ff 75 08	 push	 DWORD PTR _str$[ebp]
  0000e	e8 00 00 00 00	 call	 ?StockChatBufferLineExt@@YAXPADEHH@Z ; StockChatBufferLineExt
  00013	83 c4 10	 add	 esp, 16			; 00000010H

; 1101 : }

  00016	5d		 pop	 ebp
  00017	c3		 ret	 0
?StockChatBufferLine@@YAXPADEH@Z ENDP			; StockChatBufferLine
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?ChatProc@@YAXXZ
_TEXT	SEGMENT
?ChatProc@@YAXXZ PROC					; ChatProc, COMDAT

; 503  : 	// ???????????
; 504  : 	//if( joy_trg[ 1 ] & JOY_RETURN ) KeyboardReturn();
; 505  : 	
; 506  : 	// ??????????
; 507  : 	if (joy_trg[1] & JOY_TAB)

  00000	f7 05 04 00 00
	00 00 00 00 02	 test	 DWORD PTR ?joy_trg@@3PAKA+4, 33554432 ; 02000000H
  0000a	74 05		 je	 SHORT $LN2@ChatProc

; 508  : 	{
; 509  : 		KeyboardTab();

  0000c	e8 00 00 00 00	 call	 ?KeyboardTab@@YAXXZ	; KeyboardTab
$LN2@ChatProc:

; 510  : 	}
; 511  : 	
; 512  : 	// ??????
; 513  : 	//if( joy_trg[ 0 ] & JOY_CTRL_C ){
; 514  : 		// ???????????
; 515  : 	//	SetClipboad();
; 516  : 	//}
; 517  : 	// ??????
; 518  : 	if( joy_trg[ 0 ] & JOY_CTRL_V ){

  00011	f7 05 00 00 00
	00 00 00 80 00	 test	 DWORD PTR ?joy_trg@@3PAKA, 8388608 ; 00800000H
  0001b	74 05		 je	 SHORT $LN3@ChatProc

; 519  : 		// ?????????îš¼?????????
; 520  : 		GetClipboad();

  0001d	e8 00 00 00 00	 call	 ?GetClipboad@@YAXXZ	; GetClipboad
$LN3@ChatProc:

; 521  : 	}
; 522  : 
; 523  : 
; 524  : 	
; 525  : #ifdef _TELLCHANNEL				//ROG ADD å¯†è¯­é¢‘é“
; 526  : 	if( joy_trg[ 1 ] & JOY_CTRL_R )

  00022	f7 05 04 00 00
	00 00 00 00 80	 test	 DWORD PTR ?joy_trg@@3PAKA+4, -2147483648 ; 80000000H
  0002c	74 37		 je	 SHORT $LN4@ChatProc

; 527  : 	{
; 528  : 		pNowStrBuffer->buffer[ 0 ] = NULL;

  0002e	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer

; 529  : 		pNowStrBuffer->cursor=0;
; 530  : 		pNowStrBuffer->cnt = 0;
; 531  : 		StrToNowStrBuffer(secretName);

  00033	68 00 00 00 00	 push	 OFFSET ?secretName@@3PADA ; secretName
  00038	c6 00 00	 mov	 BYTE PTR [eax], 0
  0003b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00040	c6 80 09 01 00
	00 00		 mov	 BYTE PTR [eax+265], 0
  00047	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0004c	c6 80 07 01 00
	00 00		 mov	 BYTE PTR [eax+263], 0
  00053	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  00058	83 c4 04	 add	 esp, 4

; 532  : 		TalkMode = 1;

  0005b	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?TalkMode@@3HA, 1 ; TalkMode
$LN4@ChatProc:

; 533  : 	}
; 534  : #else
; 535  : #ifdef _FRIENDCHANNEL
; 536  : 	StrToNowStrBuffer( secretName );
; 537  : #endif
; 538  : #endif	
; 539  : 	
; 540  : 	// îš¼??????????????????
; 541  : 	if( pNowStrBuffer == &MyChatBuffer || pNowStrBuffer == &MailStr ){

  00065	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0006a	3d 00 00 00 00	 cmp	 eax, OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  0006f	74 0b		 je	 SHORT $LN6@ChatProc
  00071	3d 00 00 00 00	 cmp	 eax, OFFSET ?MailStr@@3USTR_BUFFER@@A ; MailStr
  00076	0f 85 b0 00 00
	00		 jne	 $LN14@ChatProc
$LN6@ChatProc:

; 542  : 	
; 543  : 		// î™‘?îž°???îŒ¸??????î™‘?îž°??????îš¼?îž°?????
; 544  : 		if(	joy_trg[ 1 ] & JOY_F1 ) StrToNowStrBuffer( chatRegistryStr[ 0 ].buffer );

  0007c	f6 05 04 00 00
	00 01		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 1
  00083	74 0d		 je	 SHORT $LN7@ChatProc
  00085	68 00 00 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A
  0008a	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  0008f	83 c4 04	 add	 esp, 4
$LN7@ChatProc:

; 545  : 		if( joy_trg[ 1 ] & JOY_F2 ) StrToNowStrBuffer( chatRegistryStr[ 1 ].buffer );

  00092	f6 05 04 00 00
	00 02		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 2
  00099	74 0d		 je	 SHORT $LN8@ChatProc
  0009b	68 28 01 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+296
  000a0	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  000a5	83 c4 04	 add	 esp, 4
$LN8@ChatProc:

; 546  : 		if( joy_trg[ 1 ] & JOY_F3 ) StrToNowStrBuffer( chatRegistryStr[ 2 ].buffer );

  000a8	f6 05 04 00 00
	00 04		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 4
  000af	74 0d		 je	 SHORT $LN9@ChatProc
  000b1	68 50 02 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+592
  000b6	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  000bb	83 c4 04	 add	 esp, 4
$LN9@ChatProc:

; 547  : 		if( joy_trg[ 1 ] & JOY_F4 ) StrToNowStrBuffer( chatRegistryStr[ 3 ].buffer );

  000be	f6 05 04 00 00
	00 08		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 8
  000c5	74 0d		 je	 SHORT $LN10@ChatProc
  000c7	68 78 03 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+888
  000cc	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  000d1	83 c4 04	 add	 esp, 4
$LN10@ChatProc:

; 548  : 	
; 549  : 		if( joy_trg[ 1 ] & JOY_F5 ) StrToNowStrBuffer( chatRegistryStr[ 4 ].buffer );

  000d4	f6 05 04 00 00
	00 10		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 16 ; 00000010H
  000db	74 0d		 je	 SHORT $LN11@ChatProc
  000dd	68 a0 04 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+1184
  000e2	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  000e7	83 c4 04	 add	 esp, 4
$LN11@ChatProc:

; 550  : 		if( joy_trg[ 1 ] & JOY_F6 ) StrToNowStrBuffer( chatRegistryStr[ 5 ].buffer );

  000ea	f6 05 04 00 00
	00 20		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 32 ; 00000020H
  000f1	74 0d		 je	 SHORT $LN12@ChatProc
  000f3	68 c8 05 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+1480
  000f8	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  000fd	83 c4 04	 add	 esp, 4
$LN12@ChatProc:

; 551  : 		if( joy_trg[ 1 ] & JOY_F7 ) StrToNowStrBuffer( chatRegistryStr[ 6 ].buffer );

  00100	f6 05 04 00 00
	00 40		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 64 ; 00000040H
  00107	74 0d		 je	 SHORT $LN13@ChatProc
  00109	68 f0 06 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+1776
  0010e	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  00113	83 c4 04	 add	 esp, 4
$LN13@ChatProc:

; 552  : 		if( joy_trg[ 1 ] & JOY_F8 ) StrToNowStrBuffer( chatRegistryStr[ 7 ].buffer );

  00116	f6 05 04 00 00
	00 80		 test	 BYTE PTR ?joy_trg@@3PAKA+4, 128 ; 00000080H
  0011d	74 0d		 je	 SHORT $LN14@ChatProc
  0011f	68 18 08 00 00	 push	 OFFSET ?chatRegistryStr@@3PAUSTR_BUFFER@@A+2072
  00124	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  00129	83 c4 04	 add	 esp, 4
$LN14@ChatProc:

; 553  : 	}
; 554  : 
; 555  : 	// îš¼??????????????????????îž°??î¡Š??
; 556  : 	if( pNowStrBuffer == &MyChatBuffer && GetImeString() == NULL ){

  0012c	81 3d 00 00 00
	00 00 00 00 00	 cmp	 DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A, OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; pNowStrBuffer, MyChatBuffer
  00136	0f 85 22 01 00
	00		 jne	 $LN27@ChatProc
  0013c	e8 00 00 00 00	 call	 ?GetImeString@@YAPADXZ	; GetImeString
  00141	85 c0		 test	 eax, eax
  00143	0f 85 15 01 00
	00		 jne	 $LN27@ChatProc

; 557  : 		// î¯???????
; 558  : 		if( joy_auto[ 0 ] & JOY_UP ){

  00149	a1 00 00 00 00	 mov	 eax, DWORD PTR ?joy_auto@@3PAKA
  0014e	a9 00 10 00 00	 test	 eax, 4096		; 00001000H
  00153	0f 84 80 00 00
	00		 je	 $LN16@ChatProc

; 559  : 			int bak = ChatHistory.nowNo;	// ??????

  00159	8b 15 44 41 00
	00		 mov	 edx, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708

; 560  : 			// ?????????îš¼?????
; 561  : 			if( ChatHistory.nowNo == -1 ) ChatHistory.nowNo = ChatHistory.newNo;

  0015f	8b 0d 40 41 00
	00		 mov	 ecx, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704
  00165	83 fa ff	 cmp	 edx, -1
  00168	74 03		 je	 SHORT $LN19@ChatProc

; 562  : 			else ChatHistory.nowNo--;

  0016a	8d 4a ff	 lea	 ecx, DWORD PTR [edx-1]
$LN19@ChatProc:

; 563  : 			// ????????
; 564  : 			if( ChatHistory.nowNo < 0 ) ChatHistory.nowNo = MAX_CHAT_HISTORY - 1;

  0016d	85 c9		 test	 ecx, ecx
  0016f	b8 3f 00 00 00	 mov	 eax, 63			; 0000003fH
  00174	0f 48 c8	 cmovs	 ecx, eax

; 565  : 			// ????????????( ?îŽ«??????????????????îš¼???????? ?
; 566  : 			if( ChatHistory.str[ ChatHistory.nowNo ][ 0 ] != 0 && ( ChatHistory.nowNo != ChatHistory.newNo || bak == -1 ) ){

  00177	69 c1 05 01 00
	00		 imul	 eax, ecx, 261
  0017d	89 0d 44 41 00
	00		 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, ecx
  00183	80 b8 00 00 00
	00 00		 cmp	 BYTE PTR ?ChatHistory@@3UCHAT_HISTORY@@A[eax], 0
  0018a	74 46		 je	 SHORT $LN21@ChatProc
  0018c	3b 0d 40 41 00
	00		 cmp	 ecx, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704
  00192	75 05		 jne	 SHORT $LN23@ChatProc
  00194	83 fa ff	 cmp	 edx, -1
  00197	75 39		 jne	 SHORT $LN21@ChatProc
$LN23@ChatProc:

; 567  : 				// îš¼?????îž°?????
; 568  : 				pNowStrBuffer->cnt = 0;

  00199	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0019e	c6 80 07 01 00
	00 00		 mov	 BYTE PTR [eax+263], 0

; 569  : 				pNowStrBuffer->buffer[ 0 ] = NULL;

  001a5	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  001aa	c6 00 00	 mov	 BYTE PTR [eax], 0

; 570  : 				pNowStrBuffer->cursor=0;

  001ad	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  001b2	c6 80 09 01 00
	00 00		 mov	 BYTE PTR [eax+265], 0

; 571  : 				// ?????îž°???îš¼????????
; 572  : 				StrToNowStrBuffer( ChatHistory.str[ ChatHistory.nowNo ] );

  001b9	69 05 44 41 00
	00 05 01 00 00	 imul	 eax, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, 261
  001c3	05 00 00 00 00	 add	 eax, OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
  001c8	50		 push	 eax
  001c9	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  001ce	83 c4 04	 add	 esp, 4

; 602  : 				}
; 603  : #ifdef _TALK_WINDOW
; 604  : 				if(g_bTalkWindow) TalkWindow.Update();
; 605  : #endif
; 606  : 			}
; 607  : 		}
; 608  : 	}
; 609  : /*#ifdef _ON_OFF_ITEM
; 610  : 	EXP_ON_OFF_ITEM();
; 611  : #endif
; 612  : #ifdef _ON_OFF_NOENEMY
; 613  : 	NOENEMY_OF_OFF_ITEM();
; 614  : #endif
; 615  : #ifdef _CLICK_PARTYAUTO
; 616  : 	CLICK_PARTYAUTO();
; 617  : #endif*/
; 618  : }

  001d1	c3		 ret	 0
$LN21@ChatProc:

; 573  : 			}else{
; 574  : 				// ??????????
; 575  : 				ChatHistory.nowNo = bak;

  001d2	89 15 44 41 00
	00		 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, edx

; 602  : 				}
; 603  : #ifdef _TALK_WINDOW
; 604  : 				if(g_bTalkWindow) TalkWindow.Update();
; 605  : #endif
; 606  : 			}
; 607  : 		}
; 608  : 	}
; 609  : /*#ifdef _ON_OFF_ITEM
; 610  : 	EXP_ON_OFF_ITEM();
; 611  : #endif
; 612  : #ifdef _ON_OFF_NOENEMY
; 613  : 	NOENEMY_OF_OFF_ITEM();
; 614  : #endif
; 615  : #ifdef _CLICK_PARTYAUTO
; 616  : 	CLICK_PARTYAUTO();
; 617  : #endif*/
; 618  : }

  001d8	c3		 ret	 0
$LN16@ChatProc:

; 576  : 			}
; 577  : #ifdef _TALK_WINDOW
; 578  : 			if(g_bTalkWindow) TalkWindow.Update();
; 579  : #endif
; 580  : 		}else
; 581  : 		// ????????
; 582  : 		if( joy_auto[ 0 ] & JOY_DOWN ){

  001d9	a9 00 20 00 00	 test	 eax, 8192		; 00002000H
  001de	74 7e		 je	 SHORT $LN27@ChatProc

; 583  : 			// ?????????îš¼?????
; 584  : 			if( ChatHistory.nowNo != -1 ){

  001e0	a1 44 41 00 00	 mov	 eax, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708
  001e5	83 f8 ff	 cmp	 eax, -1
  001e8	74 74		 je	 SHORT $LN27@ChatProc

; 585  : 				// ?????????îœ???
; 586  : 				if( ChatHistory.nowNo == ChatHistory.newNo ){ 

  001ea	3b 05 40 41 00
	00		 cmp	 eax, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16704
  001f0	75 2b		 jne	 SHORT $LN26@ChatProc

; 587  : 					ChatHistory.nowNo = -1;
; 588  : 					// îš¼?????îž°?????
; 589  : 					pNowStrBuffer->cnt = 0;

  001f2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  001f7	c7 05 44 41 00
	00 ff ff ff ff	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, -1
  00201	c6 80 07 01 00
	00 00		 mov	 BYTE PTR [eax+263], 0

; 590  : 					pNowStrBuffer->buffer[ 0 ] = NULL;

  00208	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0020d	c6 00 00	 mov	 BYTE PTR [eax], 0

; 591  : 					pNowStrBuffer->cursor=0;

  00210	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00215	c6 80 09 01 00
	00 00		 mov	 BYTE PTR [eax+265], 0

; 602  : 				}
; 603  : #ifdef _TALK_WINDOW
; 604  : 				if(g_bTalkWindow) TalkWindow.Update();
; 605  : #endif
; 606  : 			}
; 607  : 		}
; 608  : 	}
; 609  : /*#ifdef _ON_OFF_ITEM
; 610  : 	EXP_ON_OFF_ITEM();
; 611  : #endif
; 612  : #ifdef _ON_OFF_NOENEMY
; 613  : 	NOENEMY_OF_OFF_ITEM();
; 614  : #endif
; 615  : #ifdef _CLICK_PARTYAUTO
; 616  : 	CLICK_PARTYAUTO();
; 617  : #endif*/
; 618  : }

  0021c	c3		 ret	 0
$LN26@ChatProc:

; 592  : 				}else{
; 593  : 					ChatHistory.nowNo++;

  0021d	40		 inc	 eax

; 594  : 					// ????????
; 595  : 					if( ChatHistory.nowNo >= MAX_CHAT_HISTORY ) ChatHistory.nowNo = 0;

  0021e	33 c9		 xor	 ecx, ecx
  00220	83 f8 40	 cmp	 eax, 64			; 00000040H
  00223	0f 4d c1	 cmovge	 eax, ecx
  00226	a3 44 41 00 00	 mov	 DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, eax

; 596  : 					// îš¼?????îž°?????
; 597  : 					pNowStrBuffer->cnt = 0;

  0022b	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00230	88 88 07 01 00
	00		 mov	 BYTE PTR [eax+263], cl

; 598  : 					pNowStrBuffer->buffer[ 0 ] = NULL;

  00236	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0023b	88 08		 mov	 BYTE PTR [eax], cl

; 599  : 					pNowStrBuffer->cursor=0;

  0023d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00242	88 88 09 01 00
	00		 mov	 BYTE PTR [eax+265], cl

; 600  : 					// ?????îž°???îš¼????????
; 601  : 					StrToNowStrBuffer( ChatHistory.str[ ChatHistory.nowNo ] );

  00248	69 05 44 41 00
	00 05 01 00 00	 imul	 eax, DWORD PTR ?ChatHistory@@3UCHAT_HISTORY@@A+16708, 261
  00252	05 00 00 00 00	 add	 eax, OFFSET ?ChatHistory@@3UCHAT_HISTORY@@A ; ChatHistory
  00257	50		 push	 eax
  00258	e8 00 00 00 00	 call	 ?StrToNowStrBuffer@@YAXPAD@Z ; StrToNowStrBuffer
  0025d	59		 pop	 ecx
$LN27@ChatProc:

; 602  : 				}
; 603  : #ifdef _TALK_WINDOW
; 604  : 				if(g_bTalkWindow) TalkWindow.Update();
; 605  : #endif
; 606  : 			}
; 607  : 		}
; 608  : 	}
; 609  : /*#ifdef _ON_OFF_ITEM
; 610  : 	EXP_ON_OFF_ITEM();
; 611  : #endif
; 612  : #ifdef _ON_OFF_NOENEMY
; 613  : 	NOENEMY_OF_OFF_ITEM();
; 614  : #endif
; 615  : #ifdef _CLICK_PARTYAUTO
; 616  : 	CLICK_PARTYAUTO();
; 617  : #endif*/
; 618  : }

  0025e	c3		 ret	 0
?ChatProc@@YAXXZ ENDP					; ChatProc
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?ChatBufferToFontBuffer@@YAXXZ
_TEXT	SEGMENT
_øúï×äÎ?ID$ = -184					; size = 4
_Û°ú¾äÎ?ID$1 = -180					; size = 8
_k$1$ = -176						; size = 4
tv630 = -172						; size = 4
_y$1$ = -172						; size = 4
tv614 = -168						; size = 4
_j$2$ = -168						; size = 4
_g_szChannelDisp$ = -164				; size = 32
_øúï×?é»$2 = -132					; size = 128
__$ArrayPad$ = -4					; size = 4
?ChatBufferToFontBuffer@@YAXXZ PROC			; ChatBufferToFontBuffer, COMDAT

; 1273 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	81 ec b8 00 00
	00		 sub	 esp, 184		; 000000b8H
  00009	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  0000e	33 c5		 xor	 eax, ebp
  00010	89 45 fc	 mov	 DWORD PTR __$ArrayPad$[ebp], eax

; 1274 : #ifdef _TALK_WINDOW
; 1275 : 	if(g_bTalkWindow) return;
; 1276 : #endif
; 1277 : 	#define CHAT_ZOUBUN_Y 22   //jl è¯´è¯æ˜¾ç¤ºåˆ—é—´è·,åŽŸæ¥ä¸º20ï¼Œå› åŠ å…¥è¡¨æƒ…ï¼Œç¨å¾®åŠ å¤§ç‚¹
; 1278 : 	int i, j, k = 0;
; 1279 : 	int x = 8;// î¸î•?î³
; 1280 : 	int y = 400;
; 1281 : //	int y = DEF_APPSIZEY - 80;î˜‹
; 1282 : 	j = NowChatLine - 1;

  00013	a1 00 00 00 00	 mov	 eax, DWORD PTR ?NowChatLine@@3HA ; NowChatLine

; 1283 : 	if( j < 0 )

  00018	b9 1d 00 00 00	 mov	 ecx, 29			; 0000001dH
  0001d	53		 push	 ebx
  0001e	83 c0 ff	 add	 eax, -1
  00021	bb 90 01 00 00	 mov	 ebx, 400		; 00000190H
  00026	56		 push	 esi
  00027	0f 48 c1	 cmovs	 eax, ecx

; 1284 : 		j = MAX_CHAT_LINE - 1;
; 1285 : 	if( ChatLineSmoothY > 0 )

  0002a	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?NowMaxChatLine@@3HA ; NowMaxChatLine
  00030	57		 push	 edi
  00031	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?ChatLineSmoothY@@3HA ; ChatLineSmoothY
  00037	89 85 58 ff ff
	ff		 mov	 DWORD PTR _j$2$[ebp], eax
  0003d	85 ff		 test	 edi, edi
  0003f	7e 01		 jle	 SHORT $LN14@ChatBuffer

; 1286 : 		k = NowMaxChatLine + 1;

  00041	41		 inc	 ecx
$LN14@ChatBuffer:

; 1287 : 	else
; 1288 : 		k = NowMaxChatLine;
; 1289 : 	if( k > MAX_CHAT_LINE )

  00042	89 8d 50 ff ff
	ff		 mov	 DWORD PTR _k$1$[ebp], ecx
  00048	83 f9 1e	 cmp	 ecx, 30			; 0000001eH
  0004b	7e 0c		 jle	 SHORT $LN16@ChatBuffer

; 1290 : 		k = MAX_CHAT_LINE;

  0004d	c7 85 50 ff ff
	ff 1e 00 00 00	 mov	 DWORD PTR _k$1$[ebp], 30 ; 0000001eH

; 1291 : 	for( i = 0 ; i < k; i++ ){

  00057	eb 08		 jmp	 SHORT $LL90@ChatBuffer
$LN16@ChatBuffer:
  00059	85 c9		 test	 ecx, ecx
  0005b	0f 8e 31 01 00
	00		 jle	 $LN3@ChatBuffer
$LL90@ChatBuffer:

; 1292 : 		if( *ChatBuffer[ j ].buffer != NULL ){

  00061	69 c0 4c 01 00
	00		 imul	 eax, eax, 332
  00067	80 b8 00 00 00
	00 00		 cmp	 BYTE PTR ?ChatBuffer@@3PAU_CHAT_BUFFER@@A[eax], 0
  0006e	89 85 54 ff ff
	ff		 mov	 DWORD PTR tv630[ebp], eax
  00074	8d b0 00 00 00
	00		 lea	 esi, DWORD PTR ?ChatBuffer@@3PAU_CHAT_BUFFER@@A[eax]
  0007a	0f 84 c6 00 00
	00		 je	 $LN61@ChatBuffer

; 1293 : #ifdef _FONT_SIZE
; 1294 : #ifdef èŠå¤©è¡¨æƒ…
; 1295 : 			CHAT_BUFFER * temp = &ChatBuffer[j];
; 1296 : 			//printf("\n temp=%s",temp);
; 1297 : 			while (temp) {

  00080	85 f6		 test	 esi, esi
  00082	0f 84 be 00 00
	00		 je	 $LN61@ChatBuffer
  00088	0f 1f 84 00 00
	00 00 00	 npad	 8
$LL5@ChatBuffer:

; 1298 : 				if (temp->x>760) break;

  00090	8b 8e 10 01 00
	00		 mov	 ecx, DWORD PTR [esi+272]
  00096	81 f9 f8 02 00
	00		 cmp	 ecx, 760		; 000002f8H
  0009c	0f 8f 9e 00 00
	00		 jg	 $LN89@ChatBuffer

; 1299 : 				if (temp->image){

  000a2	83 be 40 01 00
	00 00		 cmp	 DWORD PTR [esi+320], 0
  000a9	74 2e		 je	 SHORT $LN19@ChatBuffer

; 1300 : 					temp->fontID = StockFontBufferExt(/*40+*/temp->x + x, y + ChatLineSmoothY + DISPLACEMENT_Y, FONT_PRIO_BACK, temp->color, (char *)temp->buffer, 2, temp->fontsize);

  000ab	ff b6 48 01 00
	00		 push	 DWORD PTR [esi+328]
  000b1	0f b6 86 05 01
	00 00		 movzx	 eax, BYTE PTR [esi+261]
  000b8	6a 02		 push	 2
  000ba	56		 push	 esi
  000bb	50		 push	 eax
  000bc	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DISPLACEMENT_Y@@3HA ; DISPLACEMENT_Y
  000c1	03 c7		 add	 eax, edi
  000c3	03 c3		 add	 eax, ebx
  000c5	6a 00		 push	 0
  000c7	50		 push	 eax
  000c8	8d 41 08	 lea	 eax, DWORD PTR [ecx+8]
  000cb	50		 push	 eax
  000cc	e8 00 00 00 00	 call	 ?StockFontBufferExt@@YAHHHDHPADHH@Z ; StockFontBufferExt
  000d1	89 86 44 01 00
	00		 mov	 DWORD PTR [esi+324], eax
  000d7	eb 50		 jmp	 SHORT $LN96@ChatBuffer
$LN19@ChatBuffer:

; 1301 : 				}else if (temp->BmpNo) {

  000d9	8b 86 0c 01 00
	00		 mov	 eax, DWORD PTR [esi+268]
  000df	85 c0		 test	 eax, eax
  000e1	74 20		 je	 SHORT $LN21@ChatBuffer

; 1302 : 					StockDispBuffer(/*40+*/temp->x + x + 14, y + ChatLineSmoothY + DISPLACEMENT_Y + 7, DISP_PRIO_IME1, temp->BmpNo, 0);

  000e3	6a 00		 push	 0
  000e5	50		 push	 eax
  000e6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DISPLACEMENT_Y@@3HA ; DISPLACEMENT_Y
  000eb	83 c0 07	 add	 eax, 7
  000ee	03 c7		 add	 eax, edi
  000f0	03 c3		 add	 eax, ebx
  000f2	6a 66		 push	 102			; 00000066H
  000f4	50		 push	 eax
  000f5	8d 41 16	 lea	 eax, DWORD PTR [ecx+22]
  000f8	50		 push	 eax
  000f9	e8 00 00 00 00	 call	 ?StockDispBuffer@@YAHHHEHH@Z ; StockDispBuffer
  000fe	83 c4 14	 add	 esp, 20			; 00000014H

; 1303 : 				}else {

  00101	eb 29		 jmp	 SHORT $LN22@ChatBuffer
$LN21@ChatBuffer:

; 1304 : 					StockFontBufferExt(/*40+*/temp->x + x, y + ChatLineSmoothY + DISPLACEMENT_Y, FONT_PRIO_BACK, temp->color, (char *)temp->buffer, 0, temp->fontsize);

  00103	ff b6 48 01 00
	00		 push	 DWORD PTR [esi+328]
  00109	0f b6 86 05 01
	00 00		 movzx	 eax, BYTE PTR [esi+261]
  00110	6a 00		 push	 0
  00112	56		 push	 esi
  00113	50		 push	 eax
  00114	a1 00 00 00 00	 mov	 eax, DWORD PTR ?DISPLACEMENT_Y@@3HA ; DISPLACEMENT_Y
  00119	03 c7		 add	 eax, edi
  0011b	03 c3		 add	 eax, ebx
  0011d	6a 00		 push	 0
  0011f	50		 push	 eax
  00120	8d 41 08	 lea	 eax, DWORD PTR [ecx+8]
  00123	50		 push	 eax
  00124	e8 00 00 00 00	 call	 ?StockFontBufferExt@@YAHHHDHPADHH@Z ; StockFontBufferExt
$LN96@ChatBuffer:

; 1305 : 				}
; 1306 : 				temp = temp->NextChatBuffer;

  00129	83 c4 1c	 add	 esp, 28			; 0000001cH
$LN22@ChatBuffer:
  0012c	8b b6 14 01 00
	00		 mov	 esi, DWORD PTR [esi+276]
  00132	8b 3d 00 00 00
	00		 mov	 edi, DWORD PTR ?ChatLineSmoothY@@3HA ; ChatLineSmoothY
  00138	85 f6		 test	 esi, esi
  0013a	0f 85 50 ff ff
	ff		 jne	 $LL5@ChatBuffer
$LN89@ChatBuffer:

; 1307 : 			}
; 1308 : 			//printf("\n temp=%s",temp);
; 1309 : #else
; 1310 : 			StockFontBufferExt(x, y + ChatLineSmoothY + DISPLACEMENT_Y - (int)((ChatBuffer[j].fontsize / 2)*1.4), FONT_PRIO_BACK, ChatBuffer[j].color, (char *)ChatBuffer[j].buffer, 0, ChatBuffer[j].fontsize);
; 1311 : #endif
; 1312 : 			//StockFontBufferExt( temp->x+x, y + ChatLineSmoothY + DISPLACEMENT_Y, FONT_PRIO_BACK, temp->color, ( char *)temp->buffer, 0, 0);
; 1313 : 
; 1314 : #else
; 1315 : 			StockFontBuffer(    x, y + ChatLineSmoothY + DISPLACEMENT_Y, FONT_PRIO_BACK, ChatBuffer[ j ].color, ( char *)ChatBuffer[ j ].buffer, 0 );
; 1316 : #endif
; 1317 : 		}
; 1318 : 		y -= CHAT_ZOUBUN_Y;
; 1319 : #ifdef _FONT_SIZE
; 1320 : 		y -= (int)((ChatBuffer[j].fontsize/2)*1.4);

  00140	8b 85 54 ff ff
	ff		 mov	 eax, DWORD PTR tv630[ebp]
$LN61@ChatBuffer:
  00146	8b 80 48 01 00
	00		 mov	 eax, DWORD PTR ?ChatBuffer@@3PAU_CHAT_BUFFER@@A[eax+328]
  0014c	b9 ea ff ff ff	 mov	 ecx, -22		; ffffffeaH
  00151	99		 cdq
  00152	2b c2		 sub	 eax, edx
  00154	d1 f8		 sar	 eax, 1
  00156	66 0f 6e c0	 movd	 xmm0, eax
  0015a	f3 0f e6 c0	 cvtdq2pd xmm0, xmm0
  0015e	f2 0f 59 05 00
	00 00 00	 mulsd	 xmm0, QWORD PTR __real@3ff6666666666666
  00166	f2 0f 2c c0	 cvttsd2si eax, xmm0
  0016a	2b c8		 sub	 ecx, eax

; 1321 : #endif
; 1322 : 		j--;

  0016c	8b 85 58 ff ff
	ff		 mov	 eax, DWORD PTR _j$2$[ebp]
  00172	03 d9		 add	 ebx, ecx
  00174	83 e8 01	 sub	 eax, 1

; 1323 : 		if( j < 0 )

  00177	b9 1d 00 00 00	 mov	 ecx, 29			; 0000001dH
  0017c	0f 48 c1	 cmovs	 eax, ecx
  0017f	83 ad 50 ff ff
	ff 01		 sub	 DWORD PTR _k$1$[ebp], 1
  00186	89 85 58 ff ff
	ff		 mov	 DWORD PTR _j$2$[ebp], eax
  0018c	0f 85 cf fe ff
	ff		 jne	 $LL90@ChatBuffer
$LN3@ChatBuffer:

; 1324 : 			j = MAX_CHAT_LINE - 1;
; 1325 : 	}
; 1326 : 	if( ChatLineSmoothY > 0 )

  00192	85 ff		 test	 edi, edi
  00194	7e 07		 jle	 SHORT $LN24@ChatBuffer

; 1327 : 		ChatLineSmoothY--;

  00196	4f		 dec	 edi
  00197	89 3d 00 00 00
	00		 mov	 DWORD PTR ?ChatLineSmoothY@@3HA, edi ; ChatLineSmoothY
$LN24@ChatBuffer:

; 1328 : #ifdef _NB_LABEL_DISP
; 1329 : 	int é¢‘é“å›¾æ ‡Y = 480 - 41;
; 1330 : 	if (ResoMode == åˆ†è¾¨çŽ‡::mode800){

  0019d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ResoMode@@3HA ; ResoMode
  001a2	b9 b7 01 00 00	 mov	 ecx, 439		; 000001b7H
  001a7	83 f8 03	 cmp	 eax, 3
  001aa	75 07		 jne	 SHORT $LN25@ChatBuffer

; 1331 : 		é¢‘é“å›¾æ ‡Y = 600 - 41;

  001ac	b9 2f 02 00 00	 mov	 ecx, 559		; 0000022fH
  001b1	eb 0f		 jmp	 SHORT $LN29@ChatBuffer
$LN25@ChatBuffer:

; 1332 : 	}else if (ResoMode == åˆ†è¾¨çŽ‡::mode640){

  001b3	85 c0		 test	 eax, eax
  001b5	74 0b		 je	 SHORT $LN29@ChatBuffer

; 1333 : 		é¢‘é“å›¾æ ‡Y = 480 - 41;
; 1334 : 	}else if (ResoMode == åˆ†è¾¨çŽ‡::mode1024){

  001b7	83 f8 04	 cmp	 eax, 4
  001ba	ba d7 02 00 00	 mov	 edx, 727		; 000002d7H
  001bf	0f 44 ca	 cmove	 ecx, edx
$LN29@ChatBuffer:

; 1335 : 		é¢‘é“å›¾æ ‡Y = 768 - 41;
; 1336 : 	}
; 1337 : 	int g_szChannelDisp[] = { 55400, 55401, 56003, 56004

  001c2	0f 28 05 00 00
	00 00		 movaps	 xmm0, XMMWORD PTR __xmm@0000dac40000dac30000d8690000d868

; 1338 : #ifdef _CHAR_PROFESSION//èŒä¸šé¢‘é“
; 1339 : 								,56005
; 1340 : #endif
; 1341 : #ifdef _CHATROOMPROTOCOL//èŠå¤©å®¤
; 1342 : 								,56006
; 1343 : #endif
; 1344 : #ifdef _CHATWORLDWIDEPROTOCOL//ä¸–ç•Œé¢‘é“
; 1345 : 								,56007
; 1346 : #endif
; 1347 : #ifdef _NB_CHANNEL_ALLSERV//æ˜Ÿçƒé¢‘é“
; 1348 : 								,56008
; 1349 : #endif
; 1350 : 								};
; 1351 : 	StockDispBuffer(25, é¢‘é“å›¾æ ‡Y, DISP_PRIO_IME3, g_szChannelDisp[TalkMode], 1);

  001c9	a1 00 00 00 00	 mov	 eax, DWORD PTR ?TalkMode@@3HA ; TalkMode
  001ce	0f 11 85 5c ff
	ff ff		 movups	 XMMWORD PTR _g_szChannelDisp$[ebp], xmm0
  001d5	6a 01		 push	 1
  001d7	0f 28 05 00 00
	00 00		 movaps	 xmm0, XMMWORD PTR __xmm@0000dac80000dac70000dac60000dac5
  001de	0f 11 85 6c ff
	ff ff		 movups	 XMMWORD PTR _g_szChannelDisp$[ebp+16], xmm0
  001e5	ff b4 85 5c ff
	ff ff		 push	 DWORD PTR _g_szChannelDisp$[ebp+eax*4]
  001ec	6a 69		 push	 105			; 00000069H
  001ee	51		 push	 ecx
  001ef	6a 19		 push	 25			; 00000019H
  001f1	e8 00 00 00 00	 call	 ?StockDispBuffer@@YAHHHEHH@Z ; StockDispBuffer

; 1352 : #endif
; 1353 : 
; 1354 : #ifdef èŠå¤©è¡¨æƒ…
; 1355 : 	extern void ShowBottomLineString(int iColor, LPSTR lpstr);
; 1356 : 	extern int focusGraId(int *id, int cnt);
; 1357 : 	extern int pushGraId(int *id, int cnt);
; 1358 : 	extern int selGraId(int *id, int cnt);
; 1359 : 	int è¡¨æƒ…æŒ‰é’®ID = -1;
; 1360 : 	static int è¡¨æƒ…å›¾ç‰‡ç´¢å¼• = 0;
; 1361 : 	static int è¡¨æƒ…çª—å£çŠ¶æ€ = FALSE;
; 1362 : 	static int è¡¨æƒ…å½“å‰é¡µ = 0;
; 1363 : 	static int è¡¨æƒ…æ€»é¡µ = (EXPRESSION_NOID_NUM) % 48 ? (EXPRESSION_NOID_NUM) / 48 + 1 : (EXPRESSION_NOID_NUM) / 48;
; 1364 : 	//30 549 
; 1365 : 	int è¡¨æƒ…x = 47;
; 1366 : 	int è¡¨æƒ…y = 549;
; 1367 : 	if (ResoMode == åˆ†è¾¨çŽ‡::mode800){

  001f6	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ResoMode@@3HA ; ResoMode
  001fb	83 c4 14	 add	 esp, 20			; 00000014H
  001fe	c7 85 48 ff ff
	ff ff ff ff ff	 mov	 DWORD PTR _øúï×äÎ?ID$[ebp], -1
  00208	bf 25 02 00 00	 mov	 edi, 549		; 00000225H
  0020d	83 f8 03	 cmp	 eax, 3
  00210	74 16		 je	 SHORT $LN34@ChatBuffer

; 1368 : 		è¡¨æƒ…y = 600 - 51;
; 1369 : 	}else if (ResoMode == åˆ†è¾¨çŽ‡::mode640){

  00212	85 c0		 test	 eax, eax
  00214	75 07		 jne	 SHORT $LN32@ChatBuffer

; 1370 : 		è¡¨æƒ…y = 480 - 51;

  00216	bf ad 01 00 00	 mov	 edi, 429		; 000001adH
  0021b	eb 0b		 jmp	 SHORT $LN34@ChatBuffer
$LN32@ChatBuffer:

; 1371 : 	}else if (ResoMode == åˆ†è¾¨çŽ‡::mode1024){

  0021d	83 f8 04	 cmp	 eax, 4
  00220	b9 cd 02 00 00	 mov	 ecx, 717		; 000002cdH
  00225	0f 44 f9	 cmove	 edi, ecx
$LN34@ChatBuffer:

; 1372 : 		è¡¨æƒ…y = 768 - 51;
; 1373 : 	}
; 1374 : 	if(è¡¨æƒ…çª—å£çŠ¶æ€){

  00228	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 0
  0022f	b9 4c d7 00 00	 mov	 ecx, 55116		; 0000d74cH

; 1375 : 		StockDispBufferç»å¯¹ä½ç½®(è¡¨æƒ…x, è¡¨æƒ…y, DISP_PRIO_IME3, CG_FIELD_CHAT_BTN_OFF, 1);
; 1376 : 	}else{
; 1377 : 		StockDispBufferç»å¯¹ä½ç½®(è¡¨æƒ…x, è¡¨æƒ…y, DISP_PRIO_IME3, CG_FIELD_CHAT_BTN_ON, 1);
; 1378 : 	}
; 1379 : 	if (MakeHitBox(è¡¨æƒ…x, è¡¨æƒ…y, è¡¨æƒ…x + 20, è¡¨æƒ…y + 20, DISP_PRIO_IME3) == TRUE){

  00234	6a 01		 push	 1
  00236	b8 3e d7 00 00	 mov	 eax, 55102		; 0000d73eH
  0023b	0f 45 c1	 cmovne	 eax, ecx
  0023e	50		 push	 eax
  0023f	6a 69		 push	 105			; 00000069H
  00241	57		 push	 edi
  00242	6a 2f		 push	 47			; 0000002fH
  00244	e8 00 00 00 00	 call	 ?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z ; StockDispBuffer??êÈöÇ
  00249	6a 69		 push	 105			; 00000069H
  0024b	8d 47 14	 lea	 eax, DWORD PTR [edi+20]
  0024e	50		 push	 eax
  0024f	6a 43		 push	 67			; 00000043H
  00251	57		 push	 edi
  00252	6a 2f		 push	 47			; 0000002fH
  00254	e8 00 00 00 00	 call	 ?MakeHitBox@@YAHHHHHH@Z	; MakeHitBox
  00259	83 c4 28	 add	 esp, 40			; 00000028H
  0025c	83 f8 01	 cmp	 eax, 1
  0025f	75 5f		 jne	 SHORT $LN39@ChatBuffer

; 1380 : 		ShowBottomLineString(FONT_PAL_WHITE, "ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡í•  ì´ëª¨í‹°ì½˜ì„ ì„ íƒí•©ë‹ˆë‹¤.");

  00261	68 00 00 00 00	 push	 OFFSET ??_C@_0CJ@PPAMOMEI@?$LL?s?$LE?k?$LJ?f?$LP?$KB?$LA?T?5?$MA?$PM?$LM?$NL?G?R?5?$MA?L?$LI?p?F?$LM?D?$NM?$MA?$LL?5?$LM?$LB@
  00266	6a 00		 push	 0
  00268	e8 00 00 00 00	 call	 ?ShowBottomLineString@@YAXHPAD@Z ; ShowBottomLineString
  0026d	83 c4 08	 add	 esp, 8

; 1381 : 		if (mouse.onceState & MOUSE_LEFT_CRICK) {

  00270	f6 05 2c 00 00
	00 01		 test	 BYTE PTR ?mouse@@3UMOUSE@@A+44, 1
  00277	74 3d		 je	 SHORT $LN38@ChatBuffer

; 1382 : 			è¡¨æƒ…å½“å‰é¡µ = 1;
; 1383 : 			è¡¨æƒ…å›¾ç‰‡ç´¢å¼• = 1;
; 1384 : 			if (è¡¨æƒ…çª—å£çŠ¶æ€) è¡¨æƒ…çª—å£çŠ¶æ€ = FALSE;

  00279	33 c0		 xor	 eax, eax
  0027b	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 1
  00285	39 05 00 00 00
	00		 cmp	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, eax

; 1385 : 			else è¡¨æƒ…çª—å£çŠ¶æ€ = TRUE;
; 1386 : 			play_se(203, 320, 240);

  0028b	68 f0 00 00 00	 push	 240			; 000000f0H
  00290	0f 94 c0	 sete	 al
  00293	c7 05 00 00 00
	00 01 00 00 00	 mov	 DWORD PTR ?øúï×?ø¸ßãìÚ@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 1
  0029d	68 40 01 00 00	 push	 320			; 00000140H
  002a2	68 cb 00 00 00	 push	 203			; 000000cbH
  002a7	a3 00 00 00 00	 mov	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, eax
  002ac	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se
  002b1	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1387 : 		}

  002b4	eb 0a		 jmp	 SHORT $LN39@ChatBuffer
$LN38@ChatBuffer:

; 1388 : 		else è¡¨æƒ…å›¾ç‰‡ç´¢å¼• = 0;

  002b6	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?øúï×?ø¸ßãìÚ@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 0
$LN39@ChatBuffer:

; 1389 : 	}
; 1390 : 	if (è¡¨æƒ…çª—å£çŠ¶æ€) {

  002c0	83 3d 00 00 00
	00 00		 cmp	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 0
  002c7	0f 84 d4 01 00
	00		 je	 $LN88@ChatBuffer

; 1391 : 		if (joy_trg[0] & JOY_ESC) {

  002cd	f7 05 00 00 00
	00 00 00 00 80	 test	 DWORD PTR ?joy_trg@@3PAKA, -2147483648 ; 80000000H
  002d7	74 2b		 je	 SHORT $LN43@ChatBuffer

; 1392 : 			MenuToggleFlag |= JOY_ESC;

  002d9	81 0d 00 00 00
	00 00 00 00 80	 or	 DWORD PTR ?MenuToggleFlag@@3IA, -2147483648 ; MenuToggleFlag, 80000000H

; 1393 : 			play_se(203, 320, 240);

  002e3	68 f0 00 00 00	 push	 240			; 000000f0H
  002e8	68 40 01 00 00	 push	 320			; 00000140H
  002ed	68 cb 00 00 00	 push	 203			; 000000cbH
  002f2	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se
  002f7	83 c4 0c	 add	 esp, 12			; 0000000cH

; 1394 : 			è¡¨æƒ…çª—å£çŠ¶æ€ = FALSE;

  002fa	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 0
$LN43@ChatBuffer:

; 1395 : 		}
; 1396 : 		int æ–¹å‘æŒ‰é’®ID[2];
; 1397 : 		StockDispBufferç»å¯¹ä½ç½®(2, è¡¨æƒ…y - 204, DISP_PRIO_IME3, 55103, 1);

  00304	6a 01		 push	 1
  00306	68 3f d7 00 00	 push	 55103			; 0000d73fH
  0030b	6a 69		 push	 105			; 00000069H
  0030d	8d 87 34 ff ff
	ff		 lea	 eax, DWORD PTR [edi-204]
  00313	50		 push	 eax
  00314	6a 02		 push	 2
  00316	e8 00 00 00 00	 call	 ?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z ; StockDispBuffer??êÈöÇ

; 1398 : 		æ–¹å‘æŒ‰é’®ID[0] = StockDispBufferç»å¯¹ä½ç½®(77, è¡¨æƒ…y - 26, DISP_PRIO_IME4, 55104, 2);

  0031b	6a 02		 push	 2
  0031d	68 40 d7 00 00	 push	 55104			; 0000d740H
  00322	6a 6a		 push	 106			; 0000006aH
  00324	8d 77 e6	 lea	 esi, DWORD PTR [edi-26]
  00327	56		 push	 esi
  00328	6a 4d		 push	 77			; 0000004dH
  0032a	e8 00 00 00 00	 call	 ?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z ; StockDispBuffer??êÈöÇ

; 1399 : 		æ–¹å‘æŒ‰é’®ID[1] = StockDispBufferç»å¯¹ä½ç½®(140, è¡¨æƒ…y - 26, DISP_PRIO_IME4, 55105, 2);

  0032f	6a 02		 push	 2
  00331	68 41 d7 00 00	 push	 55105			; 0000d741H
  00336	6a 6a		 push	 106			; 0000006aH
  00338	56		 push	 esi
  00339	68 8c 00 00 00	 push	 140			; 0000008cH
  0033e	89 85 4c ff ff
	ff		 mov	 DWORD PTR _Û°ú¾äÎ?ID$1[ebp], eax
  00344	e8 00 00 00 00	 call	 ?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z ; StockDispBuffer??êÈöÇ
  00349	89 85 50 ff ff
	ff		 mov	 DWORD PTR _Û°ú¾äÎ?ID$1[ebp+4], eax

; 1400 : 		int æŒ‰ä¸‹ID = selGraId(æ–¹å‘æŒ‰é’®ID, 2);

  0034f	8d 85 4c ff ff
	ff		 lea	 eax, DWORD PTR _Û°ú¾äÎ?ID$1[ebp]
  00355	6a 02		 push	 2
  00357	50		 push	 eax
  00358	e8 00 00 00 00	 call	 ?selGraId@@YAHPAHH@Z	; selGraId
  0035d	83 c4 44	 add	 esp, 68			; 00000044H

; 1401 : 		if (æŒ‰ä¸‹ID == 0) {//æŒ‰æ–¹å‘å·¦

  00360	85 c0		 test	 eax, eax
  00362	75 0d		 jne	 SHORT $LN44@ChatBuffer

; 1402 : 			if (è¡¨æƒ…å½“å‰é¡µ>1) è¡¨æƒ…å½“å‰é¡µ--;

  00364	a1 00 00 00 00	 mov	 eax, DWORD PTR ?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
  00369	83 f8 01	 cmp	 eax, 1
  0036c	7e 1b		 jle	 SHORT $LN48@ChatBuffer
  0036e	48		 dec	 eax

; 1403 : 		}

  0036f	eb 13		 jmp	 SHORT $LN97@ChatBuffer
$LN44@ChatBuffer:

; 1404 : 		else if (æŒ‰ä¸‹ID == 1) {//æŒ‰æ–¹å‘å³

  00371	83 f8 01	 cmp	 eax, 1
  00374	a1 00 00 00 00	 mov	 eax, DWORD PTR ?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
  00379	75 0e		 jne	 SHORT $LN48@ChatBuffer

; 1405 : 			if (è¡¨æƒ…å½“å‰é¡µ < è¡¨æƒ…æ€»é¡µ) è¡¨æƒ…å½“å‰é¡µ++;

  0037b	3b 05 00 00 00
	00		 cmp	 eax, DWORD PTR ?øúï×??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA
  00381	7d 06		 jge	 SHORT $LN48@ChatBuffer
  00383	40		 inc	 eax
$LN97@ChatBuffer:

; 1406 : 		}
; 1407 : 		int start = (è¡¨æƒ…å½“å‰é¡µ - 1) * 48;

  00384	a3 00 00 00 00	 mov	 DWORD PTR ?øúï×?îñ?@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, eax
$LN48@ChatBuffer:
  00389	8d 1c 40	 lea	 ebx, DWORD PTR [eax+eax*2]

; 1408 : 		int end = (è¡¨æƒ…å½“å‰é¡µ * 48 < EXPRESSION_NOID_NUM ? è¡¨æƒ…å½“å‰é¡µ * 48 : EXPRESSION_NOID_NUM);
; 1409 : 		int x, y;
; 1410 : 		for (y = 0; y<6; y++) {

  0038c	c7 85 54 ff ff
	ff 00 00 00 00	 mov	 DWORD PTR _y$1$[ebp], 0
  00396	c1 e3 04	 shl	 ebx, 4
  00399	8d 8f 38 ff ff
	ff		 lea	 ecx, DWORD PTR [edi-200]
  0039f	83 eb 30	 sub	 ebx, 48			; 00000030H
  003a2	89 8d 58 ff ff
	ff		 mov	 DWORD PTR tv614[ebp], ecx
  003a8	0f 1f 84 00 00
	00 00 00	 npad	 8
$LL92@ChatBuffer:

; 1411 : 			for (x = 0; x<8; x++) {

  003b0	8d 73 01	 lea	 esi, DWORD PTR [ebx+1]
  003b3	bf 07 00 00 00	 mov	 edi, 7
  003b8	0f 1f 84 00 00
	00 00 00	 npad	 8
$LL93@ChatBuffer:

; 1412 : 				è¡¨æƒ…æŒ‰é’®ID = StockDispBufferç»å¯¹ä½ç½®(7 + x * 29, è¡¨æƒ…y -200 + y * 29, DISP_PRIO_IME4, EXPRESSION_NOID_START + start, 2);

  003c0	6a 02		 push	 2
  003c2	8d 86 4c d7 00
	00		 lea	 eax, DWORD PTR [esi+55116]
  003c8	50		 push	 eax
  003c9	6a 6a		 push	 106			; 0000006aH
  003cb	51		 push	 ecx
  003cc	57		 push	 edi
  003cd	e8 00 00 00 00	 call	 ?StockDispBuffer??êÈöÇ@@YAHHHEHH@Z ; StockDispBuffer??êÈöÇ
  003d2	89 85 48 ff ff
	ff		 mov	 DWORD PTR _øúï×äÎ?ID$[ebp], eax

; 1413 : 				if (selGraId(&è¡¨æƒ…æŒ‰é’®ID, 1) != -1) {

  003d8	8d 85 48 ff ff
	ff		 lea	 eax, DWORD PTR _øúï×äÎ?ID$[ebp]
  003de	6a 01		 push	 1
  003e0	50		 push	 eax
  003e1	e8 00 00 00 00	 call	 ?selGraId@@YAHPAHH@Z	; selGraId
  003e6	83 c4 1c	 add	 esp, 28			; 0000001cH
  003e9	83 f8 ff	 cmp	 eax, -1
  003ec	74 78		 je	 SHORT $LN49@ChatBuffer

; 1414 : 					è¡¨æƒ…çª—å£çŠ¶æ€ = FALSE;
; 1415 : 					play_se(203, 320, 240);

  003ee	68 f0 00 00 00	 push	 240			; 000000f0H
  003f3	68 40 01 00 00	 push	 320			; 00000140H
  003f8	68 cb 00 00 00	 push	 203			; 000000cbH
  003fd	c7 05 00 00 00
	00 00 00 00 00	 mov	 DWORD PTR ?øúï×?Ï¢??@?1??ChatBufferToFontBuffer@@YAXXZ@4HA, 0
  00407	e8 00 00 00 00	 call	 ?play_se@@YAHHHH@Z	; play_se

; 1416 : 					char è¡¨æƒ…å†…å®¹[128];
; 1417 : 					sprintf_s(è¡¨æƒ…å†…å®¹, "{#%d}", start + 1);

  0040c	56		 push	 esi
  0040d	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _øúï×?é»$2[ebp]
  00413	68 00 00 00 00	 push	 OFFSET ??_C@_05OLBKMNMB@?$HL?$CD?$CFd?$HN@
  00418	50		 push	 eax
  00419	e8 00 00 00 00	 call	 ??$sprintf_s@$0IA@@@YAHAAY0IA@DPBDZZ ; sprintf_s<128>
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 83   : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_1(

  0041e	8d 85 7c ff ff
	ff		 lea	 eax, DWORD PTR _øúï×?é»$2[ebp]
  00424	50		 push	 eax
  00425	68 04 01 00 00	 push	 260			; 00000104H
  0042a	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  0042f	e8 00 00 00 00	 call	 _strcat_s
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 1419 : 					MyChatBuffer.cursor = strlen(MyChatBuffer.buffer);

  00434	b9 00 00 00 00	 mov	 ecx, OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\string.h

; 83   : __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_1(

  00439	83 c4 24	 add	 esp, 36			; 00000024H
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp

; 1419 : 					MyChatBuffer.cursor = strlen(MyChatBuffer.buffer);

  0043c	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
  0043f	90		 npad	 1
$LL94@ChatBuffer:
  00440	8a 01		 mov	 al, BYTE PTR [ecx]
  00442	41		 inc	 ecx
  00443	84 c0		 test	 al, al
  00445	75 f9		 jne	 SHORT $LL94@ChatBuffer
  00447	2b ca		 sub	 ecx, edx
  00449	88 0d 09 01 00
	00		 mov	 BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+265, cl

; 1420 : 					MyChatBuffer.cnt = strlen(MyChatBuffer.buffer);

  0044f	b9 00 00 00 00	 mov	 ecx, OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  00454	8d 51 01	 lea	 edx, DWORD PTR [ecx+1]
$LL95@ChatBuffer:
  00457	8a 01		 mov	 al, BYTE PTR [ecx]
  00459	41		 inc	 ecx
  0045a	84 c0		 test	 al, al
  0045c	75 f9		 jne	 SHORT $LL95@ChatBuffer
  0045e	2b ca		 sub	 ecx, edx
  00460	88 0d 07 01 00
	00		 mov	 BYTE PTR ?MyChatBuffer@@3USTR_BUFFER@@A+263, cl
$LN49@ChatBuffer:

; 1421 : 				}
; 1422 : 				start++;

  00466	46		 inc	 esi
  00467	43		 inc	 ebx

; 1423 : 				if (EXPRESSION_NOID_NUM < start) break;

  00468	83 fe 63	 cmp	 esi, 99			; 00000063H
  0046b	7f 34		 jg	 SHORT $LN88@ChatBuffer

; 1411 : 			for (x = 0; x<8; x++) {

  0046d	8b 8d 58 ff ff
	ff		 mov	 ecx, DWORD PTR tv614[ebp]
  00473	83 c7 1d	 add	 edi, 29			; 0000001dH
  00476	81 ff ef 00 00
	00		 cmp	 edi, 239		; 000000efH
  0047c	0f 8c 3e ff ff
	ff		 jl	 $LL93@ChatBuffer

; 1408 : 		int end = (è¡¨æƒ…å½“å‰é¡µ * 48 < EXPRESSION_NOID_NUM ? è¡¨æƒ…å½“å‰é¡µ * 48 : EXPRESSION_NOID_NUM);
; 1409 : 		int x, y;
; 1410 : 		for (y = 0; y<6; y++) {

  00482	8b 85 54 ff ff
	ff		 mov	 eax, DWORD PTR _y$1$[ebp]
  00488	83 c1 1d	 add	 ecx, 29			; 0000001dH
  0048b	40		 inc	 eax
  0048c	89 8d 58 ff ff
	ff		 mov	 DWORD PTR tv614[ebp], ecx
  00492	89 85 54 ff ff
	ff		 mov	 DWORD PTR _y$1$[ebp], eax
  00498	83 f8 06	 cmp	 eax, 6
  0049b	0f 8c 0f ff ff
	ff		 jl	 $LL92@ChatBuffer
$LN88@ChatBuffer:

; 1424 : 			}
; 1425 : 			if (EXPRESSION_NOID_NUM < start) break;
; 1426 : 		}
; 1427 : 	}
; 1428 : #endif
; 1429 : 
; 1430 : 	StockFontBuffer2( &MyChatBuffer );

  004a1	68 00 00 00 00	 push	 OFFSET ?MyChatBuffer@@3USTR_BUFFER@@A ; MyChatBuffer
  004a6	e8 00 00 00 00	 call	 ?StockFontBuffer2@@YAXPAUSTR_BUFFER@@@Z ; StockFontBuffer2

; 1431 : }

  004ab	8b 4d fc	 mov	 ecx, DWORD PTR __$ArrayPad$[ebp]
  004ae	83 c4 04	 add	 esp, 4
  004b1	33 cd		 xor	 ecx, ebp
  004b3	5f		 pop	 edi
  004b4	5e		 pop	 esi
  004b5	5b		 pop	 ebx
  004b6	e8 00 00 00 00	 call	 @__security_check_cookie@4
  004bb	8b e5		 mov	 esp, ebp
  004bd	5d		 pop	 ebp
  004be	c3		 ret	 0
?ChatBufferToFontBuffer@@YAXXZ ENDP			; ChatBufferToFontBuffer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StockStrBufferDBChar@@YAXPAD@Z
_TEXT	SEGMENT
_lpc$ = 8						; size = 4
?StockStrBufferDBChar@@YAXPAD@Z PROC			; StockStrBufferDBChar, COMDAT

; 1074 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1075 : 	int cnt,cursor;
; 1076 : 	if(pNowStrBuffer==NULL || (cnt=pNowStrBuffer->cnt) >= pNowStrBuffer->len-1)

  00003	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00009	85 d2		 test	 edx, edx
  0000b	74 73		 je	 SHORT $LN9@StockStrBu
  0000d	0f b6 8a 04 01
	00 00		 movzx	 ecx, BYTE PTR [edx+260]
  00014	0f b6 82 07 01
	00 00		 movzx	 eax, BYTE PTR [edx+263]
  0001b	49		 dec	 ecx
  0001c	3b c1		 cmp	 eax, ecx
  0001e	7d 60		 jge	 SHORT $LN9@StockStrBu

; 1077 : 		return;
; 1078 : 	char *buffer=pNowStrBuffer->buffer;

  00020	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?idKey@@3USTR_BUFFER@@A ; idKey

; 1079 : 	if(pNowStrBuffer==&idKey || pNowStrBuffer==&passwd)

  00026	74 58		 je	 SHORT $LN9@StockStrBu
  00028	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?passwd@@3USTR_BUFFER@@A ; passwd
  0002e	74 50		 je	 SHORT $LN9@StockStrBu

; 1080 : 		return;
; 1081 : 	else{
; 1082 : 		for(cursor=pNowStrBuffer->cursor;cursor<=cnt;cnt--)

  00030	56		 push	 esi
  00031	0f b6 b2 09 01
	00 00		 movzx	 esi, BYTE PTR [edx+265]
  00038	3b c6		 cmp	 eax, esi
  0003a	72 10		 jb	 SHORT $LN3@StockStrBu
  0003c	0f 1f 40 00	 npad	 4
$LL4@StockStrBu:

; 1083 : 			buffer[cnt+2]=buffer[cnt];

  00040	8a 0c 02	 mov	 cl, BYTE PTR [edx+eax]
  00043	88 4c 02 02	 mov	 BYTE PTR [edx+eax+2], cl
  00047	48		 dec	 eax
  00048	3b c6		 cmp	 eax, esi
  0004a	7d f4		 jge	 SHORT $LL4@StockStrBu
$LN3@StockStrBu:

; 1084 : 		buffer[cursor++]=*lpc++;

  0004c	8b 4d 08	 mov	 ecx, DWORD PTR _lpc$[ebp]
  0004f	0f b6 01	 movzx	 eax, BYTE PTR [ecx]
  00052	88 04 16	 mov	 BYTE PTR [esi+edx], al

; 1085 : 		buffer[cursor++]=*lpc;

  00055	0f b6 41 01	 movzx	 eax, BYTE PTR [ecx+1]
  00059	88 44 16 01	 mov	 BYTE PTR [esi+edx+1], al

; 1086 : 		pNowStrBuffer->cnt+=2;

  0005d	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer

; 1087 : 		pNowStrBuffer->cursor+=2;
; 1088 : 		CursorFlashCnt=20;

  00062	5e		 pop	 esi
  00063	80 80 07 01 00
	00 02		 add	 BYTE PTR [eax+263], 2
  0006a	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  0006f	80 80 09 01 00
	00 02		 add	 BYTE PTR [eax+265], 2
  00076	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
$LN9@StockStrBu:

; 1089 : 	}
; 1090 : }

  00080	5d		 pop	 ebp
  00081	c3		 ret	 0
?StockStrBufferDBChar@@YAXPAD@Z ENDP			; StockStrBufferDBChar
_TEXT	ENDS
; Function compile flags: /Ogtp
; File \\VBOXSVR\_stoneage\repos\ssm-sacli\system\chat.cpp
;	COMDAT ?StockStrBufferChar@@YAXD@Z
_TEXT	SEGMENT
_c$ = 8							; size = 1
?StockStrBufferChar@@YAXD@Z PROC			; StockStrBufferChar, COMDAT

; 1044 : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	53		 push	 ebx

; 1045 : 	if(BYTE(c)>0x1f){

  00004	8a 5d 08	 mov	 bl, BYTE PTR _c$[ebp]
  00007	80 fb 1f	 cmp	 bl, 31			; 0000001fH
  0000a	0f 86 9c 00 00
	00		 jbe	 $LN7@StockStrBu

; 1046 : 		int cnt,cursor;
; 1047 : 		if(pNowStrBuffer==NULL || (cnt=pNowStrBuffer->cnt) >= pNowStrBuffer->len)

  00010	8b 15 00 00 00
	00		 mov	 edx, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer
  00016	85 d2		 test	 edx, edx
  00018	0f 84 8e 00 00
	00		 je	 $LN7@StockStrBu
  0001e	0f b6 82 07 01
	00 00		 movzx	 eax, BYTE PTR [edx+263]
  00025	0f b6 8a 04 01
	00 00		 movzx	 ecx, BYTE PTR [edx+260]
  0002c	3b c1		 cmp	 eax, ecx
  0002e	73 7c		 jae	 SHORT $LN7@StockStrBu

; 1048 : 			return;
; 1049 : 		char *buffer=pNowStrBuffer->buffer;

  00030	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?idKey@@3USTR_BUFFER@@A ; idKey

; 1050 :  		if(pNowStrBuffer==&idKey || pNowStrBuffer==&passwd){

  00036	74 39		 je	 SHORT $LN10@StockStrBu
  00038	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?passwd@@3USTR_BUFFER@@A ; passwd
  0003e	74 31		 je	 SHORT $LN10@StockStrBu

; 1051 : 			/*if(!(('0'<=c && c<='9') || ('A'<=c && c<='Z') || ('a'<=c && c<='z')))
; 1052 : 				return;*/
; 1053 : 		}else if(pNowStrBuffer==&selCharName){

  00040	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?selCharName@@3USTR_BUFFER@@A ; selCharName
  00046	75 17		 jne	 SHORT $LN11@StockStrBu

; 1054 : 			if(' '==c || 'ã€€'==c|| ','==c || '|'==c || '\\'==c)

  00048	80 fb 20	 cmp	 bl, 32			; 00000020H
  0004b	74 5f		 je	 SHORT $LN7@StockStrBu
  0004d	80 fb 2c	 cmp	 bl, 44			; 0000002cH
  00050	74 5a		 je	 SHORT $LN7@StockStrBu
  00052	80 fb 7c	 cmp	 bl, 124			; 0000007cH
  00055	74 55		 je	 SHORT $LN7@StockStrBu
  00057	80 fb 5c	 cmp	 bl, 92			; 0000005cH
  0005a	75 15		 jne	 SHORT $LN10@StockStrBu
  0005c	5b		 pop	 ebx

; 1065 : #ifdef _TALK_WINDOW
; 1066 : 		if(g_bTalkWindow) TalkWindow.Update();
; 1067 : #endif
; 1068 : 	}
; 1069 : }

  0005d	5d		 pop	 ebp
  0005e	c3		 ret	 0
$LN11@StockStrBu:

; 1055 : 				return;
; 1056 : 		}else if(pNowStrBuffer==&SubBuffer){

  0005f	81 fa 00 00 00
	00		 cmp	 edx, OFFSET ?SubBuffer@@3USTR_BUFFER@@A ; SubBuffer
  00065	75 0a		 jne	 SHORT $LN10@StockStrBu

; 1057 : 			if('&'==c || '|'==c )

  00067	80 fb 26	 cmp	 bl, 38			; 00000026H
  0006a	74 40		 je	 SHORT $LN7@StockStrBu
  0006c	80 fb 7c	 cmp	 bl, 124			; 0000007cH
  0006f	74 3b		 je	 SHORT $LN7@StockStrBu
$LN10@StockStrBu:

; 1058 : 				return;
; 1059 : 		}
; 1060 : 		for(cursor=pNowStrBuffer->cursor++;cursor<=cnt;cnt--)

  00071	8a 8a 09 01 00
	00		 mov	 cl, BYTE PTR [edx+265]
  00077	56		 push	 esi
  00078	0f b6 f1	 movzx	 esi, cl
  0007b	fe c1		 inc	 cl
  0007d	88 8a 09 01 00
	00		 mov	 BYTE PTR [edx+265], cl
  00083	3b c6		 cmp	 eax, esi
  00085	72 0c		 jb	 SHORT $LN3@StockStrBu
$LL4@StockStrBu:

; 1061 : 			buffer[cnt+1]=buffer[cnt];

  00087	8a 0c 02	 mov	 cl, BYTE PTR [edx+eax]
  0008a	88 4c 02 01	 mov	 BYTE PTR [edx+eax+1], cl
  0008e	48		 dec	 eax
  0008f	3b c6		 cmp	 eax, esi
  00091	7d f4		 jge	 SHORT $LL4@StockStrBu
$LN3@StockStrBu:

; 1062 : 		buffer[cursor++]=c;

  00093	88 1c 16	 mov	 BYTE PTR [esi+edx], bl

; 1063 : 		pNowStrBuffer->cnt++;

  00096	a1 00 00 00 00	 mov	 eax, DWORD PTR ?pNowStrBuffer@@3PAUSTR_BUFFER@@A ; pNowStrBuffer

; 1064 : 		CursorFlashCnt=20;

  0009b	5e		 pop	 esi
  0009c	fe 80 07 01 00
	00		 inc	 BYTE PTR [eax+263]
  000a2	c7 05 00 00 00
	00 14 00 00 00	 mov	 DWORD PTR ?CursorFlashCnt@@3HA, 20 ; CursorFlashCnt, 00000014H
$LN7@StockStrBu:
  000ac	5b		 pop	 ebx

; 1065 : #ifdef _TALK_WINDOW
; 1066 : 		if(g_bTalkWindow) TalkWindow.Update();
; 1067 : #endif
; 1068 : 	}
; 1069 : }

  000ad	5d		 pop	 ebp
  000ae	c3		 ret	 0
?StockStrBufferChar@@YAXD@Z ENDP			; StockStrBufferChar
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\stdio.h
;	COMDAT _sscanf
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
_sscanf	PROC						; COMDAT

; 2247 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 2153 :         return __stdio_common_vsscanf(

  00003	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  00006	50		 push	 eax
  00007	6a 00		 push	 0
  00009	ff 75 0c	 push	 DWORD PTR __Format$[ebp]
  0000c	6a ff		 push	 -1
  0000e	ff 75 08	 push	 DWORD PTR __Buffer$[ebp]
  00011	e8 00 00 00 00	 call	 ___local_stdio_scanf_options
  00016	ff 70 04	 push	 DWORD PTR [eax+4]
  00019	ff 30		 push	 DWORD PTR [eax]
  0001b	e8 00 00 00 00	 call	 ___stdio_common_vsscanf
  00020	83 c4 1c	 add	 esp, 28			; 0000001cH

; 2248 :         int _Result;
; 2249 :         va_list _ArgList;
; 2250 :         __crt_va_start(_ArgList, _Format);
; 2251 :         _Result = _vsscanf_l(_Buffer, _Format, NULL, _ArgList);
; 2252 :         __crt_va_end(_ArgList);
; 2253 :         return _Result;
; 2254 :     }

  00023	5d		 pop	 ebp
  00024	c3		 ret	 0
_sscanf	ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\stdio.h
;	COMDAT _sprintf
_TEXT	SEGMENT
__Buffer$ = 8						; size = 4
__Format$ = 12						; size = 4
_sprintf PROC						; COMDAT

; 1771 :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 1392 :         int const _Result = __stdio_common_vsprintf(

  00003	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  00006	50		 push	 eax
  00007	6a 00		 push	 0
  00009	ff 75 0c	 push	 DWORD PTR __Format$[ebp]
  0000c	6a ff		 push	 -1
  0000e	ff 75 08	 push	 DWORD PTR __Buffer$[ebp]
  00011	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00016	8b 08		 mov	 ecx, DWORD PTR [eax]
  00018	ff 70 04	 push	 DWORD PTR [eax+4]
  0001b	83 c9 01	 or	 ecx, 1
  0001e	51		 push	 ecx
  0001f	e8 00 00 00 00	 call	 ___stdio_common_vsprintf

; 1393 :             _CRT_INTERNAL_LOCAL_PRINTF_OPTIONS | _CRT_INTERNAL_PRINTF_LEGACY_VSPRINTF_NULL_TERMINATION,
; 1394 :             _Buffer, _BufferCount, _Format, _Locale, _ArgList);
; 1395 : 
; 1396 :         return _Result < 0 ? -1 : _Result;

  00024	83 c9 ff	 or	 ecx, -1
  00027	83 c4 1c	 add	 esp, 28			; 0000001cH
  0002a	85 c0		 test	 eax, eax
  0002c	0f 48 c1	 cmovs	 eax, ecx

; 1772 :         int _Result;
; 1773 :         va_list _ArgList;
; 1774 :         __crt_va_start(_ArgList, _Format);
; 1775 : 
; 1776 :         _Result = _vsprintf_l(_Buffer, _Format, NULL, _ArgList);
; 1777 : 
; 1778 :         __crt_va_end(_ArgList);
; 1779 :         return _Result;
; 1780 :     }

  0002f	5d		 pop	 ebp
  00030	c3		 ret	 0
_sprintf ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\stdio.h
;	COMDAT _fprintf
_TEXT	SEGMENT
__Stream$ = 8						; size = 4
__Format$ = 12						; size = 4
_fprintf PROC						; COMDAT

; 837  :     {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 645  :         return __stdio_common_vfprintf(_CRT_INTERNAL_LOCAL_PRINTF_OPTIONS, _Stream, _Format, _Locale, _ArgList);

  00003	8d 45 10	 lea	 eax, DWORD PTR __Format$[ebp+4]
  00006	50		 push	 eax
  00007	6a 00		 push	 0
  00009	ff 75 0c	 push	 DWORD PTR __Format$[ebp]
  0000c	ff 75 08	 push	 DWORD PTR __Stream$[ebp]
  0000f	e8 00 00 00 00	 call	 ___local_stdio_printf_options
  00014	ff 70 04	 push	 DWORD PTR [eax+4]
  00017	ff 30		 push	 DWORD PTR [eax]
  00019	e8 00 00 00 00	 call	 ___stdio_common_vfprintf
  0001e	83 c4 18	 add	 esp, 24			; 00000018H

; 838  :         int _Result;
; 839  :         va_list _ArgList;
; 840  :         __crt_va_start(_ArgList, _Format);
; 841  :         _Result = _vfprintf_l(_Stream, _Format, NULL, _ArgList);
; 842  :         __crt_va_end(_ArgList);
; 843  :         return _Result;
; 844  :     }

  00021	5d		 pop	 ebp
  00022	c3		 ret	 0
_fprintf ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\corecrt_stdio_config.h
;	COMDAT ___local_stdio_scanf_options
_TEXT	SEGMENT
___local_stdio_scanf_options PROC			; COMDAT

; 101  :         static unsigned __int64 _OptionsStorage;
; 102  :         return &_OptionsStorage;

  00000	b8 00 00 00 00	 mov	 eax, OFFSET ?_OptionsStorage@?1??__local_stdio_scanf_options@@9@4_KA ; `__local_stdio_scanf_options'::`2'::_OptionsStorage

; 103  :     }

  00005	c3		 ret	 0
___local_stdio_scanf_options ENDP
_TEXT	ENDS
; Function compile flags: /Ogtp
; File C:\Program Files (x86)\Windows Kits\10\Include\10.0.19041.0\ucrt\corecrt_stdio_config.h
;	COMDAT ___local_stdio_printf_options
_TEXT	SEGMENT
___local_stdio_printf_options PROC			; COMDAT

; 91   :         static unsigned __int64 _OptionsStorage;
; 92   :         return &_OptionsStorage;

  00000	b8 00 00 00 00	 mov	 eax, OFFSET ?_OptionsStorage@?1??__local_stdio_printf_options@@9@4_KA ; `__local_stdio_printf_options'::`2'::_OptionsStorage

; 93   :     }

  00005	c3		 ret	 0
___local_stdio_printf_options ENDP
_TEXT	ENDS
END
